{"remainingRequest":"E:\\自己的项目\\three_test\\node_modules\\babel-loader\\lib\\index.js!E:\\自己的项目\\three_test\\src\\assets\\jsm\\controls\\OrbitControls.js","dependencies":[{"path":"E:\\自己的项目\\three_test\\src\\assets\\jsm\\controls\\OrbitControls.js","mtime":1579613445384},{"path":"E:\\自己的项目\\three_test\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\自己的项目\\three_test\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zdWIiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yIjsKCi8qKgogKiBAYXV0aG9yIHFpYW8gLyBodHRwczovL2dpdGh1Yi5jb20vcWlhbwogKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tCiAqIEBhdXRob3IgYWx0ZXJlZHEgLyBodHRwOi8vYWx0ZXJlZHF1YWxpYS5jb20vCiAqIEBhdXRob3IgV2VzdExhbmdsZXkgLyBodHRwOi8vZ2l0aHViLmNvbS9XZXN0TGFuZ2xleQogKiBAYXV0aG9yIGVyaWNoNjY2IC8gaHR0cDovL2VyaWNoYWluZXMuY29tCiAqIEBhdXRob3IgU2NpZUNvZGUgLyBodHRwOi8vZ2l0aHViLmNvbS9zY2llY29kZQogKi8KaW1wb3J0IHsgRXZlbnREaXNwYXRjaGVyLCBNT1VTRSwgUXVhdGVybmlvbiwgU3BoZXJpY2FsLCBUT1VDSCwgVmVjdG9yMiwgVmVjdG9yMyB9IGZyb20gIi4uLy4uL2pzL3RocmVlLm1vZHVsZS5qcyI7IC8vIFRoaXMgc2V0IG9mIGNvbnRyb2xzIHBlcmZvcm1zIG9yYml0aW5nLCBkb2xseWluZyAoem9vbWluZyksIGFuZCBwYW5uaW5nLgovLyBVbmxpa2UgVHJhY2tiYWxsQ29udHJvbHMsIGl0IG1haW50YWlucyB0aGUgInVwIiBkaXJlY3Rpb24gb2JqZWN0LnVwICgrWSBieSBkZWZhdWx0KS4KLy8KLy8gICAgT3JiaXQgLSBsZWZ0IG1vdXNlIC8gdG91Y2g6IG9uZS1maW5nZXIgbW92ZQovLyAgICBab29tIC0gbWlkZGxlIG1vdXNlLCBvciBtb3VzZXdoZWVsIC8gdG91Y2g6IHR3by1maW5nZXIgc3ByZWFkIG9yIHNxdWlzaAovLyAgICBQYW4gLSByaWdodCBtb3VzZSwgb3IgbGVmdCBtb3VzZSArIGN0cmwvbWV0YS9zaGlmdEtleSwgb3IgYXJyb3cga2V5cyAvIHRvdWNoOiB0d28tZmluZ2VyIG1vdmUKCnZhciBPcmJpdENvbnRyb2xzID0gZnVuY3Rpb24gT3JiaXRDb250cm9scyhvYmplY3QsIGRvbUVsZW1lbnQpIHsKICBpZiAoZG9tRWxlbWVudCA9PT0gdW5kZWZpbmVkKSBjb25zb2xlLndhcm4oJ1RIUkVFLk9yYml0Q29udHJvbHM6IFRoZSBzZWNvbmQgcGFyYW1ldGVyICJkb21FbGVtZW50IiBpcyBub3cgbWFuZGF0b3J5LicpOwogIGlmIChkb21FbGVtZW50ID09PSBkb2N1bWVudCkgY29uc29sZS5lcnJvcignVEhSRUUuT3JiaXRDb250cm9sczogImRvY3VtZW50IiBzaG91bGQgbm90IGJlIHVzZWQgYXMgdGhlIHRhcmdldCAiZG9tRWxlbWVudCIuIFBsZWFzZSB1c2UgInJlbmRlcmVyLmRvbUVsZW1lbnQiIGluc3RlYWQuJyk7CiAgdGhpcy5vYmplY3QgPSBvYmplY3Q7CiAgdGhpcy5kb21FbGVtZW50ID0gZG9tRWxlbWVudDsgLy8gU2V0IHRvIGZhbHNlIHRvIGRpc2FibGUgdGhpcyBjb250cm9sCgogIHRoaXMuZW5hYmxlZCA9IHRydWU7IC8vICJ0YXJnZXQiIHNldHMgdGhlIGxvY2F0aW9uIG9mIGZvY3VzLCB3aGVyZSB0aGUgb2JqZWN0IG9yYml0cyBhcm91bmQKCiAgdGhpcy50YXJnZXQgPSBuZXcgVmVjdG9yMygpOyAvLyBIb3cgZmFyIHlvdSBjYW4gZG9sbHkgaW4gYW5kIG91dCAoIFBlcnNwZWN0aXZlQ2FtZXJhIG9ubHkgKQoKICB0aGlzLm1pbkRpc3RhbmNlID0gMDsKICB0aGlzLm1heERpc3RhbmNlID0gSW5maW5pdHk7IC8vIEhvdyBmYXIgeW91IGNhbiB6b29tIGluIGFuZCBvdXQgKCBPcnRob2dyYXBoaWNDYW1lcmEgb25seSApCgogIHRoaXMubWluWm9vbSA9IDA7CiAgdGhpcy5tYXhab29tID0gSW5maW5pdHk7IC8vIEhvdyBmYXIgeW91IGNhbiBvcmJpdCB2ZXJ0aWNhbGx5LCB1cHBlciBhbmQgbG93ZXIgbGltaXRzLgogIC8vIFJhbmdlIGlzIDAgdG8gTWF0aC5QSSByYWRpYW5zLgoKICB0aGlzLm1pblBvbGFyQW5nbGUgPSAwOyAvLyByYWRpYW5zCgogIHRoaXMubWF4UG9sYXJBbmdsZSA9IE1hdGguUEk7IC8vIHJhZGlhbnMKICAvLyBIb3cgZmFyIHlvdSBjYW4gb3JiaXQgaG9yaXpvbnRhbGx5LCB1cHBlciBhbmQgbG93ZXIgbGltaXRzLgogIC8vIElmIHNldCwgbXVzdCBiZSBhIHN1Yi1pbnRlcnZhbCBvZiB0aGUgaW50ZXJ2YWwgWyAtIE1hdGguUEksIE1hdGguUEkgXS4KCiAgdGhpcy5taW5BemltdXRoQW5nbGUgPSAtSW5maW5pdHk7IC8vIHJhZGlhbnMKCiAgdGhpcy5tYXhBemltdXRoQW5nbGUgPSBJbmZpbml0eTsgLy8gcmFkaWFucwogIC8vIFNldCB0byB0cnVlIHRvIGVuYWJsZSBkYW1waW5nIChpbmVydGlhKQogIC8vIElmIGRhbXBpbmcgaXMgZW5hYmxlZCwgeW91IG11c3QgY2FsbCBjb250cm9scy51cGRhdGUoKSBpbiB5b3VyIGFuaW1hdGlvbiBsb29wCgogIHRoaXMuZW5hYmxlRGFtcGluZyA9IGZhbHNlOwogIHRoaXMuZGFtcGluZ0ZhY3RvciA9IDAuMDU7IC8vIFRoaXMgb3B0aW9uIGFjdHVhbGx5IGVuYWJsZXMgZG9sbHlpbmcgaW4gYW5kIG91dDsgbGVmdCBhcyAiem9vbSIgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LgogIC8vIFNldCB0byBmYWxzZSB0byBkaXNhYmxlIHpvb21pbmcKCiAgdGhpcy5lbmFibGVab29tID0gdHJ1ZTsKICB0aGlzLnpvb21TcGVlZCA9IDEuMDsgLy8gU2V0IHRvIGZhbHNlIHRvIGRpc2FibGUgcm90YXRpbmcKCiAgdGhpcy5lbmFibGVSb3RhdGUgPSB0cnVlOwogIHRoaXMucm90YXRlU3BlZWQgPSAxLjA7IC8vIFNldCB0byBmYWxzZSB0byBkaXNhYmxlIHBhbm5pbmcKCiAgdGhpcy5lbmFibGVQYW4gPSB0cnVlOwogIHRoaXMucGFuU3BlZWQgPSAxLjA7CiAgdGhpcy5zY3JlZW5TcGFjZVBhbm5pbmcgPSBmYWxzZTsgLy8gaWYgdHJ1ZSwgcGFuIGluIHNjcmVlbi1zcGFjZQoKICB0aGlzLmtleVBhblNwZWVkID0gNy4wOyAvLyBwaXhlbHMgbW92ZWQgcGVyIGFycm93IGtleSBwdXNoCiAgLy8gU2V0IHRvIHRydWUgdG8gYXV0b21hdGljYWxseSByb3RhdGUgYXJvdW5kIHRoZSB0YXJnZXQKICAvLyBJZiBhdXRvLXJvdGF0ZSBpcyBlbmFibGVkLCB5b3UgbXVzdCBjYWxsIGNvbnRyb2xzLnVwZGF0ZSgpIGluIHlvdXIgYW5pbWF0aW9uIGxvb3AKCiAgdGhpcy5hdXRvUm90YXRlID0gZmFsc2U7CiAgdGhpcy5hdXRvUm90YXRlU3BlZWQgPSAyLjA7IC8vIDMwIHNlY29uZHMgcGVyIHJvdW5kIHdoZW4gZnBzIGlzIDYwCiAgLy8gU2V0IHRvIGZhbHNlIHRvIGRpc2FibGUgdXNlIG9mIHRoZSBrZXlzCgogIHRoaXMuZW5hYmxlS2V5cyA9IHRydWU7IC8vIFRoZSBmb3VyIGFycm93IGtleXMKCiAgdGhpcy5rZXlzID0gewogICAgTEVGVDogMzcsCiAgICBVUDogMzgsCiAgICBSSUdIVDogMzksCiAgICBCT1RUT006IDQwCiAgfTsgLy8gTW91c2UgYnV0dG9ucwoKICB0aGlzLm1vdXNlQnV0dG9ucyA9IHsKICAgIExFRlQ6IE1PVVNFLlJPVEFURSwKICAgIE1JRERMRTogTU9VU0UuRE9MTFksCiAgICBSSUdIVDogTU9VU0UuUEFOCiAgfTsgLy8gVG91Y2ggZmluZ2VycwoKICB0aGlzLnRvdWNoZXMgPSB7CiAgICBPTkU6IFRPVUNILlJPVEFURSwKICAgIFRXTzogVE9VQ0guRE9MTFlfUEFOCiAgfTsgLy8gZm9yIHJlc2V0CgogIHRoaXMudGFyZ2V0MCA9IHRoaXMudGFyZ2V0LmNsb25lKCk7CiAgdGhpcy5wb3NpdGlvbjAgPSB0aGlzLm9iamVjdC5wb3NpdGlvbi5jbG9uZSgpOwogIHRoaXMuem9vbTAgPSB0aGlzLm9iamVjdC56b29tOyAvLwogIC8vIHB1YmxpYyBtZXRob2RzCiAgLy8KCiAgdGhpcy5nZXRQb2xhckFuZ2xlID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHNwaGVyaWNhbC5waGk7CiAgfTsKCiAgdGhpcy5nZXRBemltdXRoYWxBbmdsZSA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBzcGhlcmljYWwudGhldGE7CiAgfTsKCiAgdGhpcy5zYXZlU3RhdGUgPSBmdW5jdGlvbiAoKSB7CiAgICBzY29wZS50YXJnZXQwLmNvcHkoc2NvcGUudGFyZ2V0KTsKICAgIHNjb3BlLnBvc2l0aW9uMC5jb3B5KHNjb3BlLm9iamVjdC5wb3NpdGlvbik7CiAgICBzY29wZS56b29tMCA9IHNjb3BlLm9iamVjdC56b29tOwogIH07CgogIHRoaXMucmVzZXQgPSBmdW5jdGlvbiAoKSB7CiAgICBzY29wZS50YXJnZXQuY29weShzY29wZS50YXJnZXQwKTsKICAgIHNjb3BlLm9iamVjdC5wb3NpdGlvbi5jb3B5KHNjb3BlLnBvc2l0aW9uMCk7CiAgICBzY29wZS5vYmplY3Quem9vbSA9IHNjb3BlLnpvb20wOwogICAgc2NvcGUub2JqZWN0LnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTsKICAgIHNjb3BlLmRpc3BhdGNoRXZlbnQoY2hhbmdlRXZlbnQpOwogICAgc2NvcGUudXBkYXRlKCk7CiAgICBzdGF0ZSA9IFNUQVRFLk5PTkU7CiAgfTsgLy8gdGhpcyBtZXRob2QgaXMgZXhwb3NlZCwgYnV0IHBlcmhhcHMgaXQgd291bGQgYmUgYmV0dGVyIGlmIHdlIGNhbiBtYWtlIGl0IHByaXZhdGUuLi4KCgogIHRoaXMudXBkYXRlID0gZnVuY3Rpb24gKCkgewogICAgdmFyIG9mZnNldCA9IG5ldyBWZWN0b3IzKCk7IC8vIHNvIGNhbWVyYS51cCBpcyB0aGUgb3JiaXQgYXhpcwoKICAgIHZhciBxdWF0ID0gbmV3IFF1YXRlcm5pb24oKS5zZXRGcm9tVW5pdFZlY3RvcnMob2JqZWN0LnVwLCBuZXcgVmVjdG9yMygwLCAxLCAwKSk7CiAgICB2YXIgcXVhdEludmVyc2UgPSBxdWF0LmNsb25lKCkuaW52ZXJzZSgpOwogICAgdmFyIGxhc3RQb3NpdGlvbiA9IG5ldyBWZWN0b3IzKCk7CiAgICB2YXIgbGFzdFF1YXRlcm5pb24gPSBuZXcgUXVhdGVybmlvbigpOwogICAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZSgpIHsKICAgICAgdmFyIHBvc2l0aW9uID0gc2NvcGUub2JqZWN0LnBvc2l0aW9uOwogICAgICBvZmZzZXQuY29weShwb3NpdGlvbikuc3ViKHNjb3BlLnRhcmdldCk7IC8vIHJvdGF0ZSBvZmZzZXQgdG8gInktYXhpcy1pcy11cCIgc3BhY2UKCiAgICAgIG9mZnNldC5hcHBseVF1YXRlcm5pb24ocXVhdCk7IC8vIGFuZ2xlIGZyb20gei1heGlzIGFyb3VuZCB5LWF4aXMKCiAgICAgIHNwaGVyaWNhbC5zZXRGcm9tVmVjdG9yMyhvZmZzZXQpOwoKICAgICAgaWYgKHNjb3BlLmF1dG9Sb3RhdGUgJiYgc3RhdGUgPT09IFNUQVRFLk5PTkUpIHsKICAgICAgICByb3RhdGVMZWZ0KGdldEF1dG9Sb3RhdGlvbkFuZ2xlKCkpOwogICAgICB9CgogICAgICBpZiAoc2NvcGUuZW5hYmxlRGFtcGluZykgewogICAgICAgIHNwaGVyaWNhbC50aGV0YSArPSBzcGhlcmljYWxEZWx0YS50aGV0YSAqIHNjb3BlLmRhbXBpbmdGYWN0b3I7CiAgICAgICAgc3BoZXJpY2FsLnBoaSArPSBzcGhlcmljYWxEZWx0YS5waGkgKiBzY29wZS5kYW1waW5nRmFjdG9yOwogICAgICB9IGVsc2UgewogICAgICAgIHNwaGVyaWNhbC50aGV0YSArPSBzcGhlcmljYWxEZWx0YS50aGV0YTsKICAgICAgICBzcGhlcmljYWwucGhpICs9IHNwaGVyaWNhbERlbHRhLnBoaTsKICAgICAgfSAvLyByZXN0cmljdCB0aGV0YSB0byBiZSBiZXR3ZWVuIGRlc2lyZWQgbGltaXRzCgoKICAgICAgc3BoZXJpY2FsLnRoZXRhID0gTWF0aC5tYXgoc2NvcGUubWluQXppbXV0aEFuZ2xlLCBNYXRoLm1pbihzY29wZS5tYXhBemltdXRoQW5nbGUsIHNwaGVyaWNhbC50aGV0YSkpOyAvLyByZXN0cmljdCBwaGkgdG8gYmUgYmV0d2VlbiBkZXNpcmVkIGxpbWl0cwoKICAgICAgc3BoZXJpY2FsLnBoaSA9IE1hdGgubWF4KHNjb3BlLm1pblBvbGFyQW5nbGUsIE1hdGgubWluKHNjb3BlLm1heFBvbGFyQW5nbGUsIHNwaGVyaWNhbC5waGkpKTsKICAgICAgc3BoZXJpY2FsLm1ha2VTYWZlKCk7CiAgICAgIHNwaGVyaWNhbC5yYWRpdXMgKj0gc2NhbGU7IC8vIHJlc3RyaWN0IHJhZGl1cyB0byBiZSBiZXR3ZWVuIGRlc2lyZWQgbGltaXRzCgogICAgICBzcGhlcmljYWwucmFkaXVzID0gTWF0aC5tYXgoc2NvcGUubWluRGlzdGFuY2UsIE1hdGgubWluKHNjb3BlLm1heERpc3RhbmNlLCBzcGhlcmljYWwucmFkaXVzKSk7IC8vIG1vdmUgdGFyZ2V0IHRvIHBhbm5lZCBsb2NhdGlvbgoKICAgICAgaWYgKHNjb3BlLmVuYWJsZURhbXBpbmcgPT09IHRydWUpIHsKICAgICAgICBzY29wZS50YXJnZXQuYWRkU2NhbGVkVmVjdG9yKHBhbk9mZnNldCwgc2NvcGUuZGFtcGluZ0ZhY3Rvcik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2NvcGUudGFyZ2V0LmFkZChwYW5PZmZzZXQpOwogICAgICB9CgogICAgICBvZmZzZXQuc2V0RnJvbVNwaGVyaWNhbChzcGhlcmljYWwpOyAvLyByb3RhdGUgb2Zmc2V0IGJhY2sgdG8gImNhbWVyYS11cC12ZWN0b3ItaXMtdXAiIHNwYWNlCgogICAgICBvZmZzZXQuYXBwbHlRdWF0ZXJuaW9uKHF1YXRJbnZlcnNlKTsKICAgICAgcG9zaXRpb24uY29weShzY29wZS50YXJnZXQpLmFkZChvZmZzZXQpOwogICAgICBzY29wZS5vYmplY3QubG9va0F0KHNjb3BlLnRhcmdldCk7CgogICAgICBpZiAoc2NvcGUuZW5hYmxlRGFtcGluZyA9PT0gdHJ1ZSkgewogICAgICAgIHNwaGVyaWNhbERlbHRhLnRoZXRhICo9IDEgLSBzY29wZS5kYW1waW5nRmFjdG9yOwogICAgICAgIHNwaGVyaWNhbERlbHRhLnBoaSAqPSAxIC0gc2NvcGUuZGFtcGluZ0ZhY3RvcjsKICAgICAgICBwYW5PZmZzZXQubXVsdGlwbHlTY2FsYXIoMSAtIHNjb3BlLmRhbXBpbmdGYWN0b3IpOwogICAgICB9IGVsc2UgewogICAgICAgIHNwaGVyaWNhbERlbHRhLnNldCgwLCAwLCAwKTsKICAgICAgICBwYW5PZmZzZXQuc2V0KDAsIDAsIDApOwogICAgICB9CgogICAgICBzY2FsZSA9IDE7IC8vIHVwZGF0ZSBjb25kaXRpb24gaXM6CiAgICAgIC8vIG1pbihjYW1lcmEgZGlzcGxhY2VtZW50LCBjYW1lcmEgcm90YXRpb24gaW4gcmFkaWFucyleMiA+IEVQUwogICAgICAvLyB1c2luZyBzbWFsbC1hbmdsZSBhcHByb3hpbWF0aW9uIGNvcyh4LzIpID0gMSAtIHheMiAvIDgKCiAgICAgIGlmICh6b29tQ2hhbmdlZCB8fCBsYXN0UG9zaXRpb24uZGlzdGFuY2VUb1NxdWFyZWQoc2NvcGUub2JqZWN0LnBvc2l0aW9uKSA+IEVQUyB8fCA4ICogKDEgLSBsYXN0UXVhdGVybmlvbi5kb3Qoc2NvcGUub2JqZWN0LnF1YXRlcm5pb24pKSA+IEVQUykgewogICAgICAgIHNjb3BlLmRpc3BhdGNoRXZlbnQoY2hhbmdlRXZlbnQpOwogICAgICAgIGxhc3RQb3NpdGlvbi5jb3B5KHNjb3BlLm9iamVjdC5wb3NpdGlvbik7CiAgICAgICAgbGFzdFF1YXRlcm5pb24uY29weShzY29wZS5vYmplY3QucXVhdGVybmlvbik7CiAgICAgICAgem9vbUNoYW5nZWQgPSBmYWxzZTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfTsKICB9KCk7CgogIHRoaXMuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHsKICAgIHNjb3BlLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCBvbkNvbnRleHRNZW51LCBmYWxzZSk7CiAgICBzY29wZS5kb21FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG9uTW91c2VEb3duLCBmYWxzZSk7CiAgICBzY29wZS5kb21FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3doZWVsJywgb25Nb3VzZVdoZWVsLCBmYWxzZSk7CiAgICBzY29wZS5kb21FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBvblRvdWNoU3RhcnQsIGZhbHNlKTsKICAgIHNjb3BlLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBvblRvdWNoRW5kLCBmYWxzZSk7CiAgICBzY29wZS5kb21FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIG9uVG91Y2hNb3ZlLCBmYWxzZSk7CiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBvbk1vdXNlTW92ZSwgZmFsc2UpOwogICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG9uTW91c2VVcCwgZmFsc2UpOwogICAgc2NvcGUuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgb25LZXlEb3duLCBmYWxzZSk7IC8vc2NvcGUuZGlzcGF0Y2hFdmVudCggeyB0eXBlOiAnZGlzcG9zZScgfSApOyAvLyBzaG91bGQgdGhpcyBiZSBhZGRlZCBoZXJlPwogIH07IC8vCiAgLy8gaW50ZXJuYWxzCiAgLy8KCgogIHZhciBzY29wZSA9IHRoaXM7CiAgdmFyIGNoYW5nZUV2ZW50ID0gewogICAgdHlwZTogJ2NoYW5nZScKICB9OwogIHZhciBzdGFydEV2ZW50ID0gewogICAgdHlwZTogJ3N0YXJ0JwogIH07CiAgdmFyIGVuZEV2ZW50ID0gewogICAgdHlwZTogJ2VuZCcKICB9OwogIHZhciBTVEFURSA9IHsKICAgIE5PTkU6IC0xLAogICAgUk9UQVRFOiAwLAogICAgRE9MTFk6IDEsCiAgICBQQU46IDIsCiAgICBUT1VDSF9ST1RBVEU6IDMsCiAgICBUT1VDSF9QQU46IDQsCiAgICBUT1VDSF9ET0xMWV9QQU46IDUsCiAgICBUT1VDSF9ET0xMWV9ST1RBVEU6IDYKICB9OwogIHZhciBzdGF0ZSA9IFNUQVRFLk5PTkU7CiAgdmFyIEVQUyA9IDAuMDAwMDAxOyAvLyBjdXJyZW50IHBvc2l0aW9uIGluIHNwaGVyaWNhbCBjb29yZGluYXRlcwoKICB2YXIgc3BoZXJpY2FsID0gbmV3IFNwaGVyaWNhbCgpOwogIHZhciBzcGhlcmljYWxEZWx0YSA9IG5ldyBTcGhlcmljYWwoKTsKICB2YXIgc2NhbGUgPSAxOwogIHZhciBwYW5PZmZzZXQgPSBuZXcgVmVjdG9yMygpOwogIHZhciB6b29tQ2hhbmdlZCA9IGZhbHNlOwogIHZhciByb3RhdGVTdGFydCA9IG5ldyBWZWN0b3IyKCk7CiAgdmFyIHJvdGF0ZUVuZCA9IG5ldyBWZWN0b3IyKCk7CiAgdmFyIHJvdGF0ZURlbHRhID0gbmV3IFZlY3RvcjIoKTsKICB2YXIgcGFuU3RhcnQgPSBuZXcgVmVjdG9yMigpOwogIHZhciBwYW5FbmQgPSBuZXcgVmVjdG9yMigpOwogIHZhciBwYW5EZWx0YSA9IG5ldyBWZWN0b3IyKCk7CiAgdmFyIGRvbGx5U3RhcnQgPSBuZXcgVmVjdG9yMigpOwogIHZhciBkb2xseUVuZCA9IG5ldyBWZWN0b3IyKCk7CiAgdmFyIGRvbGx5RGVsdGEgPSBuZXcgVmVjdG9yMigpOwoKICBmdW5jdGlvbiBnZXRBdXRvUm90YXRpb25BbmdsZSgpIHsKICAgIHJldHVybiAyICogTWF0aC5QSSAvIDYwIC8gNjAgKiBzY29wZS5hdXRvUm90YXRlU3BlZWQ7CiAgfQoKICBmdW5jdGlvbiBnZXRab29tU2NhbGUoKSB7CiAgICByZXR1cm4gTWF0aC5wb3coMC45NSwgc2NvcGUuem9vbVNwZWVkKTsKICB9CgogIGZ1bmN0aW9uIHJvdGF0ZUxlZnQoYW5nbGUpIHsKICAgIHNwaGVyaWNhbERlbHRhLnRoZXRhIC09IGFuZ2xlOwogIH0KCiAgZnVuY3Rpb24gcm90YXRlVXAoYW5nbGUpIHsKICAgIHNwaGVyaWNhbERlbHRhLnBoaSAtPSBhbmdsZTsKICB9CgogIHZhciBwYW5MZWZ0ID0gZnVuY3Rpb24gKCkgewogICAgdmFyIHYgPSBuZXcgVmVjdG9yMygpOwogICAgcmV0dXJuIGZ1bmN0aW9uIHBhbkxlZnQoZGlzdGFuY2UsIG9iamVjdE1hdHJpeCkgewogICAgICB2LnNldEZyb21NYXRyaXhDb2x1bW4ob2JqZWN0TWF0cml4LCAwKTsgLy8gZ2V0IFggY29sdW1uIG9mIG9iamVjdE1hdHJpeAoKICAgICAgdi5tdWx0aXBseVNjYWxhcigtZGlzdGFuY2UpOwogICAgICBwYW5PZmZzZXQuYWRkKHYpOwogICAgfTsKICB9KCk7CgogIHZhciBwYW5VcCA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciB2ID0gbmV3IFZlY3RvcjMoKTsKICAgIHJldHVybiBmdW5jdGlvbiBwYW5VcChkaXN0YW5jZSwgb2JqZWN0TWF0cml4KSB7CiAgICAgIGlmIChzY29wZS5zY3JlZW5TcGFjZVBhbm5pbmcgPT09IHRydWUpIHsKICAgICAgICB2LnNldEZyb21NYXRyaXhDb2x1bW4ob2JqZWN0TWF0cml4LCAxKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2LnNldEZyb21NYXRyaXhDb2x1bW4ob2JqZWN0TWF0cml4LCAwKTsKICAgICAgICB2LmNyb3NzVmVjdG9ycyhzY29wZS5vYmplY3QudXAsIHYpOwogICAgICB9CgogICAgICB2Lm11bHRpcGx5U2NhbGFyKGRpc3RhbmNlKTsKICAgICAgcGFuT2Zmc2V0LmFkZCh2KTsKICAgIH07CiAgfSgpOyAvLyBkZWx0YVggYW5kIGRlbHRhWSBhcmUgaW4gcGl4ZWxzOyByaWdodCBhbmQgZG93biBhcmUgcG9zaXRpdmUKCgogIHZhciBwYW4gPSBmdW5jdGlvbiAoKSB7CiAgICB2YXIgb2Zmc2V0ID0gbmV3IFZlY3RvcjMoKTsKICAgIHJldHVybiBmdW5jdGlvbiBwYW4oZGVsdGFYLCBkZWx0YVkpIHsKICAgICAgdmFyIGVsZW1lbnQgPSBzY29wZS5kb21FbGVtZW50OwoKICAgICAgaWYgKHNjb3BlLm9iamVjdC5pc1BlcnNwZWN0aXZlQ2FtZXJhKSB7CiAgICAgICAgLy8gcGVyc3BlY3RpdmUKICAgICAgICB2YXIgcG9zaXRpb24gPSBzY29wZS5vYmplY3QucG9zaXRpb247CiAgICAgICAgb2Zmc2V0LmNvcHkocG9zaXRpb24pLnN1YihzY29wZS50YXJnZXQpOwogICAgICAgIHZhciB0YXJnZXREaXN0YW5jZSA9IG9mZnNldC5sZW5ndGgoKTsgLy8gaGFsZiBvZiB0aGUgZm92IGlzIGNlbnRlciB0byB0b3Agb2Ygc2NyZWVuCgogICAgICAgIHRhcmdldERpc3RhbmNlICo9IE1hdGgudGFuKHNjb3BlLm9iamVjdC5mb3YgLyAyICogTWF0aC5QSSAvIDE4MC4wKTsgLy8gd2UgdXNlIG9ubHkgY2xpZW50SGVpZ2h0IGhlcmUgc28gYXNwZWN0IHJhdGlvIGRvZXMgbm90IGRpc3RvcnQgc3BlZWQKCiAgICAgICAgcGFuTGVmdCgyICogZGVsdGFYICogdGFyZ2V0RGlzdGFuY2UgLyBlbGVtZW50LmNsaWVudEhlaWdodCwgc2NvcGUub2JqZWN0Lm1hdHJpeCk7CiAgICAgICAgcGFuVXAoMiAqIGRlbHRhWSAqIHRhcmdldERpc3RhbmNlIC8gZWxlbWVudC5jbGllbnRIZWlnaHQsIHNjb3BlLm9iamVjdC5tYXRyaXgpOwogICAgICB9IGVsc2UgaWYgKHNjb3BlLm9iamVjdC5pc09ydGhvZ3JhcGhpY0NhbWVyYSkgewogICAgICAgIC8vIG9ydGhvZ3JhcGhpYwogICAgICAgIHBhbkxlZnQoZGVsdGFYICogKHNjb3BlLm9iamVjdC5yaWdodCAtIHNjb3BlLm9iamVjdC5sZWZ0KSAvIHNjb3BlLm9iamVjdC56b29tIC8gZWxlbWVudC5jbGllbnRXaWR0aCwgc2NvcGUub2JqZWN0Lm1hdHJpeCk7CiAgICAgICAgcGFuVXAoZGVsdGFZICogKHNjb3BlLm9iamVjdC50b3AgLSBzY29wZS5vYmplY3QuYm90dG9tKSAvIHNjb3BlLm9iamVjdC56b29tIC8gZWxlbWVudC5jbGllbnRIZWlnaHQsIHNjb3BlLm9iamVjdC5tYXRyaXgpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIGNhbWVyYSBuZWl0aGVyIG9ydGhvZ3JhcGhpYyBub3IgcGVyc3BlY3RpdmUKICAgICAgICBjb25zb2xlLndhcm4oJ1dBUk5JTkc6IE9yYml0Q29udHJvbHMuanMgZW5jb3VudGVyZWQgYW4gdW5rbm93biBjYW1lcmEgdHlwZSAtIHBhbiBkaXNhYmxlZC4nKTsKICAgICAgICBzY29wZS5lbmFibGVQYW4gPSBmYWxzZTsKICAgICAgfQogICAgfTsKICB9KCk7CgogIGZ1bmN0aW9uIGRvbGx5SW4oZG9sbHlTY2FsZSkgewogICAgaWYgKHNjb3BlLm9iamVjdC5pc1BlcnNwZWN0aXZlQ2FtZXJhKSB7CiAgICAgIHNjYWxlIC89IGRvbGx5U2NhbGU7CiAgICB9IGVsc2UgaWYgKHNjb3BlLm9iamVjdC5pc09ydGhvZ3JhcGhpY0NhbWVyYSkgewogICAgICBzY29wZS5vYmplY3Quem9vbSA9IE1hdGgubWF4KHNjb3BlLm1pblpvb20sIE1hdGgubWluKHNjb3BlLm1heFpvb20sIHNjb3BlLm9iamVjdC56b29tICogZG9sbHlTY2FsZSkpOwogICAgICBzY29wZS5vYmplY3QudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpOwogICAgICB6b29tQ2hhbmdlZCA9IHRydWU7CiAgICB9IGVsc2UgewogICAgICBjb25zb2xlLndhcm4oJ1dBUk5JTkc6IE9yYml0Q29udHJvbHMuanMgZW5jb3VudGVyZWQgYW4gdW5rbm93biBjYW1lcmEgdHlwZSAtIGRvbGx5L3pvb20gZGlzYWJsZWQuJyk7CiAgICAgIHNjb3BlLmVuYWJsZVpvb20gPSBmYWxzZTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGRvbGx5T3V0KGRvbGx5U2NhbGUpIHsKICAgIGlmIChzY29wZS5vYmplY3QuaXNQZXJzcGVjdGl2ZUNhbWVyYSkgewogICAgICBzY2FsZSAqPSBkb2xseVNjYWxlOwogICAgfSBlbHNlIGlmIChzY29wZS5vYmplY3QuaXNPcnRob2dyYXBoaWNDYW1lcmEpIHsKICAgICAgc2NvcGUub2JqZWN0Lnpvb20gPSBNYXRoLm1heChzY29wZS5taW5ab29tLCBNYXRoLm1pbihzY29wZS5tYXhab29tLCBzY29wZS5vYmplY3Quem9vbSAvIGRvbGx5U2NhbGUpKTsKICAgICAgc2NvcGUub2JqZWN0LnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTsKICAgICAgem9vbUNoYW5nZWQgPSB0cnVlOwogICAgfSBlbHNlIHsKICAgICAgY29uc29sZS53YXJuKCdXQVJOSU5HOiBPcmJpdENvbnRyb2xzLmpzIGVuY291bnRlcmVkIGFuIHVua25vd24gY2FtZXJhIHR5cGUgLSBkb2xseS96b29tIGRpc2FibGVkLicpOwogICAgICBzY29wZS5lbmFibGVab29tID0gZmFsc2U7CiAgICB9CiAgfSAvLwogIC8vIGV2ZW50IGNhbGxiYWNrcyAtIHVwZGF0ZSB0aGUgb2JqZWN0IHN0YXRlCiAgLy8KCgogIGZ1bmN0aW9uIGhhbmRsZU1vdXNlRG93blJvdGF0ZShldmVudCkgewogICAgcm90YXRlU3RhcnQuc2V0KGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFkpOwogIH0KCiAgZnVuY3Rpb24gaGFuZGxlTW91c2VEb3duRG9sbHkoZXZlbnQpIHsKICAgIGRvbGx5U3RhcnQuc2V0KGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFkpOwogIH0KCiAgZnVuY3Rpb24gaGFuZGxlTW91c2VEb3duUGFuKGV2ZW50KSB7CiAgICBwYW5TdGFydC5zZXQoZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSk7CiAgfQoKICBmdW5jdGlvbiBoYW5kbGVNb3VzZU1vdmVSb3RhdGUoZXZlbnQpIHsKICAgIHJvdGF0ZUVuZC5zZXQoZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSk7CiAgICByb3RhdGVEZWx0YS5zdWJWZWN0b3JzKHJvdGF0ZUVuZCwgcm90YXRlU3RhcnQpLm11bHRpcGx5U2NhbGFyKHNjb3BlLnJvdGF0ZVNwZWVkKTsKICAgIHZhciBlbGVtZW50ID0gc2NvcGUuZG9tRWxlbWVudDsKICAgIHJvdGF0ZUxlZnQoMiAqIE1hdGguUEkgKiByb3RhdGVEZWx0YS54IC8gZWxlbWVudC5jbGllbnRIZWlnaHQpOyAvLyB5ZXMsIGhlaWdodAoKICAgIHJvdGF0ZVVwKDIgKiBNYXRoLlBJICogcm90YXRlRGVsdGEueSAvIGVsZW1lbnQuY2xpZW50SGVpZ2h0KTsKICAgIHJvdGF0ZVN0YXJ0LmNvcHkocm90YXRlRW5kKTsKICAgIHNjb3BlLnVwZGF0ZSgpOwogIH0KCiAgZnVuY3Rpb24gaGFuZGxlTW91c2VNb3ZlRG9sbHkoZXZlbnQpIHsKICAgIGRvbGx5RW5kLnNldChldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZKTsKICAgIGRvbGx5RGVsdGEuc3ViVmVjdG9ycyhkb2xseUVuZCwgZG9sbHlTdGFydCk7CgogICAgaWYgKGRvbGx5RGVsdGEueSA+IDApIHsKICAgICAgZG9sbHlJbihnZXRab29tU2NhbGUoKSk7CiAgICB9IGVsc2UgaWYgKGRvbGx5RGVsdGEueSA8IDApIHsKICAgICAgZG9sbHlPdXQoZ2V0Wm9vbVNjYWxlKCkpOwogICAgfQoKICAgIGRvbGx5U3RhcnQuY29weShkb2xseUVuZCk7CiAgICBzY29wZS51cGRhdGUoKTsKICB9CgogIGZ1bmN0aW9uIGhhbmRsZU1vdXNlTW92ZVBhbihldmVudCkgewogICAgcGFuRW5kLnNldChldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZKTsKICAgIHBhbkRlbHRhLnN1YlZlY3RvcnMocGFuRW5kLCBwYW5TdGFydCkubXVsdGlwbHlTY2FsYXIoc2NvcGUucGFuU3BlZWQpOwogICAgcGFuKHBhbkRlbHRhLngsIHBhbkRlbHRhLnkpOwogICAgcGFuU3RhcnQuY29weShwYW5FbmQpOwogICAgc2NvcGUudXBkYXRlKCk7CiAgfQoKICBmdW5jdGlvbiBoYW5kbGVNb3VzZVVwKCkKICAvKmV2ZW50Ki8KICB7Ly8gbm8tb3AKICB9CgogIGZ1bmN0aW9uIGhhbmRsZU1vdXNlV2hlZWwoZXZlbnQpIHsKICAgIGlmIChldmVudC5kZWx0YVkgPCAwKSB7CiAgICAgIGRvbGx5T3V0KGdldFpvb21TY2FsZSgpKTsKICAgIH0gZWxzZSBpZiAoZXZlbnQuZGVsdGFZID4gMCkgewogICAgICBkb2xseUluKGdldFpvb21TY2FsZSgpKTsKICAgIH0KCiAgICBzY29wZS51cGRhdGUoKTsKICB9CgogIGZ1bmN0aW9uIGhhbmRsZUtleURvd24oZXZlbnQpIHsKICAgIHZhciBuZWVkc1VwZGF0ZSA9IGZhbHNlOwoKICAgIHN3aXRjaCAoZXZlbnQua2V5Q29kZSkgewogICAgICBjYXNlIHNjb3BlLmtleXMuVVA6CiAgICAgICAgcGFuKDAsIHNjb3BlLmtleVBhblNwZWVkKTsKICAgICAgICBuZWVkc1VwZGF0ZSA9IHRydWU7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIHNjb3BlLmtleXMuQk9UVE9NOgogICAgICAgIHBhbigwLCAtc2NvcGUua2V5UGFuU3BlZWQpOwogICAgICAgIG5lZWRzVXBkYXRlID0gdHJ1ZTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2Ugc2NvcGUua2V5cy5MRUZUOgogICAgICAgIHBhbihzY29wZS5rZXlQYW5TcGVlZCwgMCk7CiAgICAgICAgbmVlZHNVcGRhdGUgPSB0cnVlOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSBzY29wZS5rZXlzLlJJR0hUOgogICAgICAgIHBhbigtc2NvcGUua2V5UGFuU3BlZWQsIDApOwogICAgICAgIG5lZWRzVXBkYXRlID0gdHJ1ZTsKICAgICAgICBicmVhazsKICAgIH0KCiAgICBpZiAobmVlZHNVcGRhdGUpIHsKICAgICAgLy8gcHJldmVudCB0aGUgYnJvd3NlciBmcm9tIHNjcm9sbGluZyBvbiBjdXJzb3Iga2V5cwogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBzY29wZS51cGRhdGUoKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGhhbmRsZVRvdWNoU3RhcnRSb3RhdGUoZXZlbnQpIHsKICAgIGlmIChldmVudC50b3VjaGVzLmxlbmd0aCA9PSAxKSB7CiAgICAgIHJvdGF0ZVN0YXJ0LnNldChldmVudC50b3VjaGVzWzBdLnBhZ2VYLCBldmVudC50b3VjaGVzWzBdLnBhZ2VZKTsKICAgIH0gZWxzZSB7CiAgICAgIHZhciB4ID0gMC41ICogKGV2ZW50LnRvdWNoZXNbMF0ucGFnZVggKyBldmVudC50b3VjaGVzWzFdLnBhZ2VYKTsKICAgICAgdmFyIHkgPSAwLjUgKiAoZXZlbnQudG91Y2hlc1swXS5wYWdlWSArIGV2ZW50LnRvdWNoZXNbMV0ucGFnZVkpOwogICAgICByb3RhdGVTdGFydC5zZXQoeCwgeSk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBoYW5kbGVUb3VjaFN0YXJ0UGFuKGV2ZW50KSB7CiAgICBpZiAoZXZlbnQudG91Y2hlcy5sZW5ndGggPT0gMSkgewogICAgICBwYW5TdGFydC5zZXQoZXZlbnQudG91Y2hlc1swXS5wYWdlWCwgZXZlbnQudG91Y2hlc1swXS5wYWdlWSk7CiAgICB9IGVsc2UgewogICAgICB2YXIgeCA9IDAuNSAqIChldmVudC50b3VjaGVzWzBdLnBhZ2VYICsgZXZlbnQudG91Y2hlc1sxXS5wYWdlWCk7CiAgICAgIHZhciB5ID0gMC41ICogKGV2ZW50LnRvdWNoZXNbMF0ucGFnZVkgKyBldmVudC50b3VjaGVzWzFdLnBhZ2VZKTsKICAgICAgcGFuU3RhcnQuc2V0KHgsIHkpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gaGFuZGxlVG91Y2hTdGFydERvbGx5KGV2ZW50KSB7CiAgICB2YXIgZHggPSBldmVudC50b3VjaGVzWzBdLnBhZ2VYIC0gZXZlbnQudG91Y2hlc1sxXS5wYWdlWDsKICAgIHZhciBkeSA9IGV2ZW50LnRvdWNoZXNbMF0ucGFnZVkgLSBldmVudC50b3VjaGVzWzFdLnBhZ2VZOwogICAgdmFyIGRpc3RhbmNlID0gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KTsKICAgIGRvbGx5U3RhcnQuc2V0KDAsIGRpc3RhbmNlKTsKICB9CgogIGZ1bmN0aW9uIGhhbmRsZVRvdWNoU3RhcnREb2xseVBhbihldmVudCkgewogICAgaWYgKHNjb3BlLmVuYWJsZVpvb20pIGhhbmRsZVRvdWNoU3RhcnREb2xseShldmVudCk7CiAgICBpZiAoc2NvcGUuZW5hYmxlUGFuKSBoYW5kbGVUb3VjaFN0YXJ0UGFuKGV2ZW50KTsKICB9CgogIGZ1bmN0aW9uIGhhbmRsZVRvdWNoU3RhcnREb2xseVJvdGF0ZShldmVudCkgewogICAgaWYgKHNjb3BlLmVuYWJsZVpvb20pIGhhbmRsZVRvdWNoU3RhcnREb2xseShldmVudCk7CiAgICBpZiAoc2NvcGUuZW5hYmxlUm90YXRlKSBoYW5kbGVUb3VjaFN0YXJ0Um90YXRlKGV2ZW50KTsKICB9CgogIGZ1bmN0aW9uIGhhbmRsZVRvdWNoTW92ZVJvdGF0ZShldmVudCkgewogICAgaWYgKGV2ZW50LnRvdWNoZXMubGVuZ3RoID09IDEpIHsKICAgICAgcm90YXRlRW5kLnNldChldmVudC50b3VjaGVzWzBdLnBhZ2VYLCBldmVudC50b3VjaGVzWzBdLnBhZ2VZKTsKICAgIH0gZWxzZSB7CiAgICAgIHZhciB4ID0gMC41ICogKGV2ZW50LnRvdWNoZXNbMF0ucGFnZVggKyBldmVudC50b3VjaGVzWzFdLnBhZ2VYKTsKICAgICAgdmFyIHkgPSAwLjUgKiAoZXZlbnQudG91Y2hlc1swXS5wYWdlWSArIGV2ZW50LnRvdWNoZXNbMV0ucGFnZVkpOwogICAgICByb3RhdGVFbmQuc2V0KHgsIHkpOwogICAgfQoKICAgIHJvdGF0ZURlbHRhLnN1YlZlY3RvcnMocm90YXRlRW5kLCByb3RhdGVTdGFydCkubXVsdGlwbHlTY2FsYXIoc2NvcGUucm90YXRlU3BlZWQpOwogICAgdmFyIGVsZW1lbnQgPSBzY29wZS5kb21FbGVtZW50OwogICAgcm90YXRlTGVmdCgyICogTWF0aC5QSSAqIHJvdGF0ZURlbHRhLnggLyBlbGVtZW50LmNsaWVudEhlaWdodCk7IC8vIHllcywgaGVpZ2h0CgogICAgcm90YXRlVXAoMiAqIE1hdGguUEkgKiByb3RhdGVEZWx0YS55IC8gZWxlbWVudC5jbGllbnRIZWlnaHQpOwogICAgcm90YXRlU3RhcnQuY29weShyb3RhdGVFbmQpOwogIH0KCiAgZnVuY3Rpb24gaGFuZGxlVG91Y2hNb3ZlUGFuKGV2ZW50KSB7CiAgICBpZiAoZXZlbnQudG91Y2hlcy5sZW5ndGggPT0gMSkgewogICAgICBwYW5FbmQuc2V0KGV2ZW50LnRvdWNoZXNbMF0ucGFnZVgsIGV2ZW50LnRvdWNoZXNbMF0ucGFnZVkpOwogICAgfSBlbHNlIHsKICAgICAgdmFyIHggPSAwLjUgKiAoZXZlbnQudG91Y2hlc1swXS5wYWdlWCArIGV2ZW50LnRvdWNoZXNbMV0ucGFnZVgpOwogICAgICB2YXIgeSA9IDAuNSAqIChldmVudC50b3VjaGVzWzBdLnBhZ2VZICsgZXZlbnQudG91Y2hlc1sxXS5wYWdlWSk7CiAgICAgIHBhbkVuZC5zZXQoeCwgeSk7CiAgICB9CgogICAgcGFuRGVsdGEuc3ViVmVjdG9ycyhwYW5FbmQsIHBhblN0YXJ0KS5tdWx0aXBseVNjYWxhcihzY29wZS5wYW5TcGVlZCk7CiAgICBwYW4ocGFuRGVsdGEueCwgcGFuRGVsdGEueSk7CiAgICBwYW5TdGFydC5jb3B5KHBhbkVuZCk7CiAgfQoKICBmdW5jdGlvbiBoYW5kbGVUb3VjaE1vdmVEb2xseShldmVudCkgewogICAgdmFyIGR4ID0gZXZlbnQudG91Y2hlc1swXS5wYWdlWCAtIGV2ZW50LnRvdWNoZXNbMV0ucGFnZVg7CiAgICB2YXIgZHkgPSBldmVudC50b3VjaGVzWzBdLnBhZ2VZIC0gZXZlbnQudG91Y2hlc1sxXS5wYWdlWTsKICAgIHZhciBkaXN0YW5jZSA9IE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSk7CiAgICBkb2xseUVuZC5zZXQoMCwgZGlzdGFuY2UpOwogICAgZG9sbHlEZWx0YS5zZXQoMCwgTWF0aC5wb3coZG9sbHlFbmQueSAvIGRvbGx5U3RhcnQueSwgc2NvcGUuem9vbVNwZWVkKSk7CiAgICBkb2xseUluKGRvbGx5RGVsdGEueSk7CiAgICBkb2xseVN0YXJ0LmNvcHkoZG9sbHlFbmQpOwogIH0KCiAgZnVuY3Rpb24gaGFuZGxlVG91Y2hNb3ZlRG9sbHlQYW4oZXZlbnQpIHsKICAgIGlmIChzY29wZS5lbmFibGVab29tKSBoYW5kbGVUb3VjaE1vdmVEb2xseShldmVudCk7CiAgICBpZiAoc2NvcGUuZW5hYmxlUGFuKSBoYW5kbGVUb3VjaE1vdmVQYW4oZXZlbnQpOwogIH0KCiAgZnVuY3Rpb24gaGFuZGxlVG91Y2hNb3ZlRG9sbHlSb3RhdGUoZXZlbnQpIHsKICAgIGlmIChzY29wZS5lbmFibGVab29tKSBoYW5kbGVUb3VjaE1vdmVEb2xseShldmVudCk7CiAgICBpZiAoc2NvcGUuZW5hYmxlUm90YXRlKSBoYW5kbGVUb3VjaE1vdmVSb3RhdGUoZXZlbnQpOwogIH0KCiAgZnVuY3Rpb24gaGFuZGxlVG91Y2hFbmQoKQogIC8qZXZlbnQqLwogIHt9IC8vIG5vLW9wCiAgLy8KICAvLyBldmVudCBoYW5kbGVycyAtIEZTTTogbGlzdGVuIGZvciBldmVudHMgYW5kIHJlc2V0IHN0YXRlCiAgLy8KCgogIGZ1bmN0aW9uIG9uTW91c2VEb3duKGV2ZW50KSB7CiAgICBpZiAoc2NvcGUuZW5hYmxlZCA9PT0gZmFsc2UpIHJldHVybjsgLy8gUHJldmVudCB0aGUgYnJvd3NlciBmcm9tIHNjcm9sbGluZy4KCiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyAvLyBNYW51YWxseSBzZXQgdGhlIGZvY3VzIHNpbmNlIGNhbGxpbmcgcHJldmVudERlZmF1bHQgYWJvdmUKICAgIC8vIHByZXZlbnRzIHRoZSBicm93c2VyIGZyb20gc2V0dGluZyBpdCBhdXRvbWF0aWNhbGx5LgoKICAgIHNjb3BlLmRvbUVsZW1lbnQuZm9jdXMgPyBzY29wZS5kb21FbGVtZW50LmZvY3VzKCkgOiB3aW5kb3cuZm9jdXMoKTsKICAgIHZhciBtb3VzZUFjdGlvbjsKCiAgICBzd2l0Y2ggKGV2ZW50LmJ1dHRvbikgewogICAgICBjYXNlIDA6CiAgICAgICAgbW91c2VBY3Rpb24gPSBzY29wZS5tb3VzZUJ1dHRvbnMuTEVGVDsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgMToKICAgICAgICBtb3VzZUFjdGlvbiA9IHNjb3BlLm1vdXNlQnV0dG9ucy5NSURETEU7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDI6CiAgICAgICAgbW91c2VBY3Rpb24gPSBzY29wZS5tb3VzZUJ1dHRvbnMuUklHSFQ7CiAgICAgICAgYnJlYWs7CgogICAgICBkZWZhdWx0OgogICAgICAgIG1vdXNlQWN0aW9uID0gLTE7CiAgICB9CgogICAgc3dpdGNoIChtb3VzZUFjdGlvbikgewogICAgICBjYXNlIE1PVVNFLkRPTExZOgogICAgICAgIGlmIChzY29wZS5lbmFibGVab29tID09PSBmYWxzZSkgcmV0dXJuOwogICAgICAgIGhhbmRsZU1vdXNlRG93bkRvbGx5KGV2ZW50KTsKICAgICAgICBzdGF0ZSA9IFNUQVRFLkRPTExZOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSBNT1VTRS5ST1RBVEU6CiAgICAgICAgaWYgKGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQubWV0YUtleSB8fCBldmVudC5zaGlmdEtleSkgewogICAgICAgICAgaWYgKHNjb3BlLmVuYWJsZVBhbiA9PT0gZmFsc2UpIHJldHVybjsKICAgICAgICAgIGhhbmRsZU1vdXNlRG93blBhbihldmVudCk7CiAgICAgICAgICBzdGF0ZSA9IFNUQVRFLlBBTjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKHNjb3BlLmVuYWJsZVJvdGF0ZSA9PT0gZmFsc2UpIHJldHVybjsKICAgICAgICAgIGhhbmRsZU1vdXNlRG93blJvdGF0ZShldmVudCk7CiAgICAgICAgICBzdGF0ZSA9IFNUQVRFLlJPVEFURTsKICAgICAgICB9CgogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSBNT1VTRS5QQU46CiAgICAgICAgaWYgKGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQubWV0YUtleSB8fCBldmVudC5zaGlmdEtleSkgewogICAgICAgICAgaWYgKHNjb3BlLmVuYWJsZVJvdGF0ZSA9PT0gZmFsc2UpIHJldHVybjsKICAgICAgICAgIGhhbmRsZU1vdXNlRG93blJvdGF0ZShldmVudCk7CiAgICAgICAgICBzdGF0ZSA9IFNUQVRFLlJPVEFURTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKHNjb3BlLmVuYWJsZVBhbiA9PT0gZmFsc2UpIHJldHVybjsKICAgICAgICAgIGhhbmRsZU1vdXNlRG93blBhbihldmVudCk7CiAgICAgICAgICBzdGF0ZSA9IFNUQVRFLlBBTjsKICAgICAgICB9CgogICAgICAgIGJyZWFrOwoKICAgICAgZGVmYXVsdDoKICAgICAgICBzdGF0ZSA9IFNUQVRFLk5PTkU7CiAgICB9CgogICAgaWYgKHN0YXRlICE9PSBTVEFURS5OT05FKSB7CiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIG9uTW91c2VNb3ZlLCBmYWxzZSk7CiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBvbk1vdXNlVXAsIGZhbHNlKTsKICAgICAgc2NvcGUuZGlzcGF0Y2hFdmVudChzdGFydEV2ZW50KTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIG9uTW91c2VNb3ZlKGV2ZW50KSB7CiAgICBpZiAoc2NvcGUuZW5hYmxlZCA9PT0gZmFsc2UpIHJldHVybjsKICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgogICAgc3dpdGNoIChzdGF0ZSkgewogICAgICBjYXNlIFNUQVRFLlJPVEFURToKICAgICAgICBpZiAoc2NvcGUuZW5hYmxlUm90YXRlID09PSBmYWxzZSkgcmV0dXJuOwogICAgICAgIGhhbmRsZU1vdXNlTW92ZVJvdGF0ZShldmVudCk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIFNUQVRFLkRPTExZOgogICAgICAgIGlmIChzY29wZS5lbmFibGVab29tID09PSBmYWxzZSkgcmV0dXJuOwogICAgICAgIGhhbmRsZU1vdXNlTW92ZURvbGx5KGV2ZW50KTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgU1RBVEUuUEFOOgogICAgICAgIGlmIChzY29wZS5lbmFibGVQYW4gPT09IGZhbHNlKSByZXR1cm47CiAgICAgICAgaGFuZGxlTW91c2VNb3ZlUGFuKGV2ZW50KTsKICAgICAgICBicmVhazsKICAgIH0KICB9CgogIGZ1bmN0aW9uIG9uTW91c2VVcChldmVudCkgewogICAgaWYgKHNjb3BlLmVuYWJsZWQgPT09IGZhbHNlKSByZXR1cm47CiAgICBoYW5kbGVNb3VzZVVwKGV2ZW50KTsKICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIG9uTW91c2VNb3ZlLCBmYWxzZSk7CiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgb25Nb3VzZVVwLCBmYWxzZSk7CiAgICBzY29wZS5kaXNwYXRjaEV2ZW50KGVuZEV2ZW50KTsKICAgIHN0YXRlID0gU1RBVEUuTk9ORTsKICB9CgogIGZ1bmN0aW9uIG9uTW91c2VXaGVlbChldmVudCkgewogICAgaWYgKHNjb3BlLmVuYWJsZWQgPT09IGZhbHNlIHx8IHNjb3BlLmVuYWJsZVpvb20gPT09IGZhbHNlIHx8IHN0YXRlICE9PSBTVEFURS5OT05FICYmIHN0YXRlICE9PSBTVEFURS5ST1RBVEUpIHJldHVybjsKICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgIHNjb3BlLmRpc3BhdGNoRXZlbnQoc3RhcnRFdmVudCk7CiAgICBoYW5kbGVNb3VzZVdoZWVsKGV2ZW50KTsKICAgIHNjb3BlLmRpc3BhdGNoRXZlbnQoZW5kRXZlbnQpOwogIH0KCiAgZnVuY3Rpb24gb25LZXlEb3duKGV2ZW50KSB7CiAgICBpZiAoc2NvcGUuZW5hYmxlZCA9PT0gZmFsc2UgfHwgc2NvcGUuZW5hYmxlS2V5cyA9PT0gZmFsc2UgfHwgc2NvcGUuZW5hYmxlUGFuID09PSBmYWxzZSkgcmV0dXJuOwogICAgaGFuZGxlS2V5RG93bihldmVudCk7CiAgfQoKICBmdW5jdGlvbiBvblRvdWNoU3RhcnQoZXZlbnQpIHsKICAgIGlmIChzY29wZS5lbmFibGVkID09PSBmYWxzZSkgcmV0dXJuOwogICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKCiAgICBzd2l0Y2ggKGV2ZW50LnRvdWNoZXMubGVuZ3RoKSB7CiAgICAgIGNhc2UgMToKICAgICAgICBzd2l0Y2ggKHNjb3BlLnRvdWNoZXMuT05FKSB7CiAgICAgICAgICBjYXNlIFRPVUNILlJPVEFURToKICAgICAgICAgICAgaWYgKHNjb3BlLmVuYWJsZVJvdGF0ZSA9PT0gZmFsc2UpIHJldHVybjsKICAgICAgICAgICAgaGFuZGxlVG91Y2hTdGFydFJvdGF0ZShldmVudCk7CiAgICAgICAgICAgIHN0YXRlID0gU1RBVEUuVE9VQ0hfUk9UQVRFOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIFRPVUNILlBBTjoKICAgICAgICAgICAgaWYgKHNjb3BlLmVuYWJsZVBhbiA9PT0gZmFsc2UpIHJldHVybjsKICAgICAgICAgICAgaGFuZGxlVG91Y2hTdGFydFBhbihldmVudCk7CiAgICAgICAgICAgIHN0YXRlID0gU1RBVEUuVE9VQ0hfUEFOOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICBzdGF0ZSA9IFNUQVRFLk5PTkU7CiAgICAgICAgfQoKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgMjoKICAgICAgICBzd2l0Y2ggKHNjb3BlLnRvdWNoZXMuVFdPKSB7CiAgICAgICAgICBjYXNlIFRPVUNILkRPTExZX1BBTjoKICAgICAgICAgICAgaWYgKHNjb3BlLmVuYWJsZVpvb20gPT09IGZhbHNlICYmIHNjb3BlLmVuYWJsZVBhbiA9PT0gZmFsc2UpIHJldHVybjsKICAgICAgICAgICAgaGFuZGxlVG91Y2hTdGFydERvbGx5UGFuKGV2ZW50KTsKICAgICAgICAgICAgc3RhdGUgPSBTVEFURS5UT1VDSF9ET0xMWV9QQU47CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgVE9VQ0guRE9MTFlfUk9UQVRFOgogICAgICAgICAgICBpZiAoc2NvcGUuZW5hYmxlWm9vbSA9PT0gZmFsc2UgJiYgc2NvcGUuZW5hYmxlUm90YXRlID09PSBmYWxzZSkgcmV0dXJuOwogICAgICAgICAgICBoYW5kbGVUb3VjaFN0YXJ0RG9sbHlSb3RhdGUoZXZlbnQpOwogICAgICAgICAgICBzdGF0ZSA9IFNUQVRFLlRPVUNIX0RPTExZX1JPVEFURTsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgc3RhdGUgPSBTVEFURS5OT05FOwogICAgICAgIH0KCiAgICAgICAgYnJlYWs7CgogICAgICBkZWZhdWx0OgogICAgICAgIHN0YXRlID0gU1RBVEUuTk9ORTsKICAgIH0KCiAgICBpZiAoc3RhdGUgIT09IFNUQVRFLk5PTkUpIHsKICAgICAgc2NvcGUuZGlzcGF0Y2hFdmVudChzdGFydEV2ZW50KTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIG9uVG91Y2hNb3ZlKGV2ZW50KSB7CiAgICBpZiAoc2NvcGUuZW5hYmxlZCA9PT0gZmFsc2UpIHJldHVybjsKICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKCiAgICBzd2l0Y2ggKHN0YXRlKSB7CiAgICAgIGNhc2UgU1RBVEUuVE9VQ0hfUk9UQVRFOgogICAgICAgIGlmIChzY29wZS5lbmFibGVSb3RhdGUgPT09IGZhbHNlKSByZXR1cm47CiAgICAgICAgaGFuZGxlVG91Y2hNb3ZlUm90YXRlKGV2ZW50KTsKICAgICAgICBzY29wZS51cGRhdGUoKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgU1RBVEUuVE9VQ0hfUEFOOgogICAgICAgIGlmIChzY29wZS5lbmFibGVQYW4gPT09IGZhbHNlKSByZXR1cm47CiAgICAgICAgaGFuZGxlVG91Y2hNb3ZlUGFuKGV2ZW50KTsKICAgICAgICBzY29wZS51cGRhdGUoKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgU1RBVEUuVE9VQ0hfRE9MTFlfUEFOOgogICAgICAgIGlmIChzY29wZS5lbmFibGVab29tID09PSBmYWxzZSAmJiBzY29wZS5lbmFibGVQYW4gPT09IGZhbHNlKSByZXR1cm47CiAgICAgICAgaGFuZGxlVG91Y2hNb3ZlRG9sbHlQYW4oZXZlbnQpOwogICAgICAgIHNjb3BlLnVwZGF0ZSgpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSBTVEFURS5UT1VDSF9ET0xMWV9ST1RBVEU6CiAgICAgICAgaWYgKHNjb3BlLmVuYWJsZVpvb20gPT09IGZhbHNlICYmIHNjb3BlLmVuYWJsZVJvdGF0ZSA9PT0gZmFsc2UpIHJldHVybjsKICAgICAgICBoYW5kbGVUb3VjaE1vdmVEb2xseVJvdGF0ZShldmVudCk7CiAgICAgICAgc2NvcGUudXBkYXRlKCk7CiAgICAgICAgYnJlYWs7CgogICAgICBkZWZhdWx0OgogICAgICAgIHN0YXRlID0gU1RBVEUuTk9ORTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIG9uVG91Y2hFbmQoZXZlbnQpIHsKICAgIGlmIChzY29wZS5lbmFibGVkID09PSBmYWxzZSkgcmV0dXJuOwogICAgaGFuZGxlVG91Y2hFbmQoZXZlbnQpOwogICAgc2NvcGUuZGlzcGF0Y2hFdmVudChlbmRFdmVudCk7CiAgICBzdGF0ZSA9IFNUQVRFLk5PTkU7CiAgfQoKICBmdW5jdGlvbiBvbkNvbnRleHRNZW51KGV2ZW50KSB7CiAgICBpZiAoc2NvcGUuZW5hYmxlZCA9PT0gZmFsc2UpIHJldHVybjsKICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgfSAvLwoKCiAgc2NvcGUuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIG9uQ29udGV4dE1lbnUsIGZhbHNlKTsKICBzY29wZS5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG9uTW91c2VEb3duLCBmYWxzZSk7CiAgc2NvcGUuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd3aGVlbCcsIG9uTW91c2VXaGVlbCwgZmFsc2UpOwogIHNjb3BlLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIG9uVG91Y2hTdGFydCwgZmFsc2UpOwogIHNjb3BlLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBvblRvdWNoRW5kLCBmYWxzZSk7CiAgc2NvcGUuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCBvblRvdWNoTW92ZSwgZmFsc2UpOwogIHNjb3BlLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIG9uS2V5RG93biwgZmFsc2UpOyAvLyBtYWtlIHN1cmUgZWxlbWVudCBjYW4gcmVjZWl2ZSBrZXlzLgoKICBpZiAoc2NvcGUuZG9tRWxlbWVudC50YWJJbmRleCA9PT0gLTEpIHsKICAgIHNjb3BlLmRvbUVsZW1lbnQudGFiSW5kZXggPSAwOwogIH0gLy8gZm9yY2UgYW4gdXBkYXRlIGF0IHN0YXJ0CgoKICB0aGlzLnVwZGF0ZSgpOwp9OwoKT3JiaXRDb250cm9scy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEV2ZW50RGlzcGF0Y2hlci5wcm90b3R5cGUpOwpPcmJpdENvbnRyb2xzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE9yYml0Q29udHJvbHM7IC8vIFRoaXMgc2V0IG9mIGNvbnRyb2xzIHBlcmZvcm1zIG9yYml0aW5nLCBkb2xseWluZyAoem9vbWluZyksIGFuZCBwYW5uaW5nLgovLyBVbmxpa2UgVHJhY2tiYWxsQ29udHJvbHMsIGl0IG1haW50YWlucyB0aGUgInVwIiBkaXJlY3Rpb24gb2JqZWN0LnVwICgrWSBieSBkZWZhdWx0KS4KLy8gVGhpcyBpcyB2ZXJ5IHNpbWlsYXIgdG8gT3JiaXRDb250cm9scywgYW5vdGhlciBzZXQgb2YgdG91Y2ggYmVoYXZpb3IKLy8KLy8gICAgT3JiaXQgLSByaWdodCBtb3VzZSwgb3IgbGVmdCBtb3VzZSArIGN0cmwvbWV0YS9zaGlmdEtleSAvIHRvdWNoOiB0d28tZmluZ2VyIHJvdGF0ZQovLyAgICBab29tIC0gbWlkZGxlIG1vdXNlLCBvciBtb3VzZXdoZWVsIC8gdG91Y2g6IHR3by1maW5nZXIgc3ByZWFkIG9yIHNxdWlzaAovLyAgICBQYW4gLSBsZWZ0IG1vdXNlLCBvciBhcnJvdyBrZXlzIC8gdG91Y2g6IG9uZS1maW5nZXIgbW92ZQoKdmFyIE1hcENvbnRyb2xzID0gZnVuY3Rpb24gTWFwQ29udHJvbHMob2JqZWN0LCBkb21FbGVtZW50KSB7CiAgT3JiaXRDb250cm9scy5jYWxsKHRoaXMsIG9iamVjdCwgZG9tRWxlbWVudCk7CiAgdGhpcy5tb3VzZUJ1dHRvbnMuTEVGVCA9IE1PVVNFLlBBTjsKICB0aGlzLm1vdXNlQnV0dG9ucy5SSUdIVCA9IE1PVVNFLlJPVEFURTsKICB0aGlzLnRvdWNoZXMuT05FID0gVE9VQ0guUEFOOwogIHRoaXMudG91Y2hlcy5UV08gPSBUT1VDSC5ET0xMWV9ST1RBVEU7Cn07CgpNYXBDb250cm9scy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEV2ZW50RGlzcGF0Y2hlci5wcm90b3R5cGUpOwpNYXBDb250cm9scy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNYXBDb250cm9sczsKZXhwb3J0IHsgT3JiaXRDb250cm9scywgTWFwQ29udHJvbHMgfTs="},{"version":3,"sources":["E:/自己的项目/three_test/src/assets/jsm/controls/OrbitControls.js"],"names":["EventDispatcher","MOUSE","Quaternion","Spherical","TOUCH","Vector2","Vector3","OrbitControls","object","domElement","undefined","console","warn","document","error","enabled","target","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","Math","PI","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","keys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","ROTATE","MIDDLE","DOLLY","PAN","touches","ONE","TWO","DOLLY_PAN","target0","clone","position0","position","zoom0","zoom","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","saveState","scope","copy","reset","updateProjectionMatrix","dispatchEvent","changeEvent","update","state","STATE","NONE","offset","quat","setFromUnitVectors","up","quatInverse","inverse","lastPosition","lastQuaternion","sub","applyQuaternion","setFromVector3","rotateLeft","getAutoRotationAngle","sphericalDelta","max","min","makeSafe","radius","scale","addScaledVector","panOffset","add","setFromSpherical","lookAt","multiplyScalar","set","zoomChanged","distanceToSquared","EPS","dot","quaternion","dispose","removeEventListener","onContextMenu","onMouseDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","onMouseMove","onMouseUp","onKeyDown","type","startEvent","endEvent","TOUCH_ROTATE","TOUCH_PAN","TOUCH_DOLLY_PAN","TOUCH_DOLLY_ROTATE","rotateStart","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","pow","angle","rotateUp","panLeft","v","distance","objectMatrix","setFromMatrixColumn","panUp","crossVectors","pan","deltaX","deltaY","element","isPerspectiveCamera","targetDistance","length","tan","fov","clientHeight","matrix","isOrthographicCamera","right","left","clientWidth","top","bottom","dollyIn","dollyScale","dollyOut","handleMouseDownRotate","event","clientX","clientY","handleMouseDownDolly","handleMouseDownPan","handleMouseMoveRotate","subVectors","x","y","handleMouseMoveDolly","handleMouseMovePan","handleMouseUp","handleMouseWheel","handleKeyDown","needsUpdate","keyCode","preventDefault","handleTouchStartRotate","pageX","pageY","handleTouchStartPan","handleTouchStartDolly","dx","dy","sqrt","handleTouchStartDollyPan","handleTouchStartDollyRotate","handleTouchMoveRotate","handleTouchMovePan","handleTouchMoveDolly","handleTouchMoveDollyPan","handleTouchMoveDollyRotate","handleTouchEnd","focus","window","mouseAction","button","ctrlKey","metaKey","shiftKey","addEventListener","stopPropagation","DOLLY_ROTATE","tabIndex","prototype","Object","create","constructor","MapControls","call"],"mappings":"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","sourcesContent":["/**\n * @author qiao / https://github.com/qiao\n * @author mrdoob / http://mrdoob.com\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author erich666 / http://erichaines.com\n * @author ScieCode / http://github.com/sciecode\n */\n\nimport {\n\tEventDispatcher,\n\tMOUSE,\n\tQuaternion,\n\tSpherical,\n\tTOUCH,\n\tVector2,\n\tVector3\n} from \"../../js/three.module.js\";\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\n\nvar OrbitControls = function (object, domElement) {\n\n\tif (domElement === undefined) console.warn('THREE.OrbitControls: The second parameter \"domElement\" is now mandatory.');\n\tif (domElement === document) console.error('THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.');\n\n\tthis.object = object;\n\tthis.domElement = domElement;\n\n\t// Set to false to disable this control\n\tthis.enabled = true;\n\n\t// \"target\" sets the location of focus, where the object orbits around\n\tthis.target = new Vector3();\n\n\t// How far you can dolly in and out ( PerspectiveCamera only )\n\tthis.minDistance = 0;\n\tthis.maxDistance = Infinity;\n\n\t// How far you can zoom in and out ( OrthographicCamera only )\n\tthis.minZoom = 0;\n\tthis.maxZoom = Infinity;\n\n\t// How far you can orbit vertically, upper and lower limits.\n\t// Range is 0 to Math.PI radians.\n\tthis.minPolarAngle = 0; // radians\n\tthis.maxPolarAngle = Math.PI; // radians\n\n\t// How far you can orbit horizontally, upper and lower limits.\n\t// If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n\tthis.minAzimuthAngle = - Infinity; // radians\n\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t// Set to true to enable damping (inertia)\n\t// If damping is enabled, you must call controls.update() in your animation loop\n\tthis.enableDamping = false;\n\tthis.dampingFactor = 0.05;\n\n\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n\t// Set to false to disable zooming\n\tthis.enableZoom = true;\n\tthis.zoomSpeed = 1.0;\n\n\t// Set to false to disable rotating\n\tthis.enableRotate = true;\n\tthis.rotateSpeed = 1.0;\n\n\t// Set to false to disable panning\n\tthis.enablePan = true;\n\tthis.panSpeed = 1.0;\n\tthis.screenSpacePanning = false; // if true, pan in screen-space\n\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\n\t// Set to true to automatically rotate around the target\n\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\tthis.autoRotate = false;\n\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n\t// Set to false to disable use of the keys\n\tthis.enableKeys = true;\n\n\t// The four arrow keys\n\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n\t// Mouse buttons\n\tthis.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.DOLLY, RIGHT: MOUSE.PAN };\n\n\t// Touch fingers\n\tthis.touches = { ONE: TOUCH.ROTATE, TWO: TOUCH.DOLLY_PAN };\n\n\t// for reset\n\tthis.target0 = this.target.clone();\n\tthis.position0 = this.object.position.clone();\n\tthis.zoom0 = this.object.zoom;\n\n\t//\n\t// public methods\n\t//\n\n\tthis.getPolarAngle = function () {\n\n\t\treturn spherical.phi;\n\n\t};\n\n\tthis.getAzimuthalAngle = function () {\n\n\t\treturn spherical.theta;\n\n\t};\n\n\tthis.saveState = function () {\n\n\t\tscope.target0.copy(scope.target);\n\t\tscope.position0.copy(scope.object.position);\n\t\tscope.zoom0 = scope.object.zoom;\n\n\t};\n\n\tthis.reset = function () {\n\n\t\tscope.target.copy(scope.target0);\n\t\tscope.object.position.copy(scope.position0);\n\t\tscope.object.zoom = scope.zoom0;\n\n\t\tscope.object.updateProjectionMatrix();\n\t\tscope.dispatchEvent(changeEvent);\n\n\t\tscope.update();\n\n\t\tstate = STATE.NONE;\n\n\t};\n\n\t// this method is exposed, but perhaps it would be better if we can make it private...\n\tthis.update = function () {\n\n\t\tvar offset = new Vector3();\n\n\t\t// so camera.up is the orbit axis\n\t\tvar quat = new Quaternion().setFromUnitVectors(object.up, new Vector3(0, 1, 0));\n\t\tvar quatInverse = quat.clone().inverse();\n\n\t\tvar lastPosition = new Vector3();\n\t\tvar lastQuaternion = new Quaternion();\n\n\t\treturn function update() {\n\n\t\t\tvar position = scope.object.position;\n\n\t\t\toffset.copy(position).sub(scope.target);\n\n\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\toffset.applyQuaternion(quat);\n\n\t\t\t// angle from z-axis around y-axis\n\t\t\tspherical.setFromVector3(offset);\n\n\t\t\tif (scope.autoRotate && state === STATE.NONE) {\n\n\t\t\t\trotateLeft(getAutoRotationAngle());\n\n\t\t\t}\n\n\t\t\tif (scope.enableDamping) {\n\n\t\t\t\tspherical.theta += sphericalDelta.theta * scope.dampingFactor;\n\t\t\t\tspherical.phi += sphericalDelta.phi * scope.dampingFactor;\n\n\t\t\t} else {\n\n\t\t\t\tspherical.theta += sphericalDelta.theta;\n\t\t\t\tspherical.phi += sphericalDelta.phi;\n\n\t\t\t}\n\n\t\t\t// restrict theta to be between desired limits\n\t\t\tspherical.theta = Math.max(scope.minAzimuthAngle, Math.min(scope.maxAzimuthAngle, spherical.theta));\n\n\t\t\t// restrict phi to be between desired limits\n\t\t\tspherical.phi = Math.max(scope.minPolarAngle, Math.min(scope.maxPolarAngle, spherical.phi));\n\n\t\t\tspherical.makeSafe();\n\n\n\t\t\tspherical.radius *= scale;\n\n\t\t\t// restrict radius to be between desired limits\n\t\t\tspherical.radius = Math.max(scope.minDistance, Math.min(scope.maxDistance, spherical.radius));\n\n\t\t\t// move target to panned location\n\n\t\t\tif (scope.enableDamping === true) {\n\n\t\t\t\tscope.target.addScaledVector(panOffset, scope.dampingFactor);\n\n\t\t\t} else {\n\n\t\t\t\tscope.target.add(panOffset);\n\n\t\t\t}\n\n\t\t\toffset.setFromSpherical(spherical);\n\n\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\toffset.applyQuaternion(quatInverse);\n\n\t\t\tposition.copy(scope.target).add(offset);\n\n\t\t\tscope.object.lookAt(scope.target);\n\n\t\t\tif (scope.enableDamping === true) {\n\n\t\t\t\tsphericalDelta.theta *= (1 - scope.dampingFactor);\n\t\t\t\tsphericalDelta.phi *= (1 - scope.dampingFactor);\n\n\t\t\t\tpanOffset.multiplyScalar(1 - scope.dampingFactor);\n\n\t\t\t} else {\n\n\t\t\t\tsphericalDelta.set(0, 0, 0);\n\n\t\t\t\tpanOffset.set(0, 0, 0);\n\n\t\t\t}\n\n\t\t\tscale = 1;\n\n\t\t\t// update condition is:\n\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\t\tif (zoomChanged ||\n\t\t\t\tlastPosition.distanceToSquared(scope.object.position) > EPS ||\n\t\t\t\t8 * (1 - lastQuaternion.dot(scope.object.quaternion)) > EPS) {\n\n\t\t\t\tscope.dispatchEvent(changeEvent);\n\n\t\t\t\tlastPosition.copy(scope.object.position);\n\t\t\t\tlastQuaternion.copy(scope.object.quaternion);\n\t\t\t\tzoomChanged = false;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t\treturn false;\n\n\t\t};\n\n\t}();\n\n\tthis.dispose = function () {\n\n\t\tscope.domElement.removeEventListener('contextmenu', onContextMenu, false);\n\t\tscope.domElement.removeEventListener('mousedown', onMouseDown, false);\n\t\tscope.domElement.removeEventListener('wheel', onMouseWheel, false);\n\n\t\tscope.domElement.removeEventListener('touchstart', onTouchStart, false);\n\t\tscope.domElement.removeEventListener('touchend', onTouchEnd, false);\n\t\tscope.domElement.removeEventListener('touchmove', onTouchMove, false);\n\n\t\tdocument.removeEventListener('mousemove', onMouseMove, false);\n\t\tdocument.removeEventListener('mouseup', onMouseUp, false);\n\n\t\tscope.domElement.removeEventListener('keydown', onKeyDown, false);\n\n\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\n\t};\n\n\t//\n\t// internals\n\t//\n\n\tvar scope = this;\n\n\tvar changeEvent = { type: 'change' };\n\tvar startEvent = { type: 'start' };\n\tvar endEvent = { type: 'end' };\n\n\tvar STATE = {\n\t\tNONE: - 1,\n\t\tROTATE: 0,\n\t\tDOLLY: 1,\n\t\tPAN: 2,\n\t\tTOUCH_ROTATE: 3,\n\t\tTOUCH_PAN: 4,\n\t\tTOUCH_DOLLY_PAN: 5,\n\t\tTOUCH_DOLLY_ROTATE: 6\n\t};\n\n\tvar state = STATE.NONE;\n\n\tvar EPS = 0.000001;\n\n\t// current position in spherical coordinates\n\tvar spherical = new Spherical();\n\tvar sphericalDelta = new Spherical();\n\n\tvar scale = 1;\n\tvar panOffset = new Vector3();\n\tvar zoomChanged = false;\n\n\tvar rotateStart = new Vector2();\n\tvar rotateEnd = new Vector2();\n\tvar rotateDelta = new Vector2();\n\n\tvar panStart = new Vector2();\n\tvar panEnd = new Vector2();\n\tvar panDelta = new Vector2();\n\n\tvar dollyStart = new Vector2();\n\tvar dollyEnd = new Vector2();\n\tvar dollyDelta = new Vector2();\n\n\tfunction getAutoRotationAngle() {\n\n\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n\t}\n\n\tfunction getZoomScale() {\n\n\t\treturn Math.pow(0.95, scope.zoomSpeed);\n\n\t}\n\n\tfunction rotateLeft(angle) {\n\n\t\tsphericalDelta.theta -= angle;\n\n\t}\n\n\tfunction rotateUp(angle) {\n\n\t\tsphericalDelta.phi -= angle;\n\n\t}\n\n\tvar panLeft = function () {\n\n\t\tvar v = new Vector3();\n\n\t\treturn function panLeft(distance, objectMatrix) {\n\n\t\t\tv.setFromMatrixColumn(objectMatrix, 0); // get X column of objectMatrix\n\t\t\tv.multiplyScalar(- distance);\n\n\t\t\tpanOffset.add(v);\n\n\t\t};\n\n\t}();\n\n\tvar panUp = function () {\n\n\t\tvar v = new Vector3();\n\n\t\treturn function panUp(distance, objectMatrix) {\n\n\t\t\tif (scope.screenSpacePanning === true) {\n\n\t\t\t\tv.setFromMatrixColumn(objectMatrix, 1);\n\n\t\t\t} else {\n\n\t\t\t\tv.setFromMatrixColumn(objectMatrix, 0);\n\t\t\t\tv.crossVectors(scope.object.up, v);\n\n\t\t\t}\n\n\t\t\tv.multiplyScalar(distance);\n\n\t\t\tpanOffset.add(v);\n\n\t\t};\n\n\t}();\n\n\t// deltaX and deltaY are in pixels; right and down are positive\n\tvar pan = function () {\n\n\t\tvar offset = new Vector3();\n\n\t\treturn function pan(deltaX, deltaY) {\n\n\t\t\tvar element = scope.domElement;\n\n\t\t\tif (scope.object.isPerspectiveCamera) {\n\n\t\t\t\t// perspective\n\t\t\t\tvar position = scope.object.position;\n\t\t\t\toffset.copy(position).sub(scope.target);\n\t\t\t\tvar targetDistance = offset.length();\n\n\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\ttargetDistance *= Math.tan((scope.object.fov / 2) * Math.PI / 180.0);\n\n\t\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\n\t\t\t\tpanLeft(2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix);\n\t\t\t\tpanUp(2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix);\n\n\t\t\t} else if (scope.object.isOrthographicCamera) {\n\n\t\t\t\t// orthographic\n\t\t\t\tpanLeft(deltaX * (scope.object.right - scope.object.left) / scope.object.zoom / element.clientWidth, scope.object.matrix);\n\t\t\t\tpanUp(deltaY * (scope.object.top - scope.object.bottom) / scope.object.zoom / element.clientHeight, scope.object.matrix);\n\n\t\t\t} else {\n\n\t\t\t\t// camera neither orthographic nor perspective\n\t\t\t\tconsole.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.');\n\t\t\t\tscope.enablePan = false;\n\n\t\t\t}\n\n\t\t};\n\n\t}();\n\n\tfunction dollyIn(dollyScale) {\n\n\t\tif (scope.object.isPerspectiveCamera) {\n\n\t\t\tscale /= dollyScale;\n\n\t\t} else if (scope.object.isOrthographicCamera) {\n\n\t\t\tscope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom * dollyScale));\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\tfunction dollyOut(dollyScale) {\n\n\t\tif (scope.object.isPerspectiveCamera) {\n\n\t\t\tscale *= dollyScale;\n\n\t\t} else if (scope.object.isOrthographicCamera) {\n\n\t\t\tscope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom / dollyScale));\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\t//\n\t// event callbacks - update the object state\n\t//\n\n\tfunction handleMouseDownRotate(event) {\n\n\t\trotateStart.set(event.clientX, event.clientY);\n\n\t}\n\n\tfunction handleMouseDownDolly(event) {\n\n\t\tdollyStart.set(event.clientX, event.clientY);\n\n\t}\n\n\tfunction handleMouseDownPan(event) {\n\n\t\tpanStart.set(event.clientX, event.clientY);\n\n\t}\n\n\tfunction handleMouseMoveRotate(event) {\n\n\t\trotateEnd.set(event.clientX, event.clientY);\n\n\t\trotateDelta.subVectors(rotateEnd, rotateStart).multiplyScalar(scope.rotateSpeed);\n\n\t\tvar element = scope.domElement;\n\n\t\trotateLeft(2 * Math.PI * rotateDelta.x / element.clientHeight); // yes, height\n\n\t\trotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight);\n\n\t\trotateStart.copy(rotateEnd);\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMoveDolly(event) {\n\n\t\tdollyEnd.set(event.clientX, event.clientY);\n\n\t\tdollyDelta.subVectors(dollyEnd, dollyStart);\n\n\t\tif (dollyDelta.y > 0) {\n\n\t\t\tdollyIn(getZoomScale());\n\n\t\t} else if (dollyDelta.y < 0) {\n\n\t\t\tdollyOut(getZoomScale());\n\n\t\t}\n\n\t\tdollyStart.copy(dollyEnd);\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMovePan(event) {\n\n\t\tpanEnd.set(event.clientX, event.clientY);\n\n\t\tpanDelta.subVectors(panEnd, panStart).multiplyScalar(scope.panSpeed);\n\n\t\tpan(panDelta.x, panDelta.y);\n\n\t\tpanStart.copy(panEnd);\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseUp( /*event*/) {\n\n\t\t// no-op\n\n\t}\n\n\tfunction handleMouseWheel(event) {\n\n\t\tif (event.deltaY < 0) {\n\n\t\t\tdollyOut(getZoomScale());\n\n\t\t} else if (event.deltaY > 0) {\n\n\t\t\tdollyIn(getZoomScale());\n\n\t\t}\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleKeyDown(event) {\n\n\t\tvar needsUpdate = false;\n\n\t\tswitch (event.keyCode) {\n\n\t\t\tcase scope.keys.UP:\n\t\t\t\tpan(0, scope.keyPanSpeed);\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\tpan(0, - scope.keyPanSpeed);\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.LEFT:\n\t\t\t\tpan(scope.keyPanSpeed, 0);\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.RIGHT:\n\t\t\t\tpan(- scope.keyPanSpeed, 0);\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif (needsUpdate) {\n\n\t\t\t// prevent the browser from scrolling on cursor keys\n\t\t\tevent.preventDefault();\n\n\t\t\tscope.update();\n\n\t\t}\n\n\n\t}\n\n\tfunction handleTouchStartRotate(event) {\n\n\t\tif (event.touches.length == 1) {\n\n\t\t\trotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n\t\t\tvar y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n\n\t\t\trotateStart.set(x, y);\n\n\t\t}\n\n\t}\n\n\tfunction handleTouchStartPan(event) {\n\n\t\tif (event.touches.length == 1) {\n\n\t\t\tpanStart.set(event.touches[0].pageX, event.touches[0].pageY);\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n\t\t\tvar y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n\n\t\t\tpanStart.set(x, y);\n\n\t\t}\n\n\t}\n\n\tfunction handleTouchStartDolly(event) {\n\n\t\tvar dx = event.touches[0].pageX - event.touches[1].pageX;\n\t\tvar dy = event.touches[0].pageY - event.touches[1].pageY;\n\n\t\tvar distance = Math.sqrt(dx * dx + dy * dy);\n\n\t\tdollyStart.set(0, distance);\n\n\t}\n\n\tfunction handleTouchStartDollyPan(event) {\n\n\t\tif (scope.enableZoom) handleTouchStartDolly(event);\n\n\t\tif (scope.enablePan) handleTouchStartPan(event);\n\n\t}\n\n\tfunction handleTouchStartDollyRotate(event) {\n\n\t\tif (scope.enableZoom) handleTouchStartDolly(event);\n\n\t\tif (scope.enableRotate) handleTouchStartRotate(event);\n\n\t}\n\n\tfunction handleTouchMoveRotate(event) {\n\n\t\tif (event.touches.length == 1) {\n\n\t\t\trotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n\t\t\tvar y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n\n\t\t\trotateEnd.set(x, y);\n\n\t\t}\n\n\t\trotateDelta.subVectors(rotateEnd, rotateStart).multiplyScalar(scope.rotateSpeed);\n\n\t\tvar element = scope.domElement;\n\n\t\trotateLeft(2 * Math.PI * rotateDelta.x / element.clientHeight); // yes, height\n\n\t\trotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight);\n\n\t\trotateStart.copy(rotateEnd);\n\n\t}\n\n\tfunction handleTouchMovePan(event) {\n\n\t\tif (event.touches.length == 1) {\n\n\t\t\tpanEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n\t\t\tvar y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n\n\t\t\tpanEnd.set(x, y);\n\n\t\t}\n\n\t\tpanDelta.subVectors(panEnd, panStart).multiplyScalar(scope.panSpeed);\n\n\t\tpan(panDelta.x, panDelta.y);\n\n\t\tpanStart.copy(panEnd);\n\n\t}\n\n\tfunction handleTouchMoveDolly(event) {\n\n\t\tvar dx = event.touches[0].pageX - event.touches[1].pageX;\n\t\tvar dy = event.touches[0].pageY - event.touches[1].pageY;\n\n\t\tvar distance = Math.sqrt(dx * dx + dy * dy);\n\n\t\tdollyEnd.set(0, distance);\n\n\t\tdollyDelta.set(0, Math.pow(dollyEnd.y / dollyStart.y, scope.zoomSpeed));\n\n\t\tdollyIn(dollyDelta.y);\n\n\t\tdollyStart.copy(dollyEnd);\n\n\t}\n\n\tfunction handleTouchMoveDollyPan(event) {\n\n\t\tif (scope.enableZoom) handleTouchMoveDolly(event);\n\n\t\tif (scope.enablePan) handleTouchMovePan(event);\n\n\t}\n\n\tfunction handleTouchMoveDollyRotate(event) {\n\n\t\tif (scope.enableZoom) handleTouchMoveDolly(event);\n\n\t\tif (scope.enableRotate) handleTouchMoveRotate(event);\n\n\t}\n\n\tfunction handleTouchEnd( /*event*/) {\n\n\t\t// no-op\n\n\t}\n\n\t//\n\t// event handlers - FSM: listen for events and reset state\n\t//\n\n\tfunction onMouseDown(event) {\n\n\t\tif (scope.enabled === false) return;\n\n\t\t// Prevent the browser from scrolling.\n\t\tevent.preventDefault();\n\n\t\t// Manually set the focus since calling preventDefault above\n\t\t// prevents the browser from setting it automatically.\n\n\t\tscope.domElement.focus ? scope.domElement.focus() : window.focus();\n\n\t\tvar mouseAction;\n\n\t\tswitch (event.button) {\n\n\t\t\tcase 0:\n\n\t\t\t\tmouseAction = scope.mouseButtons.LEFT;\n\t\t\t\tbreak;\n\n\t\t\tcase 1:\n\n\t\t\t\tmouseAction = scope.mouseButtons.MIDDLE;\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\n\t\t\t\tmouseAction = scope.mouseButtons.RIGHT;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tmouseAction = - 1;\n\n\t\t}\n\n\t\tswitch (mouseAction) {\n\n\t\t\tcase MOUSE.DOLLY:\n\n\t\t\t\tif (scope.enableZoom === false) return;\n\n\t\t\t\thandleMouseDownDolly(event);\n\n\t\t\t\tstate = STATE.DOLLY;\n\n\t\t\t\tbreak;\n\n\t\t\tcase MOUSE.ROTATE:\n\n\t\t\t\tif (event.ctrlKey || event.metaKey || event.shiftKey) {\n\n\t\t\t\t\tif (scope.enablePan === false) return;\n\n\t\t\t\t\thandleMouseDownPan(event);\n\n\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif (scope.enableRotate === false) return;\n\n\t\t\t\t\thandleMouseDownRotate(event);\n\n\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase MOUSE.PAN:\n\n\t\t\t\tif (event.ctrlKey || event.metaKey || event.shiftKey) {\n\n\t\t\t\t\tif (scope.enableRotate === false) return;\n\n\t\t\t\t\thandleMouseDownRotate(event);\n\n\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif (scope.enablePan === false) return;\n\n\t\t\t\t\thandleMouseDownPan(event);\n\n\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tif (state !== STATE.NONE) {\n\n\t\t\tdocument.addEventListener('mousemove', onMouseMove, false);\n\t\t\tdocument.addEventListener('mouseup', onMouseUp, false);\n\n\t\t\tscope.dispatchEvent(startEvent);\n\n\t\t}\n\n\t}\n\n\tfunction onMouseMove(event) {\n\n\t\tif (scope.enabled === false) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch (state) {\n\n\t\t\tcase STATE.ROTATE:\n\n\t\t\t\tif (scope.enableRotate === false) return;\n\n\t\t\t\thandleMouseMoveRotate(event);\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.DOLLY:\n\n\t\t\t\tif (scope.enableZoom === false) return;\n\n\t\t\t\thandleMouseMoveDolly(event);\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.PAN:\n\n\t\t\t\tif (scope.enablePan === false) return;\n\n\t\t\t\thandleMouseMovePan(event);\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction onMouseUp(event) {\n\n\t\tif (scope.enabled === false) return;\n\n\t\thandleMouseUp(event);\n\n\t\tdocument.removeEventListener('mousemove', onMouseMove, false);\n\t\tdocument.removeEventListener('mouseup', onMouseUp, false);\n\n\t\tscope.dispatchEvent(endEvent);\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onMouseWheel(event) {\n\n\t\tif (scope.enabled === false || scope.enableZoom === false || (state !== STATE.NONE && state !== STATE.ROTATE)) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tscope.dispatchEvent(startEvent);\n\n\t\thandleMouseWheel(event);\n\n\t\tscope.dispatchEvent(endEvent);\n\n\t}\n\n\tfunction onKeyDown(event) {\n\n\t\tif (scope.enabled === false || scope.enableKeys === false || scope.enablePan === false) return;\n\n\t\thandleKeyDown(event);\n\n\t}\n\n\tfunction onTouchStart(event) {\n\n\t\tif (scope.enabled === false) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch (event.touches.length) {\n\n\t\t\tcase 1:\n\n\t\t\t\tswitch (scope.touches.ONE) {\n\n\t\t\t\t\tcase TOUCH.ROTATE:\n\n\t\t\t\t\t\tif (scope.enableRotate === false) return;\n\n\t\t\t\t\t\thandleTouchStartRotate(event);\n\n\t\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase TOUCH.PAN:\n\n\t\t\t\t\t\tif (scope.enablePan === false) return;\n\n\t\t\t\t\t\thandleTouchStartPan(event);\n\n\t\t\t\t\t\tstate = STATE.TOUCH_PAN;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\n\t\t\t\tswitch (scope.touches.TWO) {\n\n\t\t\t\t\tcase TOUCH.DOLLY_PAN:\n\n\t\t\t\t\t\tif (scope.enableZoom === false && scope.enablePan === false) return;\n\n\t\t\t\t\t\thandleTouchStartDollyPan(event);\n\n\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_PAN;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase TOUCH.DOLLY_ROTATE:\n\n\t\t\t\t\t\tif (scope.enableZoom === false && scope.enableRotate === false) return;\n\n\t\t\t\t\t\thandleTouchStartDollyRotate(event);\n\n\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_ROTATE;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tif (state !== STATE.NONE) {\n\n\t\t\tscope.dispatchEvent(startEvent);\n\n\t\t}\n\n\t}\n\n\tfunction onTouchMove(event) {\n\n\t\tif (scope.enabled === false) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tswitch (state) {\n\n\t\t\tcase STATE.TOUCH_ROTATE:\n\n\t\t\t\tif (scope.enableRotate === false) return;\n\n\t\t\t\thandleTouchMoveRotate(event);\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.TOUCH_PAN:\n\n\t\t\t\tif (scope.enablePan === false) return;\n\n\t\t\t\thandleTouchMovePan(event);\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.TOUCH_DOLLY_PAN:\n\n\t\t\t\tif (scope.enableZoom === false && scope.enablePan === false) return;\n\n\t\t\t\thandleTouchMoveDollyPan(event);\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.TOUCH_DOLLY_ROTATE:\n\n\t\t\t\tif (scope.enableZoom === false && scope.enableRotate === false) return;\n\n\t\t\t\thandleTouchMoveDollyRotate(event);\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t}\n\n\tfunction onTouchEnd(event) {\n\n\t\tif (scope.enabled === false) return;\n\n\t\thandleTouchEnd(event);\n\n\t\tscope.dispatchEvent(endEvent);\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onContextMenu(event) {\n\n\t\tif (scope.enabled === false) return;\n\n\t\tevent.preventDefault();\n\n\t}\n\n\t//\n\n\tscope.domElement.addEventListener('contextmenu', onContextMenu, false);\n\n\tscope.domElement.addEventListener('mousedown', onMouseDown, false);\n\tscope.domElement.addEventListener('wheel', onMouseWheel, false);\n\n\tscope.domElement.addEventListener('touchstart', onTouchStart, false);\n\tscope.domElement.addEventListener('touchend', onTouchEnd, false);\n\tscope.domElement.addEventListener('touchmove', onTouchMove, false);\n\n\tscope.domElement.addEventListener('keydown', onKeyDown, false);\n\n\t// make sure element can receive keys.\n\n\tif (scope.domElement.tabIndex === - 1) {\n\n\t\tscope.domElement.tabIndex = 0;\n\n\t}\n\n\t// force an update at start\n\n\tthis.update();\n\n};\n\nOrbitControls.prototype = Object.create(EventDispatcher.prototype);\nOrbitControls.prototype.constructor = OrbitControls;\n\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n// This is very similar to OrbitControls, another set of touch behavior\n//\n//    Orbit - right mouse, or left mouse + ctrl/meta/shiftKey / touch: two-finger rotate\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - left mouse, or arrow keys / touch: one-finger move\n\nvar MapControls = function (object, domElement) {\n\n\tOrbitControls.call(this, object, domElement);\n\n\tthis.mouseButtons.LEFT = MOUSE.PAN;\n\tthis.mouseButtons.RIGHT = MOUSE.ROTATE;\n\n\tthis.touches.ONE = TOUCH.PAN;\n\tthis.touches.TWO = TOUCH.DOLLY_ROTATE;\n\n};\n\nMapControls.prototype = Object.create(EventDispatcher.prototype);\nMapControls.prototype.constructor = MapControls;\n\nexport { OrbitControls, MapControls };\n"]}]}