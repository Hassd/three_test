{"remainingRequest":"E:\\自己的项目\\three_test\\node_modules\\babel-loader\\lib\\index.js!E:\\自己的项目\\three_test\\src\\assets\\examples\\jsm\\loaders\\obj2\\shared\\MaterialHandler.js","dependencies":[{"path":"E:\\自己的项目\\three_test\\src\\assets\\examples\\jsm\\loaders\\obj2\\shared\\MaterialHandler.js","mtime":1581123525000},{"path":"E:\\自己的项目\\three_test\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\自己的项目\\three_test\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS50by1qc29uIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC50by1qc29uIjsKCi8qKgogKiBAYXV0aG9yIEthaSBTYWxtZW4gLyBodHRwczovL2thaXNhbG1lbi5kZQogKiBEZXZlbG9wbWVudCByZXBvc2l0b3J5OiBodHRwczovL2dpdGh1Yi5jb20va2Fpc2FsbWVuL1dXT0JKTG9hZGVyCiAqLwppbXBvcnQgeyBMaW5lQmFzaWNNYXRlcmlhbCwgTWF0ZXJpYWxMb2FkZXIsIE1lc2hTdGFuZGFyZE1hdGVyaWFsLCBQb2ludHNNYXRlcmlhbCwgVmVydGV4Q29sb3JzIH0gZnJvbSAiLi4vLi4vLi4vLi4vLi4vYnVpbGQvdGhyZWUubW9kdWxlLmpzIjsKCnZhciBNYXRlcmlhbEhhbmRsZXIgPSBmdW5jdGlvbiBNYXRlcmlhbEhhbmRsZXIoKSB7CiAgdGhpcy5sb2dnaW5nID0gewogICAgZW5hYmxlZDogZmFsc2UsCiAgICBkZWJ1ZzogZmFsc2UKICB9OwogIHRoaXMuY2FsbGJhY2tzID0gewogICAgb25Mb2FkTWF0ZXJpYWxzOiBudWxsCiAgfTsKICB0aGlzLm1hdGVyaWFscyA9IHt9Owp9OwoKTWF0ZXJpYWxIYW5kbGVyLnByb3RvdHlwZSA9IHsKICBjb25zdHJ1Y3RvcjogTWF0ZXJpYWxIYW5kbGVyLAoKICAvKioKICAgKiBFbmFibGUgb3IgZGlzYWJsZSBsb2dnaW5nIGluIGdlbmVyYWwgKGV4Y2VwdCB3YXJuIGFuZCBlcnJvciksIHBsdXMgZW5hYmxlIG9yIGRpc2FibGUgZGVidWcgbG9nZ2luZy4KICAgKgogICAqIEBwYXJhbSB7Ym9vbGVhbn0gZW5hYmxlZCBUcnVlIG9yIGZhbHNlLgogICAqIEBwYXJhbSB7Ym9vbGVhbn0gZGVidWcgVHJ1ZSBvciBmYWxzZS4KICAgKi8KICBzZXRMb2dnaW5nOiBmdW5jdGlvbiBzZXRMb2dnaW5nKGVuYWJsZWQsIGRlYnVnKSB7CiAgICB0aGlzLmxvZ2dpbmcuZW5hYmxlZCA9IGVuYWJsZWQgPT09IHRydWU7CiAgICB0aGlzLmxvZ2dpbmcuZGVidWcgPSBkZWJ1ZyA9PT0gdHJ1ZTsKICB9LAogIF9zZXRDYWxsYmFja3M6IGZ1bmN0aW9uIF9zZXRDYWxsYmFja3Mob25Mb2FkTWF0ZXJpYWxzKSB7CiAgICBpZiAob25Mb2FkTWF0ZXJpYWxzICE9PSB1bmRlZmluZWQgJiYgb25Mb2FkTWF0ZXJpYWxzICE9PSBudWxsICYmIG9uTG9hZE1hdGVyaWFscyBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7CiAgICAgIHRoaXMuY2FsbGJhY2tzLm9uTG9hZE1hdGVyaWFscyA9IG9uTG9hZE1hdGVyaWFsczsKICAgIH0KICB9LAoKICAvKioKICAgKiBDcmVhdGVzIGRlZmF1bHQgbWF0ZXJpYWxzIGFuZCBhZGRzIHRoZW0gdG8gdGhlIG1hdGVyaWFscyBvYmplY3QuCiAgICoKICAgKiBAcGFyYW0gb3ZlcnJpZGVFeGlzdGluZyBib29sZWFuIE92ZXJyaWRlIGV4aXN0aW5nIG1hdGVyaWFsCiAgICovCiAgY3JlYXRlRGVmYXVsdE1hdGVyaWFsczogZnVuY3Rpb24gY3JlYXRlRGVmYXVsdE1hdGVyaWFscyhvdmVycmlkZUV4aXN0aW5nKSB7CiAgICB2YXIgZGVmYXVsdE1hdGVyaWFsID0gbmV3IE1lc2hTdGFuZGFyZE1hdGVyaWFsKHsKICAgICAgY29sb3I6IDB4RENGMUZGCiAgICB9KTsKICAgIGRlZmF1bHRNYXRlcmlhbC5uYW1lID0gJ2RlZmF1bHRNYXRlcmlhbCc7CiAgICB2YXIgZGVmYXVsdFZlcnRleENvbG9yTWF0ZXJpYWwgPSBuZXcgTWVzaFN0YW5kYXJkTWF0ZXJpYWwoewogICAgICBjb2xvcjogMHhEQ0YxRkYKICAgIH0pOwogICAgZGVmYXVsdFZlcnRleENvbG9yTWF0ZXJpYWwubmFtZSA9ICdkZWZhdWx0VmVydGV4Q29sb3JNYXRlcmlhbCc7CiAgICBkZWZhdWx0VmVydGV4Q29sb3JNYXRlcmlhbC52ZXJ0ZXhDb2xvcnMgPSBWZXJ0ZXhDb2xvcnM7CiAgICB2YXIgZGVmYXVsdExpbmVNYXRlcmlhbCA9IG5ldyBMaW5lQmFzaWNNYXRlcmlhbCgpOwogICAgZGVmYXVsdExpbmVNYXRlcmlhbC5uYW1lID0gJ2RlZmF1bHRMaW5lTWF0ZXJpYWwnOwogICAgdmFyIGRlZmF1bHRQb2ludE1hdGVyaWFsID0gbmV3IFBvaW50c01hdGVyaWFsKHsKICAgICAgc2l6ZTogMC4xCiAgICB9KTsKICAgIGRlZmF1bHRQb2ludE1hdGVyaWFsLm5hbWUgPSAnZGVmYXVsdFBvaW50TWF0ZXJpYWwnOwogICAgdmFyIHJ1bnRpbWVNYXRlcmlhbHMgPSB7fTsKICAgIHJ1bnRpbWVNYXRlcmlhbHNbZGVmYXVsdE1hdGVyaWFsLm5hbWVdID0gZGVmYXVsdE1hdGVyaWFsOwogICAgcnVudGltZU1hdGVyaWFsc1tkZWZhdWx0VmVydGV4Q29sb3JNYXRlcmlhbC5uYW1lXSA9IGRlZmF1bHRWZXJ0ZXhDb2xvck1hdGVyaWFsOwogICAgcnVudGltZU1hdGVyaWFsc1tkZWZhdWx0TGluZU1hdGVyaWFsLm5hbWVdID0gZGVmYXVsdExpbmVNYXRlcmlhbDsKICAgIHJ1bnRpbWVNYXRlcmlhbHNbZGVmYXVsdFBvaW50TWF0ZXJpYWwubmFtZV0gPSBkZWZhdWx0UG9pbnRNYXRlcmlhbDsKICAgIHRoaXMuYWRkTWF0ZXJpYWxzKHJ1bnRpbWVNYXRlcmlhbHMsIG92ZXJyaWRlRXhpc3RpbmcpOwogIH0sCgogIC8qKgogICAqIFVwZGF0ZXMgdGhlIG1hdGVyaWFscyB3aXRoIGNvbnRhaW5lZCBtYXRlcmlhbCBvYmplY3RzIChzeW5jKSBvciBmcm9tIGFsdGVyYXRpb24gaW5zdHJ1Y3Rpb25zIChhc3luYykuCiAgICoKICAgKiBAcGFyYW0ge09iamVjdH0gbWF0ZXJpYWxQYXlsb2FkIE1hdGVyaWFsIHVwZGF0ZSBpbnN0cnVjdGlvbnMKICAgKiBAcmV0dXJucyB7T2JqZWN0fSBNYXAgb2Yge0BsaW5rIE1hdGVyaWFsfQogICAqLwogIGFkZFBheWxvYWRNYXRlcmlhbHM6IGZ1bmN0aW9uIGFkZFBheWxvYWRNYXRlcmlhbHMobWF0ZXJpYWxQYXlsb2FkKSB7CiAgICB2YXIgbWF0ZXJpYWwsIG1hdGVyaWFsTmFtZTsKICAgIHZhciBtYXRlcmlhbENsb25lSW5zdHJ1Y3Rpb25zID0gbWF0ZXJpYWxQYXlsb2FkLm1hdGVyaWFscy5tYXRlcmlhbENsb25lSW5zdHJ1Y3Rpb25zOwogICAgdmFyIG5ld01hdGVyaWFscyA9IHt9OwoKICAgIGlmIChtYXRlcmlhbENsb25lSW5zdHJ1Y3Rpb25zICE9PSB1bmRlZmluZWQgJiYgbWF0ZXJpYWxDbG9uZUluc3RydWN0aW9ucyAhPT0gbnVsbCkgewogICAgICB2YXIgbWF0ZXJpYWxOYW1lT3JnID0gbWF0ZXJpYWxDbG9uZUluc3RydWN0aW9ucy5tYXRlcmlhbE5hbWVPcmc7CiAgICAgIG1hdGVyaWFsTmFtZU9yZyA9IG1hdGVyaWFsTmFtZU9yZyAhPT0gdW5kZWZpbmVkICYmIG1hdGVyaWFsTmFtZU9yZyAhPT0gbnVsbCA/IG1hdGVyaWFsTmFtZU9yZyA6ICIiOwogICAgICB2YXIgbWF0ZXJpYWxPcmcgPSB0aGlzLm1hdGVyaWFsc1ttYXRlcmlhbE5hbWVPcmddOwoKICAgICAgaWYgKG1hdGVyaWFsT3JnKSB7CiAgICAgICAgbWF0ZXJpYWwgPSBtYXRlcmlhbE9yZy5jbG9uZSgpOwogICAgICAgIG1hdGVyaWFsTmFtZSA9IG1hdGVyaWFsQ2xvbmVJbnN0cnVjdGlvbnMubWF0ZXJpYWxOYW1lOwogICAgICAgIG1hdGVyaWFsLm5hbWUgPSBtYXRlcmlhbE5hbWU7CiAgICAgICAgT2JqZWN0LmFzc2lnbihtYXRlcmlhbCwgbWF0ZXJpYWxDbG9uZUluc3RydWN0aW9ucy5tYXRlcmlhbFByb3BlcnRpZXMpOwogICAgICAgIHRoaXMubWF0ZXJpYWxzW21hdGVyaWFsTmFtZV0gPSBtYXRlcmlhbDsKICAgICAgICBuZXdNYXRlcmlhbHNbbWF0ZXJpYWxOYW1lXSA9IG1hdGVyaWFsOwogICAgICB9IGVsc2UgewogICAgICAgIGlmICh0aGlzLmxvZ2dpbmcuZW5hYmxlZCkgewogICAgICAgICAgY29uc29sZS5pbmZvKCdSZXF1ZXN0ZWQgbWF0ZXJpYWwgIicgKyBtYXRlcmlhbE5hbWVPcmcgKyAnIiBpcyBub3QgYXZhaWxhYmxlIScpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHZhciBtYXRlcmlhbHMgPSBtYXRlcmlhbFBheWxvYWQubWF0ZXJpYWxzLnNlcmlhbGl6ZWRNYXRlcmlhbHM7CgogICAgaWYgKG1hdGVyaWFscyAhPT0gdW5kZWZpbmVkICYmIG1hdGVyaWFscyAhPT0gbnVsbCAmJiBPYmplY3Qua2V5cyhtYXRlcmlhbHMpLmxlbmd0aCA+IDApIHsKICAgICAgdmFyIGxvYWRlciA9IG5ldyBNYXRlcmlhbExvYWRlcigpOwogICAgICB2YXIgbWF0ZXJpYWxKc29uOwoKICAgICAgZm9yIChtYXRlcmlhbE5hbWUgaW4gbWF0ZXJpYWxzKSB7CiAgICAgICAgbWF0ZXJpYWxKc29uID0gbWF0ZXJpYWxzW21hdGVyaWFsTmFtZV07CgogICAgICAgIGlmIChtYXRlcmlhbEpzb24gIT09IHVuZGVmaW5lZCAmJiBtYXRlcmlhbEpzb24gIT09IG51bGwpIHsKICAgICAgICAgIG1hdGVyaWFsID0gbG9hZGVyLnBhcnNlKG1hdGVyaWFsSnNvbik7CgogICAgICAgICAgaWYgKHRoaXMubG9nZ2luZy5lbmFibGVkKSB7CiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnRGUtc2VyaWFsaXplZCBtYXRlcmlhbCB3aXRoIG5hbWUgIicgKyBtYXRlcmlhbE5hbWUgKyAnIiB3aWxsIGJlIGFkZGVkLicpOwogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMubWF0ZXJpYWxzW21hdGVyaWFsTmFtZV0gPSBtYXRlcmlhbDsKICAgICAgICAgIG5ld01hdGVyaWFsc1ttYXRlcmlhbE5hbWVdID0gbWF0ZXJpYWw7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgbWF0ZXJpYWxzID0gbWF0ZXJpYWxQYXlsb2FkLm1hdGVyaWFscy5ydW50aW1lTWF0ZXJpYWxzOwogICAgbmV3TWF0ZXJpYWxzID0gdGhpcy5hZGRNYXRlcmlhbHMobWF0ZXJpYWxzLCB0cnVlLCBuZXdNYXRlcmlhbHMpOwogICAgcmV0dXJuIG5ld01hdGVyaWFsczsKICB9LAoKICAvKioKICAgKiBTZXQgbWF0ZXJpYWxzIGxvYWRlZCBieSBhbnkgc3VwcGxpZXIgb2YgYW4gQXJyYXkgb2Yge0BsaW5rIE1hdGVyaWFsfS4KICAgKgogICAqIEBwYXJhbSBtYXRlcmlhbHMgT2JqZWN0IHdpdGggbmFtZWQge0BsaW5rIE1hdGVyaWFsfQogICAqIEBwYXJhbSBvdmVycmlkZUV4aXN0aW5nIGJvb2xlYW4gT3ZlcnJpZGUgZXhpc3RpbmcgbWF0ZXJpYWwKICAgKiBAcGFyYW0gbmV3TWF0ZXJpYWxzIFtPYmplY3RdIHdpdGggbmFtZWQge0BsaW5rIE1hdGVyaWFsfQogICAqLwogIGFkZE1hdGVyaWFsczogZnVuY3Rpb24gYWRkTWF0ZXJpYWxzKG1hdGVyaWFscywgb3ZlcnJpZGVFeGlzdGluZywgbmV3TWF0ZXJpYWxzKSB7CiAgICBpZiAobmV3TWF0ZXJpYWxzID09PSB1bmRlZmluZWQgfHwgbmV3TWF0ZXJpYWxzID09PSBudWxsKSB7CiAgICAgIG5ld01hdGVyaWFscyA9IHt9OwogICAgfQoKICAgIGlmIChtYXRlcmlhbHMgIT09IHVuZGVmaW5lZCAmJiBtYXRlcmlhbHMgIT09IG51bGwgJiYgT2JqZWN0LmtleXMobWF0ZXJpYWxzKS5sZW5ndGggPiAwKSB7CiAgICAgIHZhciBtYXRlcmlhbDsKICAgICAgdmFyIGV4aXN0aW5nTWF0ZXJpYWw7CiAgICAgIHZhciBhZGQ7CgogICAgICBmb3IgKHZhciBtYXRlcmlhbE5hbWUgaW4gbWF0ZXJpYWxzKSB7CiAgICAgICAgbWF0ZXJpYWwgPSBtYXRlcmlhbHNbbWF0ZXJpYWxOYW1lXTsKICAgICAgICBhZGQgPSBvdmVycmlkZUV4aXN0aW5nID09PSB0cnVlOwoKICAgICAgICBpZiAoIWFkZCkgewogICAgICAgICAgZXhpc3RpbmdNYXRlcmlhbCA9IHRoaXMubWF0ZXJpYWxzW21hdGVyaWFsTmFtZV07CiAgICAgICAgICBhZGQgPSBleGlzdGluZ01hdGVyaWFsID09PSBudWxsIHx8IGV4aXN0aW5nTWF0ZXJpYWwgPT09IHVuZGVmaW5lZDsKICAgICAgICB9CgogICAgICAgIGlmIChhZGQpIHsKICAgICAgICAgIHRoaXMubWF0ZXJpYWxzW21hdGVyaWFsTmFtZV0gPSBtYXRlcmlhbDsKICAgICAgICAgIG5ld01hdGVyaWFsc1ttYXRlcmlhbE5hbWVdID0gbWF0ZXJpYWw7CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5sb2dnaW5nLmVuYWJsZWQgJiYgdGhpcy5sb2dnaW5nLmRlYnVnKSB7CiAgICAgICAgICBjb25zb2xlLmluZm8oJ01hdGVyaWFsIHdpdGggbmFtZSAiJyArIG1hdGVyaWFsTmFtZSArICciIHdhcyBhZGRlZC4nKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBpZiAodGhpcy5jYWxsYmFja3Mub25Mb2FkTWF0ZXJpYWxzKSB7CiAgICAgIHRoaXMuY2FsbGJhY2tzLm9uTG9hZE1hdGVyaWFscyhuZXdNYXRlcmlhbHMpOwogICAgfQoKICAgIHJldHVybiBuZXdNYXRlcmlhbHM7CiAgfSwKCiAgLyoqCiAgICogUmV0dXJucyB0aGUgbWFwcGluZyBvYmplY3Qgb2YgbWF0ZXJpYWwgbmFtZSBhbmQgY29ycmVzcG9uZGluZyBtYXRlcmlhbC4KICAgKgogICAqIEByZXR1cm5zIHtPYmplY3R9IE1hcCBvZiB7QGxpbmsgTWF0ZXJpYWx9CiAgICovCiAgZ2V0TWF0ZXJpYWxzOiBmdW5jdGlvbiBnZXRNYXRlcmlhbHMoKSB7CiAgICByZXR1cm4gdGhpcy5tYXRlcmlhbHM7CiAgfSwKCiAgLyoqCiAgICoKICAgKiBAcGFyYW0ge1N0cmluZ30gbWF0ZXJpYWxOYW1lCiAgICogQHJldHVybnMge01hdGVyaWFsfQogICAqLwogIGdldE1hdGVyaWFsOiBmdW5jdGlvbiBnZXRNYXRlcmlhbChtYXRlcmlhbE5hbWUpIHsKICAgIHJldHVybiB0aGlzLm1hdGVyaWFsc1ttYXRlcmlhbE5hbWVdOwogIH0sCgogIC8qKgogICAqIFJldHVybnMgdGhlIG1hcHBpbmcgb2JqZWN0IG9mIG1hdGVyaWFsIG5hbWUgYW5kIGNvcnJlc3BvbmRpbmcganNvbmlmaWVkIG1hdGVyaWFsLgogICAqCiAgICogQHJldHVybnMge09iamVjdH0gTWFwIG9mIE1hdGVyaWFscyBpbiBKU09OIHJlcHJlc2VudGF0aW9uCiAgICovCiAgZ2V0TWF0ZXJpYWxzSlNPTjogZnVuY3Rpb24gZ2V0TWF0ZXJpYWxzSlNPTigpIHsKICAgIHZhciBtYXRlcmlhbHNKU09OID0ge307CiAgICB2YXIgbWF0ZXJpYWw7CgogICAgZm9yICh2YXIgbWF0ZXJpYWxOYW1lIGluIHRoaXMubWF0ZXJpYWxzKSB7CiAgICAgIG1hdGVyaWFsID0gdGhpcy5tYXRlcmlhbHNbbWF0ZXJpYWxOYW1lXTsKICAgICAgbWF0ZXJpYWxzSlNPTlttYXRlcmlhbE5hbWVdID0gbWF0ZXJpYWwudG9KU09OKCk7CiAgICB9CgogICAgcmV0dXJuIG1hdGVyaWFsc0pTT047CiAgfSwKCiAgLyoqCiAgICogUmVtb3ZlcyBhbGwgbWF0ZXJpYWxzCiAgICovCiAgY2xlYXJNYXRlcmlhbHM6IGZ1bmN0aW9uIGNsZWFyTWF0ZXJpYWxzKCkgewogICAgdGhpcy5tYXRlcmlhbHMgPSB7fTsKICB9Cn07CmV4cG9ydCB7IE1hdGVyaWFsSGFuZGxlciB9Ow=="},{"version":3,"sources":["E:/自己的项目/three_test/src/assets/examples/jsm/loaders/obj2/shared/MaterialHandler.js"],"names":["LineBasicMaterial","MaterialLoader","MeshStandardMaterial","PointsMaterial","VertexColors","MaterialHandler","logging","enabled","debug","callbacks","onLoadMaterials","materials","prototype","constructor","setLogging","_setCallbacks","undefined","Function","createDefaultMaterials","overrideExisting","defaultMaterial","color","name","defaultVertexColorMaterial","vertexColors","defaultLineMaterial","defaultPointMaterial","size","runtimeMaterials","addMaterials","addPayloadMaterials","materialPayload","material","materialName","materialCloneInstructions","newMaterials","materialNameOrg","materialOrg","clone","Object","assign","materialProperties","console","info","serializedMaterials","keys","length","loader","materialJson","parse","existingMaterial","add","getMaterials","getMaterial","getMaterialsJSON","materialsJSON","toJSON","clearMaterials"],"mappings":"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","sourcesContent":["/**\n * @author Kai Salmen / https://kaisalmen.de\n * Development repository: https://github.com/kaisalmen/WWOBJLoader\n */\n\nimport {\n\tLineBasicMaterial,\n\tMaterialLoader,\n\tMeshStandardMaterial,\n\tPointsMaterial,\n\tVertexColors\n} from \"../../../../../build/three.module.js\";\n\n\nconst MaterialHandler = function () {\n\n\tthis.logging = {\n\t\tenabled: false,\n\t\tdebug: false\n\t};\n\n\tthis.callbacks = {\n\t\tonLoadMaterials: null\n\t};\n\tthis.materials = {};\n\n};\n\nMaterialHandler.prototype = {\n\n\tconstructor: MaterialHandler,\n\n\t/**\n\t * Enable or disable logging in general (except warn and error), plus enable or disable debug logging.\n\t *\n\t * @param {boolean} enabled True or false.\n\t * @param {boolean} debug True or false.\n\t */\n\tsetLogging:\tfunction ( enabled, debug ) {\n\n\t\tthis.logging.enabled = enabled === true;\n\t\tthis.logging.debug = debug === true;\n\n\t},\n\n\t_setCallbacks: function ( onLoadMaterials ) {\n\n\t\tif ( onLoadMaterials !== undefined && onLoadMaterials !== null && onLoadMaterials instanceof Function ) {\n\n\t\t\tthis.callbacks.onLoadMaterials = onLoadMaterials;\n\n\t\t}\n\n\t},\n\n\t/**\n\t * Creates default materials and adds them to the materials object.\n\t *\n\t * @param overrideExisting boolean Override existing material\n\t */\n\tcreateDefaultMaterials: function ( overrideExisting ) {\n\n\t\tlet defaultMaterial = new MeshStandardMaterial( { color: 0xDCF1FF } );\n\t\tdefaultMaterial.name = 'defaultMaterial';\n\n\t\tlet defaultVertexColorMaterial = new MeshStandardMaterial( { color: 0xDCF1FF } );\n\t\tdefaultVertexColorMaterial.name = 'defaultVertexColorMaterial';\n\t\tdefaultVertexColorMaterial.vertexColors = VertexColors;\n\n\t\tlet defaultLineMaterial = new LineBasicMaterial();\n\t\tdefaultLineMaterial.name = 'defaultLineMaterial';\n\n\t\tlet defaultPointMaterial = new PointsMaterial( { size: 0.1 } );\n\t\tdefaultPointMaterial.name = 'defaultPointMaterial';\n\n\t\tlet runtimeMaterials = {};\n\t\truntimeMaterials[ defaultMaterial.name ] = defaultMaterial;\n\t\truntimeMaterials[ defaultVertexColorMaterial.name ] = defaultVertexColorMaterial;\n\t\truntimeMaterials[ defaultLineMaterial.name ] = defaultLineMaterial;\n\t\truntimeMaterials[ defaultPointMaterial.name ] = defaultPointMaterial;\n\n\t\tthis.addMaterials( runtimeMaterials, overrideExisting );\n\n\t},\n\n\t/**\n\t * Updates the materials with contained material objects (sync) or from alteration instructions (async).\n\t *\n\t * @param {Object} materialPayload Material update instructions\n\t * @returns {Object} Map of {@link Material}\n\t */\n\taddPayloadMaterials: function ( materialPayload ) {\n\n\t\tlet material, materialName;\n\t\tlet materialCloneInstructions = materialPayload.materials.materialCloneInstructions;\n\t\tlet newMaterials = {};\n\n\t\tif ( materialCloneInstructions !== undefined && materialCloneInstructions !== null ) {\n\n\t\t\tlet materialNameOrg = materialCloneInstructions.materialNameOrg;\n\t\t\tmaterialNameOrg = ( materialNameOrg !== undefined && materialNameOrg !== null ) ? materialNameOrg : \"\";\n\t\t\tlet materialOrg = this.materials[ materialNameOrg ];\n\t\t\tif ( materialOrg ) {\n\n\t\t\t\tmaterial = materialOrg.clone();\n\n\t\t\t\tmaterialName = materialCloneInstructions.materialName;\n\t\t\t\tmaterial.name = materialName;\n\n\t\t\t\tObject.assign( material, materialCloneInstructions.materialProperties );\n\n\t\t\t\tthis.materials[ materialName ] = material;\n\t\t\t\tnewMaterials[ materialName ] = material;\n\n\t\t\t} else {\n\n\t\t\t\tif ( this.logging.enabled ) {\n\n\t\t\t\t\tconsole.info( 'Requested material \"' + materialNameOrg + '\" is not available!' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tlet materials = materialPayload.materials.serializedMaterials;\n\t\tif ( materials !== undefined && materials !== null && Object.keys( materials ).length > 0 ) {\n\n\t\t\tlet loader = new MaterialLoader();\n\t\t\tlet materialJson;\n\t\t\tfor ( materialName in materials ) {\n\n\t\t\t\tmaterialJson = materials[ materialName ];\n\t\t\t\tif ( materialJson !== undefined && materialJson !== null ) {\n\n\t\t\t\t\tmaterial = loader.parse( materialJson );\n\t\t\t\t\tif ( this.logging.enabled ) {\n\n\t\t\t\t\t\tconsole.info( 'De-serialized material with name \"' + materialName + '\" will be added.' );\n\n\t\t\t\t\t}\n\t\t\t\t\tthis.materials[ materialName ] = material;\n\t\t\t\t\tnewMaterials[ materialName ] = material;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\t\tmaterials = materialPayload.materials.runtimeMaterials;\n\t\tnewMaterials = this.addMaterials( materials, true, newMaterials );\n\n\t\treturn newMaterials;\n\n\t},\n\n\t/**\n\t * Set materials loaded by any supplier of an Array of {@link Material}.\n\t *\n\t * @param materials Object with named {@link Material}\n\t * @param overrideExisting boolean Override existing material\n\t * @param newMaterials [Object] with named {@link Material}\n\t */\n\taddMaterials: function ( materials, overrideExisting, newMaterials ) {\n\n\t\tif ( newMaterials === undefined || newMaterials === null ) {\n\n\t\t\tnewMaterials = {};\n\n\t\t}\n\t\tif ( materials !== undefined && materials !== null && Object.keys( materials ).length > 0 ) {\n\n\t\t\tlet material;\n\t\t\tlet existingMaterial;\n\t\t\tlet add;\n\t\t\tfor ( let materialName in materials ) {\n\n\t\t\t\tmaterial = materials[ materialName ];\n\t\t\t\tadd = overrideExisting === true;\n\t\t\t\tif ( ! add ) {\n\n\t\t\t\t\texistingMaterial = this.materials[ materialName ];\n\t\t\t\t\tadd = ( existingMaterial === null || existingMaterial === undefined );\n\n\t\t\t\t}\n\t\t\t\tif ( add ) {\n\n\t\t\t\t\tthis.materials[ materialName ] = material;\n\t\t\t\t\tnewMaterials[ materialName ] = material;\n\n\t\t\t\t}\n\t\t\t\tif ( this.logging.enabled && this.logging.debug ) {\n\n\t\t\t\t\tconsole.info( 'Material with name \"' + materialName + '\" was added.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.callbacks.onLoadMaterials ) {\n\n\t\t\tthis.callbacks.onLoadMaterials( newMaterials );\n\n\t\t}\n\t\treturn newMaterials;\n\n\t},\n\n\t/**\n\t * Returns the mapping object of material name and corresponding material.\n\t *\n\t * @returns {Object} Map of {@link Material}\n\t */\n\tgetMaterials: function () {\n\n\t\treturn this.materials;\n\n\t},\n\n\t/**\n\t *\n\t * @param {String} materialName\n\t * @returns {Material}\n\t */\n\tgetMaterial: function ( materialName ) {\n\n\t\treturn this.materials[ materialName ];\n\n\t},\n\n\t/**\n\t * Returns the mapping object of material name and corresponding jsonified material.\n\t *\n\t * @returns {Object} Map of Materials in JSON representation\n\t */\n\tgetMaterialsJSON: function () {\n\n\t\tlet materialsJSON = {};\n\t\tlet material;\n\t\tfor ( let materialName in this.materials ) {\n\n\t\t\tmaterial = this.materials[ materialName ];\n\t\t\tmaterialsJSON[ materialName ] = material.toJSON();\n\n\t\t}\n\n\t\treturn materialsJSON;\n\n\t},\n\n\t/**\n\t * Removes all materials\n\t */\n\tclearMaterials: function () {\n\n\t\tthis.materials = {};\n\n\t}\n\n};\n\nexport { MaterialHandler };\n"]}]}