{"remainingRequest":"E:\\自己的项目\\three_test\\node_modules\\babel-loader\\lib\\index.js!E:\\自己的项目\\three_test\\src\\assets\\jsm\\loaders\\SVGLoader.js","dependencies":[{"path":"E:\\自己的项目\\three_test\\src\\assets\\jsm\\loaders\\SVGLoader.js","mtime":1581176979126},{"path":"E:\\自己的项目\\three_test\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\自己的项目\\three_test\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsbCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluZGV4LW9mIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubGFzdC1pbmRleC1vZiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnBhcnNlLWZsb2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcubWF0Y2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnN1YiI7CgovKioKICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS8KICogQGF1dGhvciB6ejg1IC8gaHR0cDovL2pvc2h1YWtvby5jb20vCiAqIEBhdXRob3IgeW9tYm9wcmltZSAvIGh0dHBzOi8veW9tYm8ub3JnCiAqLwppbXBvcnQgeyBCdWZmZXJHZW9tZXRyeSwgQ29sb3IsIEZpbGVMb2FkZXIsIEZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUsIExvYWRlciwgTWF0cml4MywgUGF0aCwgU2hhcGVQYXRoLCBWZWN0b3IyLCBWZWN0b3IzIH0gZnJvbSAiLi4vLi4vanMvdGhyZWUubW9kdWxlLmpzIjsKCnZhciBTVkdMb2FkZXIgPSBmdW5jdGlvbiBTVkdMb2FkZXIobWFuYWdlcikgewogIExvYWRlci5jYWxsKHRoaXMsIG1hbmFnZXIpOwp9OwoKU1ZHTG9hZGVyLnByb3RvdHlwZSA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShMb2FkZXIucHJvdG90eXBlKSwgewogIGNvbnN0cnVjdG9yOiBTVkdMb2FkZXIsCiAgbG9hZDogZnVuY3Rpb24gbG9hZCh1cmwsIG9uTG9hZCwgb25Qcm9ncmVzcywgb25FcnJvcikgewogICAgdmFyIHNjb3BlID0gdGhpczsKICAgIHZhciBsb2FkZXIgPSBuZXcgRmlsZUxvYWRlcihzY29wZS5tYW5hZ2VyKTsKICAgIGxvYWRlci5zZXRQYXRoKHNjb3BlLnBhdGgpOwogICAgbG9hZGVyLmxvYWQodXJsLCBmdW5jdGlvbiAodGV4dCkgewogICAgICBvbkxvYWQoc2NvcGUucGFyc2UodGV4dCkpOwogICAgfSwgb25Qcm9ncmVzcywgb25FcnJvcik7CiAgfSwKICBwYXJzZTogZnVuY3Rpb24gcGFyc2UodGV4dCkgewogICAgZnVuY3Rpb24gcGFyc2VOb2RlKG5vZGUsIHN0eWxlKSB7CiAgICAgIGlmIChub2RlLm5vZGVUeXBlICE9PSAxKSByZXR1cm47CiAgICAgIHZhciB0cmFuc2Zvcm0gPSBnZXROb2RlVHJhbnNmb3JtKG5vZGUpOwogICAgICB2YXIgcGF0aCA9IG51bGw7CgogICAgICBzd2l0Y2ggKG5vZGUubm9kZU5hbWUpIHsKICAgICAgICBjYXNlICdzdmcnOgogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgJ2cnOgogICAgICAgICAgc3R5bGUgPSBwYXJzZVN0eWxlKG5vZGUsIHN0eWxlKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICdwYXRoJzoKICAgICAgICAgIHN0eWxlID0gcGFyc2VTdHlsZShub2RlLCBzdHlsZSk7CiAgICAgICAgICBpZiAobm9kZS5oYXNBdHRyaWJ1dGUoJ2QnKSkgcGF0aCA9IHBhcnNlUGF0aE5vZGUobm9kZSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAncmVjdCc6CiAgICAgICAgICBzdHlsZSA9IHBhcnNlU3R5bGUobm9kZSwgc3R5bGUpOwogICAgICAgICAgcGF0aCA9IHBhcnNlUmVjdE5vZGUobm9kZSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAncG9seWdvbic6CiAgICAgICAgICBzdHlsZSA9IHBhcnNlU3R5bGUobm9kZSwgc3R5bGUpOwogICAgICAgICAgcGF0aCA9IHBhcnNlUG9seWdvbk5vZGUobm9kZSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAncG9seWxpbmUnOgogICAgICAgICAgc3R5bGUgPSBwYXJzZVN0eWxlKG5vZGUsIHN0eWxlKTsKICAgICAgICAgIHBhdGggPSBwYXJzZVBvbHlsaW5lTm9kZShub2RlKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICdjaXJjbGUnOgogICAgICAgICAgc3R5bGUgPSBwYXJzZVN0eWxlKG5vZGUsIHN0eWxlKTsKICAgICAgICAgIHBhdGggPSBwYXJzZUNpcmNsZU5vZGUobm9kZSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAnZWxsaXBzZSc6CiAgICAgICAgICBzdHlsZSA9IHBhcnNlU3R5bGUobm9kZSwgc3R5bGUpOwogICAgICAgICAgcGF0aCA9IHBhcnNlRWxsaXBzZU5vZGUobm9kZSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAnbGluZSc6CiAgICAgICAgICBzdHlsZSA9IHBhcnNlU3R5bGUobm9kZSwgc3R5bGUpOwogICAgICAgICAgcGF0aCA9IHBhcnNlTGluZU5vZGUobm9kZSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIGNvbnNvbGUubG9nKG5vZGUpOwogICAgICB9CgogICAgICBpZiAocGF0aCkgewogICAgICAgIGlmIChzdHlsZS5maWxsICE9PSB1bmRlZmluZWQgJiYgc3R5bGUuZmlsbCAhPT0gJ25vbmUnKSB7CiAgICAgICAgICBwYXRoLmNvbG9yLnNldFN0eWxlKHN0eWxlLmZpbGwpOwogICAgICAgIH0KCiAgICAgICAgdHJhbnNmb3JtUGF0aChwYXRoLCBjdXJyZW50VHJhbnNmb3JtKTsKICAgICAgICBwYXRocy5wdXNoKHBhdGgpOwogICAgICAgIHBhdGgudXNlckRhdGEgPSB7CiAgICAgICAgICBub2RlOiBub2RlLAogICAgICAgICAgc3R5bGU6IHN0eWxlCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgdmFyIG5vZGVzID0gbm9kZS5jaGlsZE5vZGVzOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKykgewogICAgICAgIHBhcnNlTm9kZShub2Rlc1tpXSwgc3R5bGUpOwogICAgICB9CgogICAgICBpZiAodHJhbnNmb3JtKSB7CiAgICAgICAgdHJhbnNmb3JtU3RhY2sucG9wKCk7CgogICAgICAgIGlmICh0cmFuc2Zvcm1TdGFjay5sZW5ndGggPiAwKSB7CiAgICAgICAgICBjdXJyZW50VHJhbnNmb3JtLmNvcHkodHJhbnNmb3JtU3RhY2tbdHJhbnNmb3JtU3RhY2subGVuZ3RoIC0gMV0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjdXJyZW50VHJhbnNmb3JtLmlkZW50aXR5KCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gcGFyc2VQYXRoTm9kZShub2RlKSB7CiAgICAgIHZhciBwYXRoID0gbmV3IFNoYXBlUGF0aCgpOwogICAgICB2YXIgcG9pbnQgPSBuZXcgVmVjdG9yMigpOwogICAgICB2YXIgY29udHJvbCA9IG5ldyBWZWN0b3IyKCk7CiAgICAgIHZhciBmaXJzdFBvaW50ID0gbmV3IFZlY3RvcjIoKTsKICAgICAgdmFyIGlzRmlyc3RQb2ludCA9IHRydWU7CiAgICAgIHZhciBkb1NldEZpcnN0UG9pbnQgPSBmYWxzZTsKICAgICAgdmFyIGQgPSBub2RlLmdldEF0dHJpYnV0ZSgnZCcpOyAvLyBjb25zb2xlLmxvZyggZCApOwoKICAgICAgdmFyIGNvbW1hbmRzID0gZC5tYXRjaCgvW2EtZGYtel1bXmEtZGYtel0qL2lnKTsKCiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gY29tbWFuZHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgdmFyIGNvbW1hbmQgPSBjb21tYW5kc1tpXTsKICAgICAgICB2YXIgdHlwZSA9IGNvbW1hbmQuY2hhckF0KDApOwogICAgICAgIHZhciBkYXRhID0gY29tbWFuZC5zdWJzdHIoMSkudHJpbSgpOwoKICAgICAgICBpZiAoaXNGaXJzdFBvaW50ID09PSB0cnVlKSB7CiAgICAgICAgICBkb1NldEZpcnN0UG9pbnQgPSB0cnVlOwogICAgICAgICAgaXNGaXJzdFBvaW50ID0gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICAgIGNhc2UgJ00nOgogICAgICAgICAgICB2YXIgbnVtYmVycyA9IHBhcnNlRmxvYXRzKGRhdGEpOwoKICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGpsID0gbnVtYmVycy5sZW5ndGg7IGogPCBqbDsgaiArPSAyKSB7CiAgICAgICAgICAgICAgcG9pbnQueCA9IG51bWJlcnNbaiArIDBdOwogICAgICAgICAgICAgIHBvaW50LnkgPSBudW1iZXJzW2ogKyAxXTsKICAgICAgICAgICAgICBjb250cm9sLnggPSBwb2ludC54OwogICAgICAgICAgICAgIGNvbnRyb2wueSA9IHBvaW50Lnk7CgogICAgICAgICAgICAgIGlmIChqID09PSAwKSB7CiAgICAgICAgICAgICAgICBwYXRoLm1vdmVUbyhwb2ludC54LCBwb2ludC55KTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcGF0aC5saW5lVG8ocG9pbnQueCwgcG9pbnQueSk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAoaiA9PT0gMCAmJiBkb1NldEZpcnN0UG9pbnQgPT09IHRydWUpIGZpcnN0UG9pbnQuY29weShwb2ludCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgJ0gnOgogICAgICAgICAgICB2YXIgbnVtYmVycyA9IHBhcnNlRmxvYXRzKGRhdGEpOwoKICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGpsID0gbnVtYmVycy5sZW5ndGg7IGogPCBqbDsgaisrKSB7CiAgICAgICAgICAgICAgcG9pbnQueCA9IG51bWJlcnNbal07CiAgICAgICAgICAgICAgY29udHJvbC54ID0gcG9pbnQueDsKICAgICAgICAgICAgICBjb250cm9sLnkgPSBwb2ludC55OwogICAgICAgICAgICAgIHBhdGgubGluZVRvKHBvaW50LngsIHBvaW50LnkpOwogICAgICAgICAgICAgIGlmIChqID09PSAwICYmIGRvU2V0Rmlyc3RQb2ludCA9PT0gdHJ1ZSkgZmlyc3RQb2ludC5jb3B5KHBvaW50KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAnVic6CiAgICAgICAgICAgIHZhciBudW1iZXJzID0gcGFyc2VGbG9hdHMoZGF0YSk7CgogICAgICAgICAgICBmb3IgKHZhciBqID0gMCwgamwgPSBudW1iZXJzLmxlbmd0aDsgaiA8IGpsOyBqKyspIHsKICAgICAgICAgICAgICBwb2ludC55ID0gbnVtYmVyc1tqXTsKICAgICAgICAgICAgICBjb250cm9sLnggPSBwb2ludC54OwogICAgICAgICAgICAgIGNvbnRyb2wueSA9IHBvaW50Lnk7CiAgICAgICAgICAgICAgcGF0aC5saW5lVG8ocG9pbnQueCwgcG9pbnQueSk7CiAgICAgICAgICAgICAgaWYgKGogPT09IDAgJiYgZG9TZXRGaXJzdFBvaW50ID09PSB0cnVlKSBmaXJzdFBvaW50LmNvcHkocG9pbnQpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlICdMJzoKICAgICAgICAgICAgdmFyIG51bWJlcnMgPSBwYXJzZUZsb2F0cyhkYXRhKTsKCiAgICAgICAgICAgIGZvciAodmFyIGogPSAwLCBqbCA9IG51bWJlcnMubGVuZ3RoOyBqIDwgamw7IGogKz0gMikgewogICAgICAgICAgICAgIHBvaW50LnggPSBudW1iZXJzW2ogKyAwXTsKICAgICAgICAgICAgICBwb2ludC55ID0gbnVtYmVyc1tqICsgMV07CiAgICAgICAgICAgICAgY29udHJvbC54ID0gcG9pbnQueDsKICAgICAgICAgICAgICBjb250cm9sLnkgPSBwb2ludC55OwogICAgICAgICAgICAgIHBhdGgubGluZVRvKHBvaW50LngsIHBvaW50LnkpOwogICAgICAgICAgICAgIGlmIChqID09PSAwICYmIGRvU2V0Rmlyc3RQb2ludCA9PT0gdHJ1ZSkgZmlyc3RQb2ludC5jb3B5KHBvaW50KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAnQyc6CiAgICAgICAgICAgIHZhciBudW1iZXJzID0gcGFyc2VGbG9hdHMoZGF0YSk7CgogICAgICAgICAgICBmb3IgKHZhciBqID0gMCwgamwgPSBudW1iZXJzLmxlbmd0aDsgaiA8IGpsOyBqICs9IDYpIHsKICAgICAgICAgICAgICBwYXRoLmJlemllckN1cnZlVG8obnVtYmVyc1tqICsgMF0sIG51bWJlcnNbaiArIDFdLCBudW1iZXJzW2ogKyAyXSwgbnVtYmVyc1tqICsgM10sIG51bWJlcnNbaiArIDRdLCBudW1iZXJzW2ogKyA1XSk7CiAgICAgICAgICAgICAgY29udHJvbC54ID0gbnVtYmVyc1tqICsgMl07CiAgICAgICAgICAgICAgY29udHJvbC55ID0gbnVtYmVyc1tqICsgM107CiAgICAgICAgICAgICAgcG9pbnQueCA9IG51bWJlcnNbaiArIDRdOwogICAgICAgICAgICAgIHBvaW50LnkgPSBudW1iZXJzW2ogKyA1XTsKICAgICAgICAgICAgICBpZiAoaiA9PT0gMCAmJiBkb1NldEZpcnN0UG9pbnQgPT09IHRydWUpIGZpcnN0UG9pbnQuY29weShwb2ludCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgJ1MnOgogICAgICAgICAgICB2YXIgbnVtYmVycyA9IHBhcnNlRmxvYXRzKGRhdGEpOwoKICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGpsID0gbnVtYmVycy5sZW5ndGg7IGogPCBqbDsgaiArPSA0KSB7CiAgICAgICAgICAgICAgcGF0aC5iZXppZXJDdXJ2ZVRvKGdldFJlZmxlY3Rpb24ocG9pbnQueCwgY29udHJvbC54KSwgZ2V0UmVmbGVjdGlvbihwb2ludC55LCBjb250cm9sLnkpLCBudW1iZXJzW2ogKyAwXSwgbnVtYmVyc1tqICsgMV0sIG51bWJlcnNbaiArIDJdLCBudW1iZXJzW2ogKyAzXSk7CiAgICAgICAgICAgICAgY29udHJvbC54ID0gbnVtYmVyc1tqICsgMF07CiAgICAgICAgICAgICAgY29udHJvbC55ID0gbnVtYmVyc1tqICsgMV07CiAgICAgICAgICAgICAgcG9pbnQueCA9IG51bWJlcnNbaiArIDJdOwogICAgICAgICAgICAgIHBvaW50LnkgPSBudW1iZXJzW2ogKyAzXTsKICAgICAgICAgICAgICBpZiAoaiA9PT0gMCAmJiBkb1NldEZpcnN0UG9pbnQgPT09IHRydWUpIGZpcnN0UG9pbnQuY29weShwb2ludCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgJ1EnOgogICAgICAgICAgICB2YXIgbnVtYmVycyA9IHBhcnNlRmxvYXRzKGRhdGEpOwoKICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGpsID0gbnVtYmVycy5sZW5ndGg7IGogPCBqbDsgaiArPSA0KSB7CiAgICAgICAgICAgICAgcGF0aC5xdWFkcmF0aWNDdXJ2ZVRvKG51bWJlcnNbaiArIDBdLCBudW1iZXJzW2ogKyAxXSwgbnVtYmVyc1tqICsgMl0sIG51bWJlcnNbaiArIDNdKTsKICAgICAgICAgICAgICBjb250cm9sLnggPSBudW1iZXJzW2ogKyAwXTsKICAgICAgICAgICAgICBjb250cm9sLnkgPSBudW1iZXJzW2ogKyAxXTsKICAgICAgICAgICAgICBwb2ludC54ID0gbnVtYmVyc1tqICsgMl07CiAgICAgICAgICAgICAgcG9pbnQueSA9IG51bWJlcnNbaiArIDNdOwogICAgICAgICAgICAgIGlmIChqID09PSAwICYmIGRvU2V0Rmlyc3RQb2ludCA9PT0gdHJ1ZSkgZmlyc3RQb2ludC5jb3B5KHBvaW50KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAnVCc6CiAgICAgICAgICAgIHZhciBudW1iZXJzID0gcGFyc2VGbG9hdHMoZGF0YSk7CgogICAgICAgICAgICBmb3IgKHZhciBqID0gMCwgamwgPSBudW1iZXJzLmxlbmd0aDsgaiA8IGpsOyBqICs9IDIpIHsKICAgICAgICAgICAgICB2YXIgcnggPSBnZXRSZWZsZWN0aW9uKHBvaW50LngsIGNvbnRyb2wueCk7CiAgICAgICAgICAgICAgdmFyIHJ5ID0gZ2V0UmVmbGVjdGlvbihwb2ludC55LCBjb250cm9sLnkpOwogICAgICAgICAgICAgIHBhdGgucXVhZHJhdGljQ3VydmVUbyhyeCwgcnksIG51bWJlcnNbaiArIDBdLCBudW1iZXJzW2ogKyAxXSk7CiAgICAgICAgICAgICAgY29udHJvbC54ID0gcng7CiAgICAgICAgICAgICAgY29udHJvbC55ID0gcnk7CiAgICAgICAgICAgICAgcG9pbnQueCA9IG51bWJlcnNbaiArIDBdOwogICAgICAgICAgICAgIHBvaW50LnkgPSBudW1iZXJzW2ogKyAxXTsKICAgICAgICAgICAgICBpZiAoaiA9PT0gMCAmJiBkb1NldEZpcnN0UG9pbnQgPT09IHRydWUpIGZpcnN0UG9pbnQuY29weShwb2ludCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgJ0EnOgogICAgICAgICAgICB2YXIgbnVtYmVycyA9IHBhcnNlRmxvYXRzKGRhdGEpOwoKICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGpsID0gbnVtYmVycy5sZW5ndGg7IGogPCBqbDsgaiArPSA3KSB7CiAgICAgICAgICAgICAgdmFyIHN0YXJ0ID0gcG9pbnQuY2xvbmUoKTsKICAgICAgICAgICAgICBwb2ludC54ID0gbnVtYmVyc1tqICsgNV07CiAgICAgICAgICAgICAgcG9pbnQueSA9IG51bWJlcnNbaiArIDZdOwogICAgICAgICAgICAgIGNvbnRyb2wueCA9IHBvaW50Lng7CiAgICAgICAgICAgICAgY29udHJvbC55ID0gcG9pbnQueTsKICAgICAgICAgICAgICBwYXJzZUFyY0NvbW1hbmQocGF0aCwgbnVtYmVyc1tqXSwgbnVtYmVyc1tqICsgMV0sIG51bWJlcnNbaiArIDJdLCBudW1iZXJzW2ogKyAzXSwgbnVtYmVyc1tqICsgNF0sIHN0YXJ0LCBwb2ludCk7CiAgICAgICAgICAgICAgaWYgKGogPT09IDAgJiYgZG9TZXRGaXJzdFBvaW50ID09PSB0cnVlKSBmaXJzdFBvaW50LmNvcHkocG9pbnQpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlICdtJzoKICAgICAgICAgICAgdmFyIG51bWJlcnMgPSBwYXJzZUZsb2F0cyhkYXRhKTsKCiAgICAgICAgICAgIGZvciAodmFyIGogPSAwLCBqbCA9IG51bWJlcnMubGVuZ3RoOyBqIDwgamw7IGogKz0gMikgewogICAgICAgICAgICAgIHBvaW50LnggKz0gbnVtYmVyc1tqICsgMF07CiAgICAgICAgICAgICAgcG9pbnQueSArPSBudW1iZXJzW2ogKyAxXTsKICAgICAgICAgICAgICBjb250cm9sLnggPSBwb2ludC54OwogICAgICAgICAgICAgIGNvbnRyb2wueSA9IHBvaW50Lnk7CgogICAgICAgICAgICAgIGlmIChqID09PSAwKSB7CiAgICAgICAgICAgICAgICBwYXRoLm1vdmVUbyhwb2ludC54LCBwb2ludC55KTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcGF0aC5saW5lVG8ocG9pbnQueCwgcG9pbnQueSk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAoaiA9PT0gMCAmJiBkb1NldEZpcnN0UG9pbnQgPT09IHRydWUpIGZpcnN0UG9pbnQuY29weShwb2ludCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgJ2gnOgogICAgICAgICAgICB2YXIgbnVtYmVycyA9IHBhcnNlRmxvYXRzKGRhdGEpOwoKICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGpsID0gbnVtYmVycy5sZW5ndGg7IGogPCBqbDsgaisrKSB7CiAgICAgICAgICAgICAgcG9pbnQueCArPSBudW1iZXJzW2pdOwogICAgICAgICAgICAgIGNvbnRyb2wueCA9IHBvaW50Lng7CiAgICAgICAgICAgICAgY29udHJvbC55ID0gcG9pbnQueTsKICAgICAgICAgICAgICBwYXRoLmxpbmVUbyhwb2ludC54LCBwb2ludC55KTsKICAgICAgICAgICAgICBpZiAoaiA9PT0gMCAmJiBkb1NldEZpcnN0UG9pbnQgPT09IHRydWUpIGZpcnN0UG9pbnQuY29weShwb2ludCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgJ3YnOgogICAgICAgICAgICB2YXIgbnVtYmVycyA9IHBhcnNlRmxvYXRzKGRhdGEpOwoKICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGpsID0gbnVtYmVycy5sZW5ndGg7IGogPCBqbDsgaisrKSB7CiAgICAgICAgICAgICAgcG9pbnQueSArPSBudW1iZXJzW2pdOwogICAgICAgICAgICAgIGNvbnRyb2wueCA9IHBvaW50Lng7CiAgICAgICAgICAgICAgY29udHJvbC55ID0gcG9pbnQueTsKICAgICAgICAgICAgICBwYXRoLmxpbmVUbyhwb2ludC54LCBwb2ludC55KTsKICAgICAgICAgICAgICBpZiAoaiA9PT0gMCAmJiBkb1NldEZpcnN0UG9pbnQgPT09IHRydWUpIGZpcnN0UG9pbnQuY29weShwb2ludCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgJ2wnOgogICAgICAgICAgICB2YXIgbnVtYmVycyA9IHBhcnNlRmxvYXRzKGRhdGEpOwoKICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGpsID0gbnVtYmVycy5sZW5ndGg7IGogPCBqbDsgaiArPSAyKSB7CiAgICAgICAgICAgICAgcG9pbnQueCArPSBudW1iZXJzW2ogKyAwXTsKICAgICAgICAgICAgICBwb2ludC55ICs9IG51bWJlcnNbaiArIDFdOwogICAgICAgICAgICAgIGNvbnRyb2wueCA9IHBvaW50Lng7CiAgICAgICAgICAgICAgY29udHJvbC55ID0gcG9pbnQueTsKICAgICAgICAgICAgICBwYXRoLmxpbmVUbyhwb2ludC54LCBwb2ludC55KTsKICAgICAgICAgICAgICBpZiAoaiA9PT0gMCAmJiBkb1NldEZpcnN0UG9pbnQgPT09IHRydWUpIGZpcnN0UG9pbnQuY29weShwb2ludCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgJ2MnOgogICAgICAgICAgICB2YXIgbnVtYmVycyA9IHBhcnNlRmxvYXRzKGRhdGEpOwoKICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGpsID0gbnVtYmVycy5sZW5ndGg7IGogPCBqbDsgaiArPSA2KSB7CiAgICAgICAgICAgICAgcGF0aC5iZXppZXJDdXJ2ZVRvKHBvaW50LnggKyBudW1iZXJzW2ogKyAwXSwgcG9pbnQueSArIG51bWJlcnNbaiArIDFdLCBwb2ludC54ICsgbnVtYmVyc1tqICsgMl0sIHBvaW50LnkgKyBudW1iZXJzW2ogKyAzXSwgcG9pbnQueCArIG51bWJlcnNbaiArIDRdLCBwb2ludC55ICsgbnVtYmVyc1tqICsgNV0pOwogICAgICAgICAgICAgIGNvbnRyb2wueCA9IHBvaW50LnggKyBudW1iZXJzW2ogKyAyXTsKICAgICAgICAgICAgICBjb250cm9sLnkgPSBwb2ludC55ICsgbnVtYmVyc1tqICsgM107CiAgICAgICAgICAgICAgcG9pbnQueCArPSBudW1iZXJzW2ogKyA0XTsKICAgICAgICAgICAgICBwb2ludC55ICs9IG51bWJlcnNbaiArIDVdOwogICAgICAgICAgICAgIGlmIChqID09PSAwICYmIGRvU2V0Rmlyc3RQb2ludCA9PT0gdHJ1ZSkgZmlyc3RQb2ludC5jb3B5KHBvaW50KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAncyc6CiAgICAgICAgICAgIHZhciBudW1iZXJzID0gcGFyc2VGbG9hdHMoZGF0YSk7CgogICAgICAgICAgICBmb3IgKHZhciBqID0gMCwgamwgPSBudW1iZXJzLmxlbmd0aDsgaiA8IGpsOyBqICs9IDQpIHsKICAgICAgICAgICAgICBwYXRoLmJlemllckN1cnZlVG8oZ2V0UmVmbGVjdGlvbihwb2ludC54LCBjb250cm9sLngpLCBnZXRSZWZsZWN0aW9uKHBvaW50LnksIGNvbnRyb2wueSksIHBvaW50LnggKyBudW1iZXJzW2ogKyAwXSwgcG9pbnQueSArIG51bWJlcnNbaiArIDFdLCBwb2ludC54ICsgbnVtYmVyc1tqICsgMl0sIHBvaW50LnkgKyBudW1iZXJzW2ogKyAzXSk7CiAgICAgICAgICAgICAgY29udHJvbC54ID0gcG9pbnQueCArIG51bWJlcnNbaiArIDBdOwogICAgICAgICAgICAgIGNvbnRyb2wueSA9IHBvaW50LnkgKyBudW1iZXJzW2ogKyAxXTsKICAgICAgICAgICAgICBwb2ludC54ICs9IG51bWJlcnNbaiArIDJdOwogICAgICAgICAgICAgIHBvaW50LnkgKz0gbnVtYmVyc1tqICsgM107CiAgICAgICAgICAgICAgaWYgKGogPT09IDAgJiYgZG9TZXRGaXJzdFBvaW50ID09PSB0cnVlKSBmaXJzdFBvaW50LmNvcHkocG9pbnQpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlICdxJzoKICAgICAgICAgICAgdmFyIG51bWJlcnMgPSBwYXJzZUZsb2F0cyhkYXRhKTsKCiAgICAgICAgICAgIGZvciAodmFyIGogPSAwLCBqbCA9IG51bWJlcnMubGVuZ3RoOyBqIDwgamw7IGogKz0gNCkgewogICAgICAgICAgICAgIHBhdGgucXVhZHJhdGljQ3VydmVUbyhwb2ludC54ICsgbnVtYmVyc1tqICsgMF0sIHBvaW50LnkgKyBudW1iZXJzW2ogKyAxXSwgcG9pbnQueCArIG51bWJlcnNbaiArIDJdLCBwb2ludC55ICsgbnVtYmVyc1tqICsgM10pOwogICAgICAgICAgICAgIGNvbnRyb2wueCA9IHBvaW50LnggKyBudW1iZXJzW2ogKyAwXTsKICAgICAgICAgICAgICBjb250cm9sLnkgPSBwb2ludC55ICsgbnVtYmVyc1tqICsgMV07CiAgICAgICAgICAgICAgcG9pbnQueCArPSBudW1iZXJzW2ogKyAyXTsKICAgICAgICAgICAgICBwb2ludC55ICs9IG51bWJlcnNbaiArIDNdOwogICAgICAgICAgICAgIGlmIChqID09PSAwICYmIGRvU2V0Rmlyc3RQb2ludCA9PT0gdHJ1ZSkgZmlyc3RQb2ludC5jb3B5KHBvaW50KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAndCc6CiAgICAgICAgICAgIHZhciBudW1iZXJzID0gcGFyc2VGbG9hdHMoZGF0YSk7CgogICAgICAgICAgICBmb3IgKHZhciBqID0gMCwgamwgPSBudW1iZXJzLmxlbmd0aDsgaiA8IGpsOyBqICs9IDIpIHsKICAgICAgICAgICAgICB2YXIgcnggPSBnZXRSZWZsZWN0aW9uKHBvaW50LngsIGNvbnRyb2wueCk7CiAgICAgICAgICAgICAgdmFyIHJ5ID0gZ2V0UmVmbGVjdGlvbihwb2ludC55LCBjb250cm9sLnkpOwogICAgICAgICAgICAgIHBhdGgucXVhZHJhdGljQ3VydmVUbyhyeCwgcnksIHBvaW50LnggKyBudW1iZXJzW2ogKyAwXSwgcG9pbnQueSArIG51bWJlcnNbaiArIDFdKTsKICAgICAgICAgICAgICBjb250cm9sLnggPSByeDsKICAgICAgICAgICAgICBjb250cm9sLnkgPSByeTsKICAgICAgICAgICAgICBwb2ludC54ID0gcG9pbnQueCArIG51bWJlcnNbaiArIDBdOwogICAgICAgICAgICAgIHBvaW50LnkgPSBwb2ludC55ICsgbnVtYmVyc1tqICsgMV07CiAgICAgICAgICAgICAgaWYgKGogPT09IDAgJiYgZG9TZXRGaXJzdFBvaW50ID09PSB0cnVlKSBmaXJzdFBvaW50LmNvcHkocG9pbnQpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlICdhJzoKICAgICAgICAgICAgdmFyIG51bWJlcnMgPSBwYXJzZUZsb2F0cyhkYXRhKTsKCiAgICAgICAgICAgIGZvciAodmFyIGogPSAwLCBqbCA9IG51bWJlcnMubGVuZ3RoOyBqIDwgamw7IGogKz0gNykgewogICAgICAgICAgICAgIHZhciBzdGFydCA9IHBvaW50LmNsb25lKCk7CiAgICAgICAgICAgICAgcG9pbnQueCArPSBudW1iZXJzW2ogKyA1XTsKICAgICAgICAgICAgICBwb2ludC55ICs9IG51bWJlcnNbaiArIDZdOwogICAgICAgICAgICAgIGNvbnRyb2wueCA9IHBvaW50Lng7CiAgICAgICAgICAgICAgY29udHJvbC55ID0gcG9pbnQueTsKICAgICAgICAgICAgICBwYXJzZUFyY0NvbW1hbmQocGF0aCwgbnVtYmVyc1tqXSwgbnVtYmVyc1tqICsgMV0sIG51bWJlcnNbaiArIDJdLCBudW1iZXJzW2ogKyAzXSwgbnVtYmVyc1tqICsgNF0sIHN0YXJ0LCBwb2ludCk7CiAgICAgICAgICAgICAgaWYgKGogPT09IDAgJiYgZG9TZXRGaXJzdFBvaW50ID09PSB0cnVlKSBmaXJzdFBvaW50LmNvcHkocG9pbnQpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlICdaJzoKICAgICAgICAgIGNhc2UgJ3onOgogICAgICAgICAgICBwYXRoLmN1cnJlbnRQYXRoLmF1dG9DbG9zZSA9IHRydWU7CgogICAgICAgICAgICBpZiAocGF0aC5jdXJyZW50UGF0aC5jdXJ2ZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgIC8vIFJlc2V0IHBvaW50IHRvIGJlZ2lubmluZyBvZiBQYXRoCiAgICAgICAgICAgICAgcG9pbnQuY29weShmaXJzdFBvaW50KTsKICAgICAgICAgICAgICBwYXRoLmN1cnJlbnRQYXRoLmN1cnJlbnRQb2ludC5jb3B5KHBvaW50KTsKICAgICAgICAgICAgICBpc0ZpcnN0UG9pbnQgPSB0cnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICBjb25zb2xlLndhcm4oY29tbWFuZCk7CiAgICAgICAgfSAvLyBjb25zb2xlLmxvZyggdHlwZSwgcGFyc2VGbG9hdHMoIGRhdGEgKSwgcGFyc2VGbG9hdHMoIGRhdGEgKS5sZW5ndGggICkKCgogICAgICAgIGRvU2V0Rmlyc3RQb2ludCA9IGZhbHNlOwogICAgICB9CgogICAgICByZXR1cm4gcGF0aDsKICAgIH0KICAgIC8qKgogICAgICogaHR0cHM6Ly93d3cudzMub3JnL1RSL1NWRy9pbXBsbm90ZS5odG1sI0FyY0ltcGxlbWVudGF0aW9uTm90ZXMKICAgICAqIGh0dHBzOi8vbW9ydG9yYXkuY29tLzIwMTcvMDIvMTYvcmVuZGVyaW5nLWFuLXN2Zy1lbGxpcHRpY2FsLWFyYy1hcy1iZXppZXItY3VydmVzLyBBcHBlbmRpeDogRW5kcG9pbnQgdG8gY2VudGVyIGFyYyBjb252ZXJzaW9uCiAgICAgKiBGcm9tCiAgICAgKiByeCByeSB4LWF4aXMtcm90YXRpb24gbGFyZ2UtYXJjLWZsYWcgc3dlZXAtZmxhZyB4IHkKICAgICAqIFRvCiAgICAgKiBhWCwgYVksIHhSYWRpdXMsIHlSYWRpdXMsIGFTdGFydEFuZ2xlLCBhRW5kQW5nbGUsIGFDbG9ja3dpc2UsIGFSb3RhdGlvbgogICAgICovCgoKICAgIGZ1bmN0aW9uIHBhcnNlQXJjQ29tbWFuZChwYXRoLCByeCwgcnksIHhfYXhpc19yb3RhdGlvbiwgbGFyZ2VfYXJjX2ZsYWcsIHN3ZWVwX2ZsYWcsIHN0YXJ0LCBlbmQpIHsKICAgICAgeF9heGlzX3JvdGF0aW9uID0geF9heGlzX3JvdGF0aW9uICogTWF0aC5QSSAvIDE4MDsgLy8gRW5zdXJlIHJhZGlpIGFyZSBwb3NpdGl2ZQoKICAgICAgcnggPSBNYXRoLmFicyhyeCk7CiAgICAgIHJ5ID0gTWF0aC5hYnMocnkpOyAvLyBDb21wdXRlICh4MeKAsiwgeTHigLIpCgogICAgICB2YXIgZHgyID0gKHN0YXJ0LnggLSBlbmQueCkgLyAyLjA7CiAgICAgIHZhciBkeTIgPSAoc3RhcnQueSAtIGVuZC55KSAvIDIuMDsKICAgICAgdmFyIHgxcCA9IE1hdGguY29zKHhfYXhpc19yb3RhdGlvbikgKiBkeDIgKyBNYXRoLnNpbih4X2F4aXNfcm90YXRpb24pICogZHkyOwogICAgICB2YXIgeTFwID0gLU1hdGguc2luKHhfYXhpc19yb3RhdGlvbikgKiBkeDIgKyBNYXRoLmNvcyh4X2F4aXNfcm90YXRpb24pICogZHkyOyAvLyBDb21wdXRlIChjeOKAsiwgY3nigLIpCgogICAgICB2YXIgcnhzID0gcnggKiByeDsKICAgICAgdmFyIHJ5cyA9IHJ5ICogcnk7CiAgICAgIHZhciB4MXBzID0geDFwICogeDFwOwogICAgICB2YXIgeTFwcyA9IHkxcCAqIHkxcDsgLy8gRW5zdXJlIHJhZGlpIGFyZSBsYXJnZSBlbm91Z2gKCiAgICAgIHZhciBjciA9IHgxcHMgLyByeHMgKyB5MXBzIC8gcnlzOwoKICAgICAgaWYgKGNyID4gMSkgewogICAgICAgIC8vIHNjYWxlIHVwIHJ4LHJ5IGVxdWFsbHkgc28gY3IgPT0gMQogICAgICAgIHZhciBzID0gTWF0aC5zcXJ0KGNyKTsKICAgICAgICByeCA9IHMgKiByeDsKICAgICAgICByeSA9IHMgKiByeTsKICAgICAgICByeHMgPSByeCAqIHJ4OwogICAgICAgIHJ5cyA9IHJ5ICogcnk7CiAgICAgIH0KCiAgICAgIHZhciBkcSA9IHJ4cyAqIHkxcHMgKyByeXMgKiB4MXBzOwogICAgICB2YXIgcHEgPSAocnhzICogcnlzIC0gZHEpIC8gZHE7CiAgICAgIHZhciBxID0gTWF0aC5zcXJ0KE1hdGgubWF4KDAsIHBxKSk7CiAgICAgIGlmIChsYXJnZV9hcmNfZmxhZyA9PT0gc3dlZXBfZmxhZykgcSA9IC1xOwogICAgICB2YXIgY3hwID0gcSAqIHJ4ICogeTFwIC8gcnk7CiAgICAgIHZhciBjeXAgPSAtcSAqIHJ5ICogeDFwIC8gcng7IC8vIFN0ZXAgMzogQ29tcHV0ZSAoY3gsIGN5KSBmcm9tIChjeOKAsiwgY3nigLIpCgogICAgICB2YXIgY3ggPSBNYXRoLmNvcyh4X2F4aXNfcm90YXRpb24pICogY3hwIC0gTWF0aC5zaW4oeF9heGlzX3JvdGF0aW9uKSAqIGN5cCArIChzdGFydC54ICsgZW5kLngpIC8gMjsKICAgICAgdmFyIGN5ID0gTWF0aC5zaW4oeF9heGlzX3JvdGF0aW9uKSAqIGN4cCArIE1hdGguY29zKHhfYXhpc19yb3RhdGlvbikgKiBjeXAgKyAoc3RhcnQueSArIGVuZC55KSAvIDI7IC8vIFN0ZXAgNDogQ29tcHV0ZSDOuDEgYW5kIM6UzrgKCiAgICAgIHZhciB0aGV0YSA9IHN2Z0FuZ2xlKDEsIDAsICh4MXAgLSBjeHApIC8gcngsICh5MXAgLSBjeXApIC8gcnkpOwogICAgICB2YXIgZGVsdGEgPSBzdmdBbmdsZSgoeDFwIC0gY3hwKSAvIHJ4LCAoeTFwIC0gY3lwKSAvIHJ5LCAoLXgxcCAtIGN4cCkgLyByeCwgKC15MXAgLSBjeXApIC8gcnkpICUgKE1hdGguUEkgKiAyKTsKICAgICAgcGF0aC5jdXJyZW50UGF0aC5hYnNlbGxpcHNlKGN4LCBjeSwgcngsIHJ5LCB0aGV0YSwgdGhldGEgKyBkZWx0YSwgc3dlZXBfZmxhZyA9PT0gMCwgeF9heGlzX3JvdGF0aW9uKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzdmdBbmdsZSh1eCwgdXksIHZ4LCB2eSkgewogICAgICB2YXIgZG90ID0gdXggKiB2eCArIHV5ICogdnk7CiAgICAgIHZhciBsZW4gPSBNYXRoLnNxcnQodXggKiB1eCArIHV5ICogdXkpICogTWF0aC5zcXJ0KHZ4ICogdnggKyB2eSAqIHZ5KTsKICAgICAgdmFyIGFuZyA9IE1hdGguYWNvcyhNYXRoLm1heCgtMSwgTWF0aC5taW4oMSwgZG90IC8gbGVuKSkpOyAvLyBmbG9hdGluZyBwb2ludCBwcmVjaXNpb24sIHNsaWdodGx5IG92ZXIgdmFsdWVzIGFwcGVhcgoKICAgICAgaWYgKHV4ICogdnkgLSB1eSAqIHZ4IDwgMCkgYW5nID0gLWFuZzsKICAgICAgcmV0dXJuIGFuZzsKICAgIH0KICAgIC8qCiAgICAqIEFjY29yZGluZyB0byBodHRwczovL3d3dy53My5vcmcvVFIvU1ZHL3NoYXBlcy5odG1sI1JlY3RFbGVtZW50UlhBdHRyaWJ1dGUKICAgICogcm91bmRlZCBjb3JuZXIgc2hvdWxkIGJlIHJlbmRlcmVkIHRvIGVsbGlwdGljYWwgYXJjLCBidXQgYmV6aWVyIGN1cnZlIGRvZXMgdGhlIGpvYiB3ZWxsIGVub3VnaAogICAgKi8KCgogICAgZnVuY3Rpb24gcGFyc2VSZWN0Tm9kZShub2RlKSB7CiAgICAgIHZhciB4ID0gcGFyc2VGbG9hdChub2RlLmdldEF0dHJpYnV0ZSgneCcpIHx8IDApOwogICAgICB2YXIgeSA9IHBhcnNlRmxvYXQobm9kZS5nZXRBdHRyaWJ1dGUoJ3knKSB8fCAwKTsKICAgICAgdmFyIHJ4ID0gcGFyc2VGbG9hdChub2RlLmdldEF0dHJpYnV0ZSgncngnKSB8fCAwKTsKICAgICAgdmFyIHJ5ID0gcGFyc2VGbG9hdChub2RlLmdldEF0dHJpYnV0ZSgncnknKSB8fCAwKTsKICAgICAgdmFyIHcgPSBwYXJzZUZsb2F0KG5vZGUuZ2V0QXR0cmlidXRlKCd3aWR0aCcpKTsKICAgICAgdmFyIGggPSBwYXJzZUZsb2F0KG5vZGUuZ2V0QXR0cmlidXRlKCdoZWlnaHQnKSk7CiAgICAgIHZhciBwYXRoID0gbmV3IFNoYXBlUGF0aCgpOwogICAgICBwYXRoLm1vdmVUbyh4ICsgMiAqIHJ4LCB5KTsKICAgICAgcGF0aC5saW5lVG8oeCArIHcgLSAyICogcngsIHkpOwogICAgICBpZiAocnggIT09IDAgfHwgcnkgIT09IDApIHBhdGguYmV6aWVyQ3VydmVUbyh4ICsgdywgeSwgeCArIHcsIHksIHggKyB3LCB5ICsgMiAqIHJ5KTsKICAgICAgcGF0aC5saW5lVG8oeCArIHcsIHkgKyBoIC0gMiAqIHJ5KTsKICAgICAgaWYgKHJ4ICE9PSAwIHx8IHJ5ICE9PSAwKSBwYXRoLmJlemllckN1cnZlVG8oeCArIHcsIHkgKyBoLCB4ICsgdywgeSArIGgsIHggKyB3IC0gMiAqIHJ4LCB5ICsgaCk7CiAgICAgIHBhdGgubGluZVRvKHggKyAyICogcngsIHkgKyBoKTsKCiAgICAgIGlmIChyeCAhPT0gMCB8fCByeSAhPT0gMCkgewogICAgICAgIHBhdGguYmV6aWVyQ3VydmVUbyh4LCB5ICsgaCwgeCwgeSArIGgsIHgsIHkgKyBoIC0gMiAqIHJ5KTsKICAgICAgfQoKICAgICAgcGF0aC5saW5lVG8oeCwgeSArIDIgKiByeSk7CgogICAgICBpZiAocnggIT09IDAgfHwgcnkgIT09IDApIHsKICAgICAgICBwYXRoLmJlemllckN1cnZlVG8oeCwgeSwgeCwgeSwgeCArIDIgKiByeCwgeSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBwYXRoOwogICAgfQoKICAgIGZ1bmN0aW9uIHBhcnNlUG9seWdvbk5vZGUobm9kZSkgewogICAgICBmdW5jdGlvbiBpdGVyYXRvcihtYXRjaCwgYSwgYikgewogICAgICAgIHZhciB4ID0gcGFyc2VGbG9hdChhKTsKICAgICAgICB2YXIgeSA9IHBhcnNlRmxvYXQoYik7CgogICAgICAgIGlmIChpbmRleCA9PT0gMCkgewogICAgICAgICAgcGF0aC5tb3ZlVG8oeCwgeSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHBhdGgubGluZVRvKHgsIHkpOwogICAgICAgIH0KCiAgICAgICAgaW5kZXgrKzsKICAgICAgfQoKICAgICAgdmFyIHJlZ2V4ID0gLygtP1tcZFwuP10rKVssfFxzXSgtP1tcZFwuP10rKS9nOwogICAgICB2YXIgcGF0aCA9IG5ldyBTaGFwZVBhdGgoKTsKICAgICAgdmFyIGluZGV4ID0gMDsKICAgICAgbm9kZS5nZXRBdHRyaWJ1dGUoJ3BvaW50cycpLnJlcGxhY2UocmVnZXgsIGl0ZXJhdG9yKTsKICAgICAgcGF0aC5jdXJyZW50UGF0aC5hdXRvQ2xvc2UgPSB0cnVlOwogICAgICByZXR1cm4gcGF0aDsKICAgIH0KCiAgICBmdW5jdGlvbiBwYXJzZVBvbHlsaW5lTm9kZShub2RlKSB7CiAgICAgIGZ1bmN0aW9uIGl0ZXJhdG9yKG1hdGNoLCBhLCBiKSB7CiAgICAgICAgdmFyIHggPSBwYXJzZUZsb2F0KGEpOwogICAgICAgIHZhciB5ID0gcGFyc2VGbG9hdChiKTsKCiAgICAgICAgaWYgKGluZGV4ID09PSAwKSB7CiAgICAgICAgICBwYXRoLm1vdmVUbyh4LCB5KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcGF0aC5saW5lVG8oeCwgeSk7CiAgICAgICAgfQoKICAgICAgICBpbmRleCsrOwogICAgICB9CgogICAgICB2YXIgcmVnZXggPSAvKC0/W1xkXC4/XSspWyx8XHNdKC0/W1xkXC4/XSspL2c7CiAgICAgIHZhciBwYXRoID0gbmV3IFNoYXBlUGF0aCgpOwogICAgICB2YXIgaW5kZXggPSAwOwogICAgICBub2RlLmdldEF0dHJpYnV0ZSgncG9pbnRzJykucmVwbGFjZShyZWdleCwgaXRlcmF0b3IpOwogICAgICBwYXRoLmN1cnJlbnRQYXRoLmF1dG9DbG9zZSA9IGZhbHNlOwogICAgICByZXR1cm4gcGF0aDsKICAgIH0KCiAgICBmdW5jdGlvbiBwYXJzZUNpcmNsZU5vZGUobm9kZSkgewogICAgICB2YXIgeCA9IHBhcnNlRmxvYXQobm9kZS5nZXRBdHRyaWJ1dGUoJ2N4JykpOwogICAgICB2YXIgeSA9IHBhcnNlRmxvYXQobm9kZS5nZXRBdHRyaWJ1dGUoJ2N5JykpOwogICAgICB2YXIgciA9IHBhcnNlRmxvYXQobm9kZS5nZXRBdHRyaWJ1dGUoJ3InKSk7CiAgICAgIHZhciBzdWJwYXRoID0gbmV3IFBhdGgoKTsKICAgICAgc3VicGF0aC5hYnNhcmMoeCwgeSwgciwgMCwgTWF0aC5QSSAqIDIpOwogICAgICB2YXIgcGF0aCA9IG5ldyBTaGFwZVBhdGgoKTsKICAgICAgcGF0aC5zdWJQYXRocy5wdXNoKHN1YnBhdGgpOwogICAgICByZXR1cm4gcGF0aDsKICAgIH0KCiAgICBmdW5jdGlvbiBwYXJzZUVsbGlwc2VOb2RlKG5vZGUpIHsKICAgICAgdmFyIHggPSBwYXJzZUZsb2F0KG5vZGUuZ2V0QXR0cmlidXRlKCdjeCcpKTsKICAgICAgdmFyIHkgPSBwYXJzZUZsb2F0KG5vZGUuZ2V0QXR0cmlidXRlKCdjeScpKTsKICAgICAgdmFyIHJ4ID0gcGFyc2VGbG9hdChub2RlLmdldEF0dHJpYnV0ZSgncngnKSk7CiAgICAgIHZhciByeSA9IHBhcnNlRmxvYXQobm9kZS5nZXRBdHRyaWJ1dGUoJ3J5JykpOwogICAgICB2YXIgc3VicGF0aCA9IG5ldyBQYXRoKCk7CiAgICAgIHN1YnBhdGguYWJzZWxsaXBzZSh4LCB5LCByeCwgcnksIDAsIE1hdGguUEkgKiAyKTsKICAgICAgdmFyIHBhdGggPSBuZXcgU2hhcGVQYXRoKCk7CiAgICAgIHBhdGguc3ViUGF0aHMucHVzaChzdWJwYXRoKTsKICAgICAgcmV0dXJuIHBhdGg7CiAgICB9CgogICAgZnVuY3Rpb24gcGFyc2VMaW5lTm9kZShub2RlKSB7CiAgICAgIHZhciB4MSA9IHBhcnNlRmxvYXQobm9kZS5nZXRBdHRyaWJ1dGUoJ3gxJykpOwogICAgICB2YXIgeTEgPSBwYXJzZUZsb2F0KG5vZGUuZ2V0QXR0cmlidXRlKCd5MScpKTsKICAgICAgdmFyIHgyID0gcGFyc2VGbG9hdChub2RlLmdldEF0dHJpYnV0ZSgneDInKSk7CiAgICAgIHZhciB5MiA9IHBhcnNlRmxvYXQobm9kZS5nZXRBdHRyaWJ1dGUoJ3kyJykpOwogICAgICB2YXIgcGF0aCA9IG5ldyBTaGFwZVBhdGgoKTsKICAgICAgcGF0aC5tb3ZlVG8oeDEsIHkxKTsKICAgICAgcGF0aC5saW5lVG8oeDIsIHkyKTsKICAgICAgcGF0aC5jdXJyZW50UGF0aC5hdXRvQ2xvc2UgPSBmYWxzZTsKICAgICAgcmV0dXJuIHBhdGg7CiAgICB9IC8vCgoKICAgIGZ1bmN0aW9uIHBhcnNlU3R5bGUobm9kZSwgc3R5bGUpIHsKICAgICAgc3R5bGUgPSBPYmplY3QuYXNzaWduKHt9LCBzdHlsZSk7IC8vIGNsb25lIHN0eWxlCgogICAgICBmdW5jdGlvbiBhZGRTdHlsZShzdmdOYW1lLCBqc05hbWUsIGFkanVzdEZ1bmN0aW9uKSB7CiAgICAgICAgaWYgKGFkanVzdEZ1bmN0aW9uID09PSB1bmRlZmluZWQpIGFkanVzdEZ1bmN0aW9uID0gZnVuY3Rpb24gY29weSh2KSB7CiAgICAgICAgICByZXR1cm4gdjsKICAgICAgICB9OwogICAgICAgIGlmIChub2RlLmhhc0F0dHJpYnV0ZShzdmdOYW1lKSkgc3R5bGVbanNOYW1lXSA9IGFkanVzdEZ1bmN0aW9uKG5vZGUuZ2V0QXR0cmlidXRlKHN2Z05hbWUpKTsKICAgICAgICBpZiAobm9kZS5zdHlsZSAmJiBub2RlLnN0eWxlW3N2Z05hbWVdICE9PSAnJykgc3R5bGVbanNOYW1lXSA9IGFkanVzdEZ1bmN0aW9uKG5vZGUuc3R5bGVbc3ZnTmFtZV0pOwogICAgICB9CgogICAgICBmdW5jdGlvbiBjbGFtcCh2KSB7CiAgICAgICAgcmV0dXJuIE1hdGgubWF4KDAsIE1hdGgubWluKDEsIHBhcnNlRmxvYXQodikpKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gcG9zaXRpdmUodikgewogICAgICAgIHJldHVybiBNYXRoLm1heCgwLCBwYXJzZUZsb2F0KHYpKTsKICAgICAgfQoKICAgICAgYWRkU3R5bGUoJ2ZpbGwnLCAnZmlsbCcpOwogICAgICBhZGRTdHlsZSgnZmlsbC1vcGFjaXR5JywgJ2ZpbGxPcGFjaXR5JywgY2xhbXApOwogICAgICBhZGRTdHlsZSgnc3Ryb2tlJywgJ3N0cm9rZScpOwogICAgICBhZGRTdHlsZSgnc3Ryb2tlLW9wYWNpdHknLCAnc3Ryb2tlT3BhY2l0eScsIGNsYW1wKTsKICAgICAgYWRkU3R5bGUoJ3N0cm9rZS13aWR0aCcsICdzdHJva2VXaWR0aCcsIHBvc2l0aXZlKTsKICAgICAgYWRkU3R5bGUoJ3N0cm9rZS1saW5lam9pbicsICdzdHJva2VMaW5lSm9pbicpOwogICAgICBhZGRTdHlsZSgnc3Ryb2tlLWxpbmVjYXAnLCAnc3Ryb2tlTGluZUNhcCcpOwogICAgICBhZGRTdHlsZSgnc3Ryb2tlLW1pdGVybGltaXQnLCAnc3Ryb2tlTWl0ZXJMaW1pdCcsIHBvc2l0aXZlKTsKICAgICAgcmV0dXJuIHN0eWxlOwogICAgfSAvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9pbXBsbm90ZS5odG1sI1BhdGhFbGVtZW50SW1wbGVtZW50YXRpb25Ob3RlcwoKCiAgICBmdW5jdGlvbiBnZXRSZWZsZWN0aW9uKGEsIGIpIHsKICAgICAgcmV0dXJuIGEgLSAoYiAtIGEpOwogICAgfQoKICAgIGZ1bmN0aW9uIHBhcnNlRmxvYXRzKHN0cmluZykgewogICAgICB2YXIgYXJyYXkgPSBzdHJpbmcuc3BsaXQoL1tccyxdK3woPz1ccz9bK1wtXSkvKTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgbnVtYmVyID0gYXJyYXlbaV07IC8vIEhhbmRsZSB2YWx1ZXMgbGlrZSA0OC42MDM3LjcuOAogICAgICAgIC8vIFRPRE8gRmluZCBhIHJlZ2V4IGZvciB0aGlzCgogICAgICAgIGlmIChudW1iZXIuaW5kZXhPZignLicpICE9PSBudW1iZXIubGFzdEluZGV4T2YoJy4nKSkgewogICAgICAgICAgdmFyIHNwbGl0ID0gbnVtYmVyLnNwbGl0KCcuJyk7CgogICAgICAgICAgZm9yICh2YXIgcyA9IDI7IHMgPCBzcGxpdC5sZW5ndGg7IHMrKykgewogICAgICAgICAgICBhcnJheS5zcGxpY2UoaSArIHMgLSAxLCAwLCAnMC4nICsgc3BsaXRbc10pOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgYXJyYXlbaV0gPSBwYXJzZUZsb2F0KG51bWJlcik7CiAgICAgIH0KCiAgICAgIHJldHVybiBhcnJheTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXROb2RlVHJhbnNmb3JtKG5vZGUpIHsKICAgICAgaWYgKCFub2RlLmhhc0F0dHJpYnV0ZSgndHJhbnNmb3JtJykpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQoKICAgICAgdmFyIHRyYW5zZm9ybSA9IHBhcnNlTm9kZVRyYW5zZm9ybShub2RlKTsKCiAgICAgIGlmICh0cmFuc2Zvcm1TdGFjay5sZW5ndGggPiAwKSB7CiAgICAgICAgdHJhbnNmb3JtLnByZW11bHRpcGx5KHRyYW5zZm9ybVN0YWNrW3RyYW5zZm9ybVN0YWNrLmxlbmd0aCAtIDFdKTsKICAgICAgfQoKICAgICAgY3VycmVudFRyYW5zZm9ybS5jb3B5KHRyYW5zZm9ybSk7CiAgICAgIHRyYW5zZm9ybVN0YWNrLnB1c2godHJhbnNmb3JtKTsKICAgICAgcmV0dXJuIHRyYW5zZm9ybTsKICAgIH0KCiAgICBmdW5jdGlvbiBwYXJzZU5vZGVUcmFuc2Zvcm0obm9kZSkgewogICAgICB2YXIgdHJhbnNmb3JtID0gbmV3IE1hdHJpeDMoKTsKICAgICAgdmFyIGN1cnJlbnRUcmFuc2Zvcm0gPSB0ZW1wVHJhbnNmb3JtMDsKICAgICAgdmFyIHRyYW5zZm9ybXNUZXh0cyA9IG5vZGUuZ2V0QXR0cmlidXRlKCd0cmFuc2Zvcm0nKS5zcGxpdCgnKScpOwoKICAgICAgZm9yICh2YXIgdEluZGV4ID0gdHJhbnNmb3Jtc1RleHRzLmxlbmd0aCAtIDE7IHRJbmRleCA+PSAwOyB0SW5kZXgtLSkgewogICAgICAgIHZhciB0cmFuc2Zvcm1UZXh0ID0gdHJhbnNmb3Jtc1RleHRzW3RJbmRleF0udHJpbSgpOwogICAgICAgIGlmICh0cmFuc2Zvcm1UZXh0ID09PSAnJykgY29udGludWU7CiAgICAgICAgdmFyIG9wZW5QYXJQb3MgPSB0cmFuc2Zvcm1UZXh0LmluZGV4T2YoJygnKTsKICAgICAgICB2YXIgY2xvc2VQYXJQb3MgPSB0cmFuc2Zvcm1UZXh0Lmxlbmd0aDsKCiAgICAgICAgaWYgKG9wZW5QYXJQb3MgPiAwICYmIG9wZW5QYXJQb3MgPCBjbG9zZVBhclBvcykgewogICAgICAgICAgdmFyIHRyYW5zZm9ybVR5cGUgPSB0cmFuc2Zvcm1UZXh0LnN1YnN0cigwLCBvcGVuUGFyUG9zKTsKICAgICAgICAgIHZhciBhcnJheSA9IHBhcnNlRmxvYXRzKHRyYW5zZm9ybVRleHQuc3Vic3RyKG9wZW5QYXJQb3MgKyAxLCBjbG9zZVBhclBvcyAtIG9wZW5QYXJQb3MgLSAxKSk7CiAgICAgICAgICBjdXJyZW50VHJhbnNmb3JtLmlkZW50aXR5KCk7CgogICAgICAgICAgc3dpdGNoICh0cmFuc2Zvcm1UeXBlKSB7CiAgICAgICAgICAgIGNhc2UgInRyYW5zbGF0ZSI6CiAgICAgICAgICAgICAgaWYgKGFycmF5Lmxlbmd0aCA+PSAxKSB7CiAgICAgICAgICAgICAgICB2YXIgdHggPSBhcnJheVswXTsKICAgICAgICAgICAgICAgIHZhciB0eSA9IHR4OwoKICAgICAgICAgICAgICAgIGlmIChhcnJheS5sZW5ndGggPj0gMikgewogICAgICAgICAgICAgICAgICB0eSA9IGFycmF5WzFdOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGN1cnJlbnRUcmFuc2Zvcm0udHJhbnNsYXRlKHR4LCB0eSk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgInJvdGF0ZSI6CiAgICAgICAgICAgICAgaWYgKGFycmF5Lmxlbmd0aCA+PSAxKSB7CiAgICAgICAgICAgICAgICB2YXIgYW5nbGUgPSAwOwogICAgICAgICAgICAgICAgdmFyIGN4ID0gMDsKICAgICAgICAgICAgICAgIHZhciBjeSA9IDA7IC8vIEFuZ2xlCgogICAgICAgICAgICAgICAgYW5nbGUgPSAtYXJyYXlbMF0gKiBNYXRoLlBJIC8gMTgwOwoKICAgICAgICAgICAgICAgIGlmIChhcnJheS5sZW5ndGggPj0gMykgewogICAgICAgICAgICAgICAgICAvLyBDZW50ZXIgeCwgeQogICAgICAgICAgICAgICAgICBjeCA9IGFycmF5WzFdOwogICAgICAgICAgICAgICAgICBjeSA9IGFycmF5WzJdOwogICAgICAgICAgICAgICAgfSAvLyBSb3RhdGUgYXJvdW5kIGNlbnRlciAoY3gsIGN5KQoKCiAgICAgICAgICAgICAgICB0ZW1wVHJhbnNmb3JtMS5pZGVudGl0eSgpLnRyYW5zbGF0ZSgtY3gsIC1jeSk7CiAgICAgICAgICAgICAgICB0ZW1wVHJhbnNmb3JtMi5pZGVudGl0eSgpLnJvdGF0ZShhbmdsZSk7CiAgICAgICAgICAgICAgICB0ZW1wVHJhbnNmb3JtMy5tdWx0aXBseU1hdHJpY2VzKHRlbXBUcmFuc2Zvcm0yLCB0ZW1wVHJhbnNmb3JtMSk7CiAgICAgICAgICAgICAgICB0ZW1wVHJhbnNmb3JtMS5pZGVudGl0eSgpLnRyYW5zbGF0ZShjeCwgY3kpOwogICAgICAgICAgICAgICAgY3VycmVudFRyYW5zZm9ybS5tdWx0aXBseU1hdHJpY2VzKHRlbXBUcmFuc2Zvcm0xLCB0ZW1wVHJhbnNmb3JtMyk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgInNjYWxlIjoKICAgICAgICAgICAgICBpZiAoYXJyYXkubGVuZ3RoID49IDEpIHsKICAgICAgICAgICAgICAgIHZhciBzY2FsZVggPSBhcnJheVswXTsKICAgICAgICAgICAgICAgIHZhciBzY2FsZVkgPSBzY2FsZVg7CgogICAgICAgICAgICAgICAgaWYgKGFycmF5Lmxlbmd0aCA+PSAyKSB7CiAgICAgICAgICAgICAgICAgIHNjYWxlWSA9IGFycmF5WzFdOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGN1cnJlbnRUcmFuc2Zvcm0uc2NhbGUoc2NhbGVYLCBzY2FsZVkpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlICJza2V3WCI6CiAgICAgICAgICAgICAgaWYgKGFycmF5Lmxlbmd0aCA9PT0gMSkgewogICAgICAgICAgICAgICAgY3VycmVudFRyYW5zZm9ybS5zZXQoMSwgTWF0aC50YW4oYXJyYXlbMF0gKiBNYXRoLlBJIC8gMTgwKSwgMCwgMCwgMSwgMCwgMCwgMCwgMSk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgInNrZXdZIjoKICAgICAgICAgICAgICBpZiAoYXJyYXkubGVuZ3RoID09PSAxKSB7CiAgICAgICAgICAgICAgICBjdXJyZW50VHJhbnNmb3JtLnNldCgxLCAwLCAwLCBNYXRoLnRhbihhcnJheVswXSAqIE1hdGguUEkgLyAxODApLCAxLCAwLCAwLCAwLCAxKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAibWF0cml4IjoKICAgICAgICAgICAgICBpZiAoYXJyYXkubGVuZ3RoID09PSA2KSB7CiAgICAgICAgICAgICAgICBjdXJyZW50VHJhbnNmb3JtLnNldChhcnJheVswXSwgYXJyYXlbMl0sIGFycmF5WzRdLCBhcnJheVsxXSwgYXJyYXlbM10sIGFycmF5WzVdLCAwLCAwLCAxKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdHJhbnNmb3JtLnByZW11bHRpcGx5KGN1cnJlbnRUcmFuc2Zvcm0pOwogICAgICB9CgogICAgICByZXR1cm4gdHJhbnNmb3JtOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZm9ybVBhdGgocGF0aCwgbSkgewogICAgICBmdW5jdGlvbiB0cmFuc2ZWZWMyKHYyKSB7CiAgICAgICAgdGVtcFYzLnNldCh2Mi54LCB2Mi55LCAxKS5hcHBseU1hdHJpeDMobSk7CiAgICAgICAgdjIuc2V0KHRlbXBWMy54LCB0ZW1wVjMueSk7CiAgICAgIH0KCiAgICAgIHZhciBpc1JvdGF0ZWQgPSBpc1RyYW5zZm9ybVJvdGF0ZWQobSk7CiAgICAgIHZhciBzdWJQYXRocyA9IHBhdGguc3ViUGF0aHM7CgogICAgICBmb3IgKHZhciBpID0gMCwgbiA9IHN1YlBhdGhzLmxlbmd0aDsgaSA8IG47IGkrKykgewogICAgICAgIHZhciBzdWJQYXRoID0gc3ViUGF0aHNbaV07CiAgICAgICAgdmFyIGN1cnZlcyA9IHN1YlBhdGguY3VydmVzOwoKICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGN1cnZlcy5sZW5ndGg7IGorKykgewogICAgICAgICAgdmFyIGN1cnZlID0gY3VydmVzW2pdOwoKICAgICAgICAgIGlmIChjdXJ2ZS5pc0xpbmVDdXJ2ZSkgewogICAgICAgICAgICB0cmFuc2ZWZWMyKGN1cnZlLnYxKTsKICAgICAgICAgICAgdHJhbnNmVmVjMihjdXJ2ZS52Mik7CiAgICAgICAgICB9IGVsc2UgaWYgKGN1cnZlLmlzQ3ViaWNCZXppZXJDdXJ2ZSkgewogICAgICAgICAgICB0cmFuc2ZWZWMyKGN1cnZlLnYwKTsKICAgICAgICAgICAgdHJhbnNmVmVjMihjdXJ2ZS52MSk7CiAgICAgICAgICAgIHRyYW5zZlZlYzIoY3VydmUudjIpOwogICAgICAgICAgICB0cmFuc2ZWZWMyKGN1cnZlLnYzKTsKICAgICAgICAgIH0gZWxzZSBpZiAoY3VydmUuaXNRdWFkcmF0aWNCZXppZXJDdXJ2ZSkgewogICAgICAgICAgICB0cmFuc2ZWZWMyKGN1cnZlLnYwKTsKICAgICAgICAgICAgdHJhbnNmVmVjMihjdXJ2ZS52MSk7CiAgICAgICAgICAgIHRyYW5zZlZlYzIoY3VydmUudjIpOwogICAgICAgICAgfSBlbHNlIGlmIChjdXJ2ZS5pc0VsbGlwc2VDdXJ2ZSkgewogICAgICAgICAgICBpZiAoaXNSb3RhdGVkKSB7CiAgICAgICAgICAgICAgY29uc29sZS53YXJuKCJTVkdMb2FkZXI6IEVsbGlwdGljIGFyYyBvciBlbGxpcHNlIHJvdGF0aW9uIG9yIHNrZXdpbmcgaXMgbm90IGltcGxlbWVudGVkLiIpOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0ZW1wVjIuc2V0KGN1cnZlLmFYLCBjdXJ2ZS5hWSk7CiAgICAgICAgICAgIHRyYW5zZlZlYzIodGVtcFYyKTsKICAgICAgICAgICAgY3VydmUuYVggPSB0ZW1wVjIueDsKICAgICAgICAgICAgY3VydmUuYVkgPSB0ZW1wVjIueTsKICAgICAgICAgICAgY3VydmUueFJhZGl1cyAqPSBnZXRUcmFuc2Zvcm1TY2FsZVgobSk7CiAgICAgICAgICAgIGN1cnZlLnlSYWRpdXMgKj0gZ2V0VHJhbnNmb3JtU2NhbGVZKG0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGlzVHJhbnNmb3JtUm90YXRlZChtKSB7CiAgICAgIHJldHVybiBtLmVsZW1lbnRzWzFdICE9PSAwIHx8IG0uZWxlbWVudHNbM10gIT09IDA7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0VHJhbnNmb3JtU2NhbGVYKG0pIHsKICAgICAgdmFyIHRlID0gbS5lbGVtZW50czsKICAgICAgcmV0dXJuIE1hdGguc3FydCh0ZVswXSAqIHRlWzBdICsgdGVbMV0gKiB0ZVsxXSk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0VHJhbnNmb3JtU2NhbGVZKG0pIHsKICAgICAgdmFyIHRlID0gbS5lbGVtZW50czsKICAgICAgcmV0dXJuIE1hdGguc3FydCh0ZVszXSAqIHRlWzNdICsgdGVbNF0gKiB0ZVs0XSk7CiAgICB9IC8vCgoKICAgIGNvbnNvbGUubG9nKCdUSFJFRS5TVkdMb2FkZXInKTsKICAgIHZhciBwYXRocyA9IFtdOwogICAgdmFyIHRyYW5zZm9ybVN0YWNrID0gW107CiAgICB2YXIgdGVtcFRyYW5zZm9ybTAgPSBuZXcgTWF0cml4MygpOwogICAgdmFyIHRlbXBUcmFuc2Zvcm0xID0gbmV3IE1hdHJpeDMoKTsKICAgIHZhciB0ZW1wVHJhbnNmb3JtMiA9IG5ldyBNYXRyaXgzKCk7CiAgICB2YXIgdGVtcFRyYW5zZm9ybTMgPSBuZXcgTWF0cml4MygpOwogICAgdmFyIHRlbXBWMiA9IG5ldyBWZWN0b3IyKCk7CiAgICB2YXIgdGVtcFYzID0gbmV3IFZlY3RvcjMoKTsKICAgIHZhciBjdXJyZW50VHJhbnNmb3JtID0gbmV3IE1hdHJpeDMoKTsKICAgIGNvbnNvbGUudGltZSgnVEhSRUUuU1ZHTG9hZGVyOiBET01QYXJzZXInKTsKICAgIHZhciB4bWwgPSBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKHRleHQsICdpbWFnZS9zdmcreG1sJyk7IC8vIGFwcGxpY2F0aW9uL3htbAoKICAgIGNvbnNvbGUudGltZUVuZCgnVEhSRUUuU1ZHTG9hZGVyOiBET01QYXJzZXInKTsKICAgIGNvbnNvbGUudGltZSgnVEhSRUUuU1ZHTG9hZGVyOiBQYXJzZScpOwogICAgcGFyc2VOb2RlKHhtbC5kb2N1bWVudEVsZW1lbnQsIHsKICAgICAgZmlsbDogJyMwMDAnLAogICAgICBmaWxsT3BhY2l0eTogMSwKICAgICAgc3Ryb2tlT3BhY2l0eTogMSwKICAgICAgc3Ryb2tlV2lkdGg6IDEsCiAgICAgIHN0cm9rZUxpbmVKb2luOiAnbWl0ZXInLAogICAgICBzdHJva2VMaW5lQ2FwOiAnYnV0dCcsCiAgICAgIHN0cm9rZU1pdGVyTGltaXQ6IDQKICAgIH0pOwogICAgdmFyIGRhdGEgPSB7CiAgICAgIHBhdGhzOiBwYXRocywKICAgICAgeG1sOiB4bWwuZG9jdW1lbnRFbGVtZW50CiAgICB9OyAvLyBjb25zb2xlLmxvZyggcGF0aHMgKTsKCiAgICBjb25zb2xlLnRpbWVFbmQoJ1RIUkVFLlNWR0xvYWRlcjogUGFyc2UnKTsKICAgIHJldHVybiBkYXRhOwogIH0KfSk7CgpTVkdMb2FkZXIuZ2V0U3Ryb2tlU3R5bGUgPSBmdW5jdGlvbiAod2lkdGgsIGNvbG9yLCBsaW5lSm9pbiwgbGluZUNhcCwgbWl0ZXJMaW1pdCkgewogIC8vIFBhcmFtIHdpZHRoOiBTdHJva2Ugd2lkdGgKICAvLyBQYXJhbSBjb2xvcjogQXMgcmV0dXJuZWQgYnkgQ29sb3IuZ2V0U3R5bGUoKQogIC8vIFBhcmFtIGxpbmVKb2luOiBPbmUgb2YgInJvdW5kIiwgImJldmVsIiwgIm1pdGVyIiBvciAibWl0ZXItbGltaXQiCiAgLy8gUGFyYW0gbGluZUNhcDogT25lIG9mICJyb3VuZCIsICJzcXVhcmUiIG9yICJidXR0IgogIC8vIFBhcmFtIG1pdGVyTGltaXQ6IE1heGltdW0gam9pbiBsZW5ndGgsIGluIG11bHRpcGxlcyBvZiB0aGUgIndpZHRoIiBwYXJhbWV0ZXIgKGpvaW4gaXMgdHJ1bmNhdGVkIGlmIGl0IGV4Y2VlZHMgdGhhdCBkaXN0YW5jZSkKICAvLyBSZXR1cm5zIHN0eWxlIG9iamVjdAogIHdpZHRoID0gd2lkdGggIT09IHVuZGVmaW5lZCA/IHdpZHRoIDogMTsKICBjb2xvciA9IGNvbG9yICE9PSB1bmRlZmluZWQgPyBjb2xvciA6ICcjMDAwJzsKICBsaW5lSm9pbiA9IGxpbmVKb2luICE9PSB1bmRlZmluZWQgPyBsaW5lSm9pbiA6ICdtaXRlcic7CiAgbGluZUNhcCA9IGxpbmVDYXAgIT09IHVuZGVmaW5lZCA/IGxpbmVDYXAgOiAnYnV0dCc7CiAgbWl0ZXJMaW1pdCA9IG1pdGVyTGltaXQgIT09IHVuZGVmaW5lZCA/IG1pdGVyTGltaXQgOiA0OwogIHJldHVybiB7CiAgICBzdHJva2VDb2xvcjogY29sb3IsCiAgICBzdHJva2VXaWR0aDogd2lkdGgsCiAgICBzdHJva2VMaW5lSm9pbjogbGluZUpvaW4sCiAgICBzdHJva2VMaW5lQ2FwOiBsaW5lQ2FwLAogICAgc3Ryb2tlTWl0ZXJMaW1pdDogbWl0ZXJMaW1pdAogIH07Cn07CgpTVkdMb2FkZXIucG9pbnRzVG9TdHJva2UgPSBmdW5jdGlvbiAocG9pbnRzLCBzdHlsZSwgYXJjRGl2aXNpb25zLCBtaW5EaXN0YW5jZSkgewogIC8vIEdlbmVyYXRlcyBhIHN0cm9rZSB3aXRoIHNvbWUgd2l0ZGggYXJvdW5kIHRoZSBnaXZlbiBwYXRoLgogIC8vIFRoZSBwYXRoIGNhbiBiZSBvcGVuIG9yIGNsb3NlZCAobGFzdCBwb2ludCBlcXVhbHMgdG8gZmlyc3QgcG9pbnQpCiAgLy8gUGFyYW0gcG9pbnRzOiBBcnJheSBvZiBWZWN0b3IyRCAodGhlIHBhdGgpLiBNaW5pbXVtIDIgcG9pbnRzLgogIC8vIFBhcmFtIHN0eWxlOiBPYmplY3Qgd2l0aCBTVkcgcHJvcGVydGllcyBhcyByZXR1cm5lZCBieSBTVkdMb2FkZXIuZ2V0U3Ryb2tlU3R5bGUoKSwgb3IgU1ZHTG9hZGVyLnBhcnNlKCkgaW4gdGhlIHBhdGgudXNlckRhdGEuc3R5bGUgb2JqZWN0CiAgLy8gUGFyYW1zIGFyY0RpdmlzaW9uczogQXJjIGRpdmlzaW9ucyBmb3Igcm91bmQgam9pbnMgYW5kIGVuZGNhcHMuIChPcHRpb25hbCkKICAvLyBQYXJhbSBtaW5EaXN0YW5jZTogUG9pbnRzIGNsb3NlciB0byB0aGlzIGRpc3RhbmNlIHdpbGwgYmUgbWVyZ2VkLiAoT3B0aW9uYWwpCiAgLy8gUmV0dXJucyBCdWZmZXJHZW9tZXRyeSB3aXRoIHN0cm9rZSB0cmlhbmdsZXMgKEluIHBsYW5lIHogPSAwKS4gVVYgY29vcmRpbmF0ZXMgYXJlIGdlbmVyYXRlZCAoJ3UnIGFsb25nIHBhdGguICd2JyBhY3Jvc3MgaXQsIGZyb20gbGVmdCB0byByaWdodCkKICB2YXIgdmVydGljZXMgPSBbXTsKICB2YXIgbm9ybWFscyA9IFtdOwogIHZhciB1dnMgPSBbXTsKCiAgaWYgKFNWR0xvYWRlci5wb2ludHNUb1N0cm9rZVdpdGhCdWZmZXJzKHBvaW50cywgc3R5bGUsIGFyY0RpdmlzaW9ucywgbWluRGlzdGFuY2UsIHZlcnRpY2VzLCBub3JtYWxzLCB1dnMpID09PSAwKSB7CiAgICByZXR1cm4gbnVsbDsKICB9CgogIHZhciBnZW9tZXRyeSA9IG5ldyBCdWZmZXJHZW9tZXRyeSgpOwogIGdlb21ldHJ5LnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCBuZXcgRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSh2ZXJ0aWNlcywgMykpOwogIGdlb21ldHJ5LnNldEF0dHJpYnV0ZSgnbm9ybWFsJywgbmV3IEZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUobm9ybWFscywgMykpOwogIGdlb21ldHJ5LnNldEF0dHJpYnV0ZSgndXYnLCBuZXcgRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSh1dnMsIDIpKTsKICByZXR1cm4gZ2VvbWV0cnk7Cn07CgpTVkdMb2FkZXIucG9pbnRzVG9TdHJva2VXaXRoQnVmZmVycyA9IGZ1bmN0aW9uICgpIHsKICB2YXIgdGVtcFYyXzEgPSBuZXcgVmVjdG9yMigpOwogIHZhciB0ZW1wVjJfMiA9IG5ldyBWZWN0b3IyKCk7CiAgdmFyIHRlbXBWMl8zID0gbmV3IFZlY3RvcjIoKTsKICB2YXIgdGVtcFYyXzQgPSBuZXcgVmVjdG9yMigpOwogIHZhciB0ZW1wVjJfNSA9IG5ldyBWZWN0b3IyKCk7CiAgdmFyIHRlbXBWMl82ID0gbmV3IFZlY3RvcjIoKTsKICB2YXIgdGVtcFYyXzcgPSBuZXcgVmVjdG9yMigpOwogIHZhciBsYXN0UG9pbnRMID0gbmV3IFZlY3RvcjIoKTsKICB2YXIgbGFzdFBvaW50UiA9IG5ldyBWZWN0b3IyKCk7CiAgdmFyIHBvaW50MEwgPSBuZXcgVmVjdG9yMigpOwogIHZhciBwb2ludDBSID0gbmV3IFZlY3RvcjIoKTsKICB2YXIgY3VycmVudFBvaW50TCA9IG5ldyBWZWN0b3IyKCk7CiAgdmFyIGN1cnJlbnRQb2ludFIgPSBuZXcgVmVjdG9yMigpOwogIHZhciBuZXh0UG9pbnRMID0gbmV3IFZlY3RvcjIoKTsKICB2YXIgbmV4dFBvaW50UiA9IG5ldyBWZWN0b3IyKCk7CiAgdmFyIGlubmVyUG9pbnQgPSBuZXcgVmVjdG9yMigpOwogIHZhciBvdXRlclBvaW50ID0gbmV3IFZlY3RvcjIoKTsKICByZXR1cm4gZnVuY3Rpb24gKHBvaW50cywgc3R5bGUsIGFyY0RpdmlzaW9ucywgbWluRGlzdGFuY2UsIHZlcnRpY2VzLCBub3JtYWxzLCB1dnMsIHZlcnRleE9mZnNldCkgewogICAgLy8gVGhpcyBmdW5jdGlvbiBjYW4gYmUgY2FsbGVkIHRvIHVwZGF0ZSBleGlzdGluZyBhcnJheXMgb3IgYnVmZmVycy4KICAgIC8vIEFjY2VwdHMgc2FtZSBwYXJhbWV0ZXJzIGFzIHBvaW50c1RvU3Ryb2tlLCBwbHVzIHRoZSBidWZmZXJzIGFuZCBvcHRpb25hbCBvZmZzZXQuCiAgICAvLyBQYXJhbSB2ZXJ0ZXhPZmZzZXQ6IE9mZnNldCB2ZXJ0aWNlcyB0byBzdGFydCB3cml0aW5nIGluIHRoZSBidWZmZXJzICgzIGVsZW1lbnRzL3ZlcnRleCBmb3IgdmVydGljZXMgYW5kIG5vcm1hbHMsIGFuZCAyIGVsZW1lbnRzL3ZlcnRleCBmb3IgdXZzKQogICAgLy8gUmV0dXJucyBudW1iZXIgb2Ygd3JpdHRlbiB2ZXJ0aWNlcyAvIG5vcm1hbHMgLyB1dnMgcGFpcnMKICAgIC8vIGlmICd2ZXJ0aWNlcycgcGFyYW1ldGVyIGlzIHVuZGVmaW5lZCBubyB0cmlhbmdsZXMgd2lsbCBiZSBnZW5lcmF0ZWQsIGJ1dCB0aGUgcmV0dXJuZWQgdmVydGljZXMgY291bnQgd2lsbCBzdGlsbCBiZSB2YWxpZCAodXNlZnVsIHRvIHByZWFsbG9jYXRlIHRoZSBidWZmZXJzKQogICAgLy8gJ25vcm1hbHMnIGFuZCAndXZzJyBidWZmZXJzIGFyZSBvcHRpb25hbAogICAgYXJjRGl2aXNpb25zID0gYXJjRGl2aXNpb25zICE9PSB1bmRlZmluZWQgPyBhcmNEaXZpc2lvbnMgOiAxMjsKICAgIG1pbkRpc3RhbmNlID0gbWluRGlzdGFuY2UgIT09IHVuZGVmaW5lZCA/IG1pbkRpc3RhbmNlIDogMC4wMDE7CiAgICB2ZXJ0ZXhPZmZzZXQgPSB2ZXJ0ZXhPZmZzZXQgIT09IHVuZGVmaW5lZCA/IHZlcnRleE9mZnNldCA6IDA7IC8vIEZpcnN0IGVuc3VyZSB0aGVyZSBhcmUgbm8gZHVwbGljYXRlZCBwb2ludHMKCiAgICBwb2ludHMgPSByZW1vdmVEdXBsaWNhdGVkUG9pbnRzKHBvaW50cyk7CiAgICB2YXIgbnVtUG9pbnRzID0gcG9pbnRzLmxlbmd0aDsKICAgIGlmIChudW1Qb2ludHMgPCAyKSByZXR1cm4gMDsKICAgIHZhciBpc0Nsb3NlZCA9IHBvaW50c1swXS5lcXVhbHMocG9pbnRzW251bVBvaW50cyAtIDFdKTsKICAgIHZhciBjdXJyZW50UG9pbnQ7CiAgICB2YXIgcHJldmlvdXNQb2ludCA9IHBvaW50c1swXTsKICAgIHZhciBuZXh0UG9pbnQ7CiAgICB2YXIgc3Ryb2tlV2lkdGgyID0gc3R5bGUuc3Ryb2tlV2lkdGggLyAyOwogICAgdmFyIGRlbHRhVSA9IDEgLyAobnVtUG9pbnRzIC0gMSk7CiAgICB2YXIgdTAgPSAwOwogICAgdmFyIGlubmVyU2lkZU1vZGlmaWVkOwogICAgdmFyIGpvaW5Jc09uTGVmdFNpZGU7CiAgICB2YXIgaXNNaXRlcjsKICAgIHZhciBpbml0aWFsSm9pbklzT25MZWZ0U2lkZSA9IGZhbHNlOwogICAgdmFyIG51bVZlcnRpY2VzID0gMDsKICAgIHZhciBjdXJyZW50Q29vcmRpbmF0ZSA9IHZlcnRleE9mZnNldCAqIDM7CiAgICB2YXIgY3VycmVudENvb3JkaW5hdGVVViA9IHZlcnRleE9mZnNldCAqIDI7IC8vIEdldCBpbml0aWFsIGxlZnQgYW5kIHJpZ2h0IHN0cm9rZSBwb2ludHMKCiAgICBnZXROb3JtYWwocG9pbnRzWzBdLCBwb2ludHNbMV0sIHRlbXBWMl8xKS5tdWx0aXBseVNjYWxhcihzdHJva2VXaWR0aDIpOwogICAgbGFzdFBvaW50TC5jb3B5KHBvaW50c1swXSkuc3ViKHRlbXBWMl8xKTsKICAgIGxhc3RQb2ludFIuY29weShwb2ludHNbMF0pLmFkZCh0ZW1wVjJfMSk7CiAgICBwb2ludDBMLmNvcHkobGFzdFBvaW50TCk7CiAgICBwb2ludDBSLmNvcHkobGFzdFBvaW50Uik7CgogICAgZm9yICh2YXIgaVBvaW50ID0gMTsgaVBvaW50IDwgbnVtUG9pbnRzOyBpUG9pbnQrKykgewogICAgICBjdXJyZW50UG9pbnQgPSBwb2ludHNbaVBvaW50XTsgLy8gR2V0IG5leHQgcG9pbnQKCiAgICAgIGlmIChpUG9pbnQgPT09IG51bVBvaW50cyAtIDEpIHsKICAgICAgICBpZiAoaXNDbG9zZWQpIHsKICAgICAgICAgIC8vIFNraXAgZHVwbGljYXRlZCBpbml0aWFsIHBvaW50CiAgICAgICAgICBuZXh0UG9pbnQgPSBwb2ludHNbMV07CiAgICAgICAgfSBlbHNlIG5leHRQb2ludCA9IHVuZGVmaW5lZDsKICAgICAgfSBlbHNlIHsKICAgICAgICBuZXh0UG9pbnQgPSBwb2ludHNbaVBvaW50ICsgMV07CiAgICAgIH0gLy8gTm9ybWFsIG9mIHByZXZpb3VzIHNlZ21lbnQgaW4gdGVtcFYyXzEKCgogICAgICB2YXIgbm9ybWFsMSA9IHRlbXBWMl8xOwogICAgICBnZXROb3JtYWwocHJldmlvdXNQb2ludCwgY3VycmVudFBvaW50LCBub3JtYWwxKTsKICAgICAgdGVtcFYyXzMuY29weShub3JtYWwxKS5tdWx0aXBseVNjYWxhcihzdHJva2VXaWR0aDIpOwogICAgICBjdXJyZW50UG9pbnRMLmNvcHkoY3VycmVudFBvaW50KS5zdWIodGVtcFYyXzMpOwogICAgICBjdXJyZW50UG9pbnRSLmNvcHkoY3VycmVudFBvaW50KS5hZGQodGVtcFYyXzMpOwogICAgICB2YXIgdTEgPSB1MCArIGRlbHRhVTsKICAgICAgaW5uZXJTaWRlTW9kaWZpZWQgPSBmYWxzZTsKCiAgICAgIGlmIChuZXh0UG9pbnQgIT09IHVuZGVmaW5lZCkgewogICAgICAgIC8vIE5vcm1hbCBvZiBuZXh0IHNlZ21lbnQgaW4gdGVtcFYyXzIKICAgICAgICBnZXROb3JtYWwoY3VycmVudFBvaW50LCBuZXh0UG9pbnQsIHRlbXBWMl8yKTsKICAgICAgICB0ZW1wVjJfMy5jb3B5KHRlbXBWMl8yKS5tdWx0aXBseVNjYWxhcihzdHJva2VXaWR0aDIpOwogICAgICAgIG5leHRQb2ludEwuY29weShjdXJyZW50UG9pbnQpLnN1Yih0ZW1wVjJfMyk7CiAgICAgICAgbmV4dFBvaW50Ui5jb3B5KGN1cnJlbnRQb2ludCkuYWRkKHRlbXBWMl8zKTsKICAgICAgICBqb2luSXNPbkxlZnRTaWRlID0gdHJ1ZTsKICAgICAgICB0ZW1wVjJfMy5zdWJWZWN0b3JzKG5leHRQb2ludCwgcHJldmlvdXNQb2ludCk7CgogICAgICAgIGlmIChub3JtYWwxLmRvdCh0ZW1wVjJfMykgPCAwKSB7CiAgICAgICAgICBqb2luSXNPbkxlZnRTaWRlID0gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBpZiAoaVBvaW50ID09PSAxKSBpbml0aWFsSm9pbklzT25MZWZ0U2lkZSA9IGpvaW5Jc09uTGVmdFNpZGU7CiAgICAgICAgdGVtcFYyXzMuc3ViVmVjdG9ycyhuZXh0UG9pbnQsIGN1cnJlbnRQb2ludCk7CiAgICAgICAgdGVtcFYyXzMubm9ybWFsaXplKCk7CiAgICAgICAgdmFyIGRvdCA9IE1hdGguYWJzKG5vcm1hbDEuZG90KHRlbXBWMl8zKSk7IC8vIElmIHBhdGggaXMgc3RyYWlnaHQsIGRvbid0IGNyZWF0ZSBqb2luCgogICAgICAgIGlmIChkb3QgIT09IDApIHsKICAgICAgICAgIC8vIENvbXB1dGUgaW5uZXIgYW5kIG91dGVyIHNlZ21lbnQgaW50ZXJzZWN0aW9ucwogICAgICAgICAgdmFyIG1pdGVyU2lkZSA9IHN0cm9rZVdpZHRoMiAvIGRvdDsKICAgICAgICAgIHRlbXBWMl8zLm11bHRpcGx5U2NhbGFyKC1taXRlclNpZGUpOwogICAgICAgICAgdGVtcFYyXzQuc3ViVmVjdG9ycyhjdXJyZW50UG9pbnQsIHByZXZpb3VzUG9pbnQpOwogICAgICAgICAgdGVtcFYyXzUuY29weSh0ZW1wVjJfNCkuc2V0TGVuZ3RoKG1pdGVyU2lkZSkuYWRkKHRlbXBWMl8zKTsKICAgICAgICAgIGlubmVyUG9pbnQuY29weSh0ZW1wVjJfNSkubmVnYXRlKCk7CiAgICAgICAgICB2YXIgbWl0ZXJMZW5ndGgyID0gdGVtcFYyXzUubGVuZ3RoKCk7CiAgICAgICAgICB2YXIgc2VnbWVudExlbmd0aFByZXYgPSB0ZW1wVjJfNC5sZW5ndGgoKTsKICAgICAgICAgIHRlbXBWMl80LmRpdmlkZVNjYWxhcihzZWdtZW50TGVuZ3RoUHJldik7CiAgICAgICAgICB0ZW1wVjJfNi5zdWJWZWN0b3JzKG5leHRQb2ludCwgY3VycmVudFBvaW50KTsKICAgICAgICAgIHZhciBzZWdtZW50TGVuZ3RoTmV4dCA9IHRlbXBWMl82Lmxlbmd0aCgpOwogICAgICAgICAgdGVtcFYyXzYuZGl2aWRlU2NhbGFyKHNlZ21lbnRMZW5ndGhOZXh0KTsgLy8gQ2hlY2sgdGhhdCBwcmV2aW91cyBhbmQgbmV4dCBzZWdtZW50cyBkb2Vzbid0IG92ZXJsYXAgd2l0aCB0aGUgaW5uZXJQb2ludCBvZiBpbnRlcnNlY3Rpb24KCiAgICAgICAgICBpZiAodGVtcFYyXzQuZG90KGlubmVyUG9pbnQpIDwgc2VnbWVudExlbmd0aFByZXYgJiYgdGVtcFYyXzYuZG90KGlubmVyUG9pbnQpIDwgc2VnbWVudExlbmd0aE5leHQpIHsKICAgICAgICAgICAgaW5uZXJTaWRlTW9kaWZpZWQgPSB0cnVlOwogICAgICAgICAgfQoKICAgICAgICAgIG91dGVyUG9pbnQuY29weSh0ZW1wVjJfNSkuYWRkKGN1cnJlbnRQb2ludCk7CiAgICAgICAgICBpbm5lclBvaW50LmFkZChjdXJyZW50UG9pbnQpOwogICAgICAgICAgaXNNaXRlciA9IGZhbHNlOwoKICAgICAgICAgIGlmIChpbm5lclNpZGVNb2RpZmllZCkgewogICAgICAgICAgICBpZiAoam9pbklzT25MZWZ0U2lkZSkgewogICAgICAgICAgICAgIG5leHRQb2ludFIuY29weShpbm5lclBvaW50KTsKICAgICAgICAgICAgICBjdXJyZW50UG9pbnRSLmNvcHkoaW5uZXJQb2ludCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgbmV4dFBvaW50TC5jb3B5KGlubmVyUG9pbnQpOwogICAgICAgICAgICAgIGN1cnJlbnRQb2ludEwuY29weShpbm5lclBvaW50KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gVGhlIHNlZ21lbnQgdHJpYW5nbGVzIGFyZSBnZW5lcmF0ZWQgaGVyZSBpZiB0aGVyZSB3YXMgb3ZlcmxhcHBpbmcKICAgICAgICAgICAgbWFrZVNlZ21lbnRUcmlhbmdsZXMoKTsKICAgICAgICAgIH0KCiAgICAgICAgICBzd2l0Y2ggKHN0eWxlLnN0cm9rZUxpbmVKb2luKSB7CiAgICAgICAgICAgIGNhc2UgJ2JldmVsJzoKICAgICAgICAgICAgICBtYWtlU2VnbWVudFdpdGhCZXZlbEpvaW4oam9pbklzT25MZWZ0U2lkZSwgaW5uZXJTaWRlTW9kaWZpZWQsIHUxKTsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgJ3JvdW5kJzoKICAgICAgICAgICAgICAvLyBTZWdtZW50IHRyaWFuZ2xlcwogICAgICAgICAgICAgIGNyZWF0ZVNlZ21lbnRUcmlhbmdsZXNXaXRoTWlkZGxlU2VjdGlvbihqb2luSXNPbkxlZnRTaWRlLCBpbm5lclNpZGVNb2RpZmllZCk7IC8vIEpvaW4gdHJpYW5nbGVzCgogICAgICAgICAgICAgIGlmIChqb2luSXNPbkxlZnRTaWRlKSB7CiAgICAgICAgICAgICAgICBtYWtlQ2lyY3VsYXJTZWN0b3IoY3VycmVudFBvaW50LCBjdXJyZW50UG9pbnRMLCBuZXh0UG9pbnRMLCB1MSwgMCk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIG1ha2VDaXJjdWxhclNlY3RvcihjdXJyZW50UG9pbnQsIG5leHRQb2ludFIsIGN1cnJlbnRQb2ludFIsIHUxLCAxKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAnbWl0ZXInOgogICAgICAgICAgICBjYXNlICdtaXRlci1jbGlwJzoKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICB2YXIgbWl0ZXJGcmFjdGlvbiA9IHN0cm9rZVdpZHRoMiAqIHN0eWxlLnN0cm9rZU1pdGVyTGltaXQgLyBtaXRlckxlbmd0aDI7CgogICAgICAgICAgICAgIGlmIChtaXRlckZyYWN0aW9uIDwgMSkgewogICAgICAgICAgICAgICAgLy8gVGhlIGpvaW4gbWl0ZXIgbGVuZ3RoIGV4Y2VlZHMgdGhlIG1pdGVyIGxpbWl0CiAgICAgICAgICAgICAgICBpZiAoc3R5bGUuc3Ryb2tlTGluZUpvaW4gIT09ICdtaXRlci1jbGlwJykgewogICAgICAgICAgICAgICAgICBtYWtlU2VnbWVudFdpdGhCZXZlbEpvaW4oam9pbklzT25MZWZ0U2lkZSwgaW5uZXJTaWRlTW9kaWZpZWQsIHUxKTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAvLyBTZWdtZW50IHRyaWFuZ2xlcwogICAgICAgICAgICAgICAgICBjcmVhdGVTZWdtZW50VHJpYW5nbGVzV2l0aE1pZGRsZVNlY3Rpb24oam9pbklzT25MZWZ0U2lkZSwgaW5uZXJTaWRlTW9kaWZpZWQpOyAvLyBNaXRlci1jbGlwIGpvaW4gdHJpYW5nbGVzCgogICAgICAgICAgICAgICAgICBpZiAoam9pbklzT25MZWZ0U2lkZSkgewogICAgICAgICAgICAgICAgICAgIHRlbXBWMl82LnN1YlZlY3RvcnMob3V0ZXJQb2ludCwgY3VycmVudFBvaW50TCkubXVsdGlwbHlTY2FsYXIobWl0ZXJGcmFjdGlvbikuYWRkKGN1cnJlbnRQb2ludEwpOwogICAgICAgICAgICAgICAgICAgIHRlbXBWMl83LnN1YlZlY3RvcnMob3V0ZXJQb2ludCwgbmV4dFBvaW50TCkubXVsdGlwbHlTY2FsYXIobWl0ZXJGcmFjdGlvbikuYWRkKG5leHRQb2ludEwpOwogICAgICAgICAgICAgICAgICAgIGFkZFZlcnRleChjdXJyZW50UG9pbnRMLCB1MSwgMCk7CiAgICAgICAgICAgICAgICAgICAgYWRkVmVydGV4KHRlbXBWMl82LCB1MSwgMCk7CiAgICAgICAgICAgICAgICAgICAgYWRkVmVydGV4KGN1cnJlbnRQb2ludCwgdTEsIDAuNSk7CiAgICAgICAgICAgICAgICAgICAgYWRkVmVydGV4KGN1cnJlbnRQb2ludCwgdTEsIDAuNSk7CiAgICAgICAgICAgICAgICAgICAgYWRkVmVydGV4KHRlbXBWMl82LCB1MSwgMCk7CiAgICAgICAgICAgICAgICAgICAgYWRkVmVydGV4KHRlbXBWMl83LCB1MSwgMCk7CiAgICAgICAgICAgICAgICAgICAgYWRkVmVydGV4KGN1cnJlbnRQb2ludCwgdTEsIDAuNSk7CiAgICAgICAgICAgICAgICAgICAgYWRkVmVydGV4KHRlbXBWMl83LCB1MSwgMCk7CiAgICAgICAgICAgICAgICAgICAgYWRkVmVydGV4KG5leHRQb2ludEwsIHUxLCAwKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0ZW1wVjJfNi5zdWJWZWN0b3JzKG91dGVyUG9pbnQsIGN1cnJlbnRQb2ludFIpLm11bHRpcGx5U2NhbGFyKG1pdGVyRnJhY3Rpb24pLmFkZChjdXJyZW50UG9pbnRSKTsKICAgICAgICAgICAgICAgICAgICB0ZW1wVjJfNy5zdWJWZWN0b3JzKG91dGVyUG9pbnQsIG5leHRQb2ludFIpLm11bHRpcGx5U2NhbGFyKG1pdGVyRnJhY3Rpb24pLmFkZChuZXh0UG9pbnRSKTsKICAgICAgICAgICAgICAgICAgICBhZGRWZXJ0ZXgoY3VycmVudFBvaW50UiwgdTEsIDEpOwogICAgICAgICAgICAgICAgICAgIGFkZFZlcnRleCh0ZW1wVjJfNiwgdTEsIDEpOwogICAgICAgICAgICAgICAgICAgIGFkZFZlcnRleChjdXJyZW50UG9pbnQsIHUxLCAwLjUpOwogICAgICAgICAgICAgICAgICAgIGFkZFZlcnRleChjdXJyZW50UG9pbnQsIHUxLCAwLjUpOwogICAgICAgICAgICAgICAgICAgIGFkZFZlcnRleCh0ZW1wVjJfNiwgdTEsIDEpOwogICAgICAgICAgICAgICAgICAgIGFkZFZlcnRleCh0ZW1wVjJfNywgdTEsIDEpOwogICAgICAgICAgICAgICAgICAgIGFkZFZlcnRleChjdXJyZW50UG9pbnQsIHUxLCAwLjUpOwogICAgICAgICAgICAgICAgICAgIGFkZFZlcnRleCh0ZW1wVjJfNywgdTEsIDEpOwogICAgICAgICAgICAgICAgICAgIGFkZFZlcnRleChuZXh0UG9pbnRSLCB1MSwgMSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8gTWl0ZXIgam9pbiBzZWdtZW50IHRyaWFuZ2xlcwogICAgICAgICAgICAgICAgaWYgKGlubmVyU2lkZU1vZGlmaWVkKSB7CiAgICAgICAgICAgICAgICAgIC8vIE9wdGltaXplZCBzZWdtZW50ICsgam9pbiB0cmlhbmdsZXMKICAgICAgICAgICAgICAgICAgaWYgKGpvaW5Jc09uTGVmdFNpZGUpIHsKICAgICAgICAgICAgICAgICAgICBhZGRWZXJ0ZXgobGFzdFBvaW50UiwgdTAsIDEpOwogICAgICAgICAgICAgICAgICAgIGFkZFZlcnRleChsYXN0UG9pbnRMLCB1MCwgMCk7CiAgICAgICAgICAgICAgICAgICAgYWRkVmVydGV4KG91dGVyUG9pbnQsIHUxLCAwKTsKICAgICAgICAgICAgICAgICAgICBhZGRWZXJ0ZXgobGFzdFBvaW50UiwgdTAsIDEpOwogICAgICAgICAgICAgICAgICAgIGFkZFZlcnRleChvdXRlclBvaW50LCB1MSwgMCk7CiAgICAgICAgICAgICAgICAgICAgYWRkVmVydGV4KGlubmVyUG9pbnQsIHUxLCAxKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBhZGRWZXJ0ZXgobGFzdFBvaW50UiwgdTAsIDEpOwogICAgICAgICAgICAgICAgICAgIGFkZFZlcnRleChsYXN0UG9pbnRMLCB1MCwgMCk7CiAgICAgICAgICAgICAgICAgICAgYWRkVmVydGV4KG91dGVyUG9pbnQsIHUxLCAxKTsKICAgICAgICAgICAgICAgICAgICBhZGRWZXJ0ZXgobGFzdFBvaW50TCwgdTAsIDApOwogICAgICAgICAgICAgICAgICAgIGFkZFZlcnRleChpbm5lclBvaW50LCB1MSwgMCk7CiAgICAgICAgICAgICAgICAgICAgYWRkVmVydGV4KG91dGVyUG9pbnQsIHUxLCAxKTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgaWYgKGpvaW5Jc09uTGVmdFNpZGUpIHsKICAgICAgICAgICAgICAgICAgICBuZXh0UG9pbnRMLmNvcHkob3V0ZXJQb2ludCk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgbmV4dFBvaW50Ui5jb3B5KG91dGVyUG9pbnQpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAvLyBBZGQgZXh0cmEgbWl0ZXIgam9pbiB0cmlhbmdsZXMKICAgICAgICAgICAgICAgICAgaWYgKGpvaW5Jc09uTGVmdFNpZGUpIHsKICAgICAgICAgICAgICAgICAgICBhZGRWZXJ0ZXgoY3VycmVudFBvaW50TCwgdTEsIDApOwogICAgICAgICAgICAgICAgICAgIGFkZFZlcnRleChvdXRlclBvaW50LCB1MSwgMCk7CiAgICAgICAgICAgICAgICAgICAgYWRkVmVydGV4KGN1cnJlbnRQb2ludCwgdTEsIDAuNSk7CiAgICAgICAgICAgICAgICAgICAgYWRkVmVydGV4KGN1cnJlbnRQb2ludCwgdTEsIDAuNSk7CiAgICAgICAgICAgICAgICAgICAgYWRkVmVydGV4KG91dGVyUG9pbnQsIHUxLCAwKTsKICAgICAgICAgICAgICAgICAgICBhZGRWZXJ0ZXgobmV4dFBvaW50TCwgdTEsIDApOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGFkZFZlcnRleChjdXJyZW50UG9pbnRSLCB1MSwgMSk7CiAgICAgICAgICAgICAgICAgICAgYWRkVmVydGV4KG91dGVyUG9pbnQsIHUxLCAxKTsKICAgICAgICAgICAgICAgICAgICBhZGRWZXJ0ZXgoY3VycmVudFBvaW50LCB1MSwgMC41KTsKICAgICAgICAgICAgICAgICAgICBhZGRWZXJ0ZXgoY3VycmVudFBvaW50LCB1MSwgMC41KTsKICAgICAgICAgICAgICAgICAgICBhZGRWZXJ0ZXgob3V0ZXJQb2ludCwgdTEsIDEpOwogICAgICAgICAgICAgICAgICAgIGFkZFZlcnRleChuZXh0UG9pbnRSLCB1MSwgMSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpc01pdGVyID0gdHJ1ZTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyBUaGUgc2VnbWVudCB0cmlhbmdsZXMgYXJlIGdlbmVyYXRlZCBoZXJlIHdoZW4gdHdvIGNvbnNlY3V0aXZlIHBvaW50cyBhcmUgY29sbGluZWFyCiAgICAgICAgICBtYWtlU2VnbWVudFRyaWFuZ2xlcygpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBUaGUgc2VnbWVudCB0cmlhbmdsZXMgYXJlIGdlbmVyYXRlZCBoZXJlIGlmIGl0IGlzIHRoZSBlbmRpbmcgc2VnbWVudAogICAgICAgIG1ha2VTZWdtZW50VHJpYW5nbGVzKCk7CiAgICAgIH0KCiAgICAgIGlmICghaXNDbG9zZWQgJiYgaVBvaW50ID09PSBudW1Qb2ludHMgLSAxKSB7CiAgICAgICAgLy8gU3RhcnQgbGluZSBlbmRjYXAKICAgICAgICBhZGRDYXBHZW9tZXRyeShwb2ludHNbMF0sIHBvaW50MEwsIHBvaW50MFIsIGpvaW5Jc09uTGVmdFNpZGUsIHRydWUsIHUwKTsKICAgICAgfSAvLyBJbmNyZW1lbnQgbG9vcCB2YXJpYWJsZXMKCgogICAgICB1MCA9IHUxOwogICAgICBwcmV2aW91c1BvaW50ID0gY3VycmVudFBvaW50OwogICAgICBsYXN0UG9pbnRMLmNvcHkobmV4dFBvaW50TCk7CiAgICAgIGxhc3RQb2ludFIuY29weShuZXh0UG9pbnRSKTsKICAgIH0KCiAgICBpZiAoIWlzQ2xvc2VkKSB7CiAgICAgIC8vIEVuZGluZyBsaW5lIGVuZGNhcAogICAgICBhZGRDYXBHZW9tZXRyeShjdXJyZW50UG9pbnQsIGN1cnJlbnRQb2ludEwsIGN1cnJlbnRQb2ludFIsIGpvaW5Jc09uTGVmdFNpZGUsIGZhbHNlLCB1MSk7CiAgICB9IGVsc2UgaWYgKGlubmVyU2lkZU1vZGlmaWVkICYmIHZlcnRpY2VzKSB7CiAgICAgIC8vIE1vZGlmeSBwYXRoIGZpcnN0IHNlZ21lbnQgdmVydGljZXMgdG8gYWRqdXN0IHRvIHRoZSBzZWdtZW50cyBpbm5lciBhbmQgb3V0ZXIgaW50ZXJzZWN0aW9ucwogICAgICB2YXIgbGFzdE91dGVyID0gb3V0ZXJQb2ludDsKICAgICAgdmFyIGxhc3RJbm5lciA9IGlubmVyUG9pbnQ7CgogICAgICBpZiAoaW5pdGlhbEpvaW5Jc09uTGVmdFNpZGUgIT09IGpvaW5Jc09uTGVmdFNpZGUpIHsKICAgICAgICBsYXN0T3V0ZXIgPSBpbm5lclBvaW50OwogICAgICAgIGxhc3RJbm5lciA9IG91dGVyUG9pbnQ7CiAgICAgIH0KCiAgICAgIGlmIChqb2luSXNPbkxlZnRTaWRlKSB7CiAgICAgICAgaWYgKGlzTWl0ZXIgfHwgaW5pdGlhbEpvaW5Jc09uTGVmdFNpZGUpIHsKICAgICAgICAgIGxhc3RJbm5lci50b0FycmF5KHZlcnRpY2VzLCAwICogMyk7CiAgICAgICAgICBsYXN0SW5uZXIudG9BcnJheSh2ZXJ0aWNlcywgMyAqIDMpOwoKICAgICAgICAgIGlmIChpc01pdGVyKSB7CiAgICAgICAgICAgIGxhc3RPdXRlci50b0FycmF5KHZlcnRpY2VzLCAxICogMyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGlmIChpc01pdGVyIHx8ICFpbml0aWFsSm9pbklzT25MZWZ0U2lkZSkgewogICAgICAgICAgbGFzdElubmVyLnRvQXJyYXkodmVydGljZXMsIDEgKiAzKTsKICAgICAgICAgIGxhc3RJbm5lci50b0FycmF5KHZlcnRpY2VzLCAzICogMyk7CgogICAgICAgICAgaWYgKGlzTWl0ZXIpIHsKICAgICAgICAgICAgbGFzdE91dGVyLnRvQXJyYXkodmVydGljZXMsIDAgKiAzKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbnVtVmVydGljZXM7IC8vIC0tIEVuZCBvZiBhbGdvcml0aG0KICAgIC8vIC0tIEZ1bmN0aW9ucwoKICAgIGZ1bmN0aW9uIGdldE5vcm1hbChwMSwgcDIsIHJlc3VsdCkgewogICAgICByZXN1bHQuc3ViVmVjdG9ycyhwMiwgcDEpOwogICAgICByZXR1cm4gcmVzdWx0LnNldCgtcmVzdWx0LnksIHJlc3VsdC54KS5ub3JtYWxpemUoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBhZGRWZXJ0ZXgocG9zaXRpb24sIHUsIHYpIHsKICAgICAgaWYgKHZlcnRpY2VzKSB7CiAgICAgICAgdmVydGljZXNbY3VycmVudENvb3JkaW5hdGVdID0gcG9zaXRpb24ueDsKICAgICAgICB2ZXJ0aWNlc1tjdXJyZW50Q29vcmRpbmF0ZSArIDFdID0gcG9zaXRpb24ueTsKICAgICAgICB2ZXJ0aWNlc1tjdXJyZW50Q29vcmRpbmF0ZSArIDJdID0gMDsKCiAgICAgICAgaWYgKG5vcm1hbHMpIHsKICAgICAgICAgIG5vcm1hbHNbY3VycmVudENvb3JkaW5hdGVdID0gMDsKICAgICAgICAgIG5vcm1hbHNbY3VycmVudENvb3JkaW5hdGUgKyAxXSA9IDA7CiAgICAgICAgICBub3JtYWxzW2N1cnJlbnRDb29yZGluYXRlICsgMl0gPSAxOwogICAgICAgIH0KCiAgICAgICAgY3VycmVudENvb3JkaW5hdGUgKz0gMzsKCiAgICAgICAgaWYgKHV2cykgewogICAgICAgICAgdXZzW2N1cnJlbnRDb29yZGluYXRlVVZdID0gdTsKICAgICAgICAgIHV2c1tjdXJyZW50Q29vcmRpbmF0ZVVWICsgMV0gPSB2OwogICAgICAgICAgY3VycmVudENvb3JkaW5hdGVVViArPSAyOwogICAgICAgIH0KICAgICAgfQoKICAgICAgbnVtVmVydGljZXMgKz0gMzsKICAgIH0KCiAgICBmdW5jdGlvbiBtYWtlQ2lyY3VsYXJTZWN0b3IoY2VudGVyLCBwMSwgcDIsIHUsIHYpIHsKICAgICAgLy8gcGFyYW0gcDEsIHAyOiBQb2ludHMgaW4gdGhlIGNpcmNsZSBhcmMuCiAgICAgIC8vIHAxIGFuZCBwMiBhcmUgaW4gY2xvY2t3aXNlIGRpcmVjdGlvbi4KICAgICAgdGVtcFYyXzEuY29weShwMSkuc3ViKGNlbnRlcikubm9ybWFsaXplKCk7CiAgICAgIHRlbXBWMl8yLmNvcHkocDIpLnN1YihjZW50ZXIpLm5vcm1hbGl6ZSgpOwogICAgICB2YXIgYW5nbGUgPSBNYXRoLlBJOwogICAgICB2YXIgZG90ID0gdGVtcFYyXzEuZG90KHRlbXBWMl8yKTsKICAgICAgaWYgKE1hdGguYWJzKGRvdCkgPCAxKSBhbmdsZSA9IE1hdGguYWJzKE1hdGguYWNvcyhkb3QpKTsKICAgICAgYW5nbGUgLz0gYXJjRGl2aXNpb25zOwogICAgICB0ZW1wVjJfMy5jb3B5KHAxKTsKCiAgICAgIGZvciAodmFyIGkgPSAwLCBpbCA9IGFyY0RpdmlzaW9ucyAtIDE7IGkgPCBpbDsgaSsrKSB7CiAgICAgICAgdGVtcFYyXzQuY29weSh0ZW1wVjJfMykucm90YXRlQXJvdW5kKGNlbnRlciwgYW5nbGUpOwogICAgICAgIGFkZFZlcnRleCh0ZW1wVjJfMywgdSwgdik7CiAgICAgICAgYWRkVmVydGV4KHRlbXBWMl80LCB1LCB2KTsKICAgICAgICBhZGRWZXJ0ZXgoY2VudGVyLCB1LCAwLjUpOwogICAgICAgIHRlbXBWMl8zLmNvcHkodGVtcFYyXzQpOwogICAgICB9CgogICAgICBhZGRWZXJ0ZXgodGVtcFYyXzQsIHUsIHYpOwogICAgICBhZGRWZXJ0ZXgocDIsIHUsIHYpOwogICAgICBhZGRWZXJ0ZXgoY2VudGVyLCB1LCAwLjUpOwogICAgfQoKICAgIGZ1bmN0aW9uIG1ha2VTZWdtZW50VHJpYW5nbGVzKCkgewogICAgICBhZGRWZXJ0ZXgobGFzdFBvaW50UiwgdTAsIDEpOwogICAgICBhZGRWZXJ0ZXgobGFzdFBvaW50TCwgdTAsIDApOwogICAgICBhZGRWZXJ0ZXgoY3VycmVudFBvaW50TCwgdTEsIDApOwogICAgICBhZGRWZXJ0ZXgobGFzdFBvaW50UiwgdTAsIDEpOwogICAgICBhZGRWZXJ0ZXgoY3VycmVudFBvaW50TCwgdTEsIDEpOwogICAgICBhZGRWZXJ0ZXgoY3VycmVudFBvaW50UiwgdTEsIDApOwogICAgfQoKICAgIGZ1bmN0aW9uIG1ha2VTZWdtZW50V2l0aEJldmVsSm9pbihqb2luSXNPbkxlZnRTaWRlLCBpbm5lclNpZGVNb2RpZmllZCwgdSkgewogICAgICBpZiAoaW5uZXJTaWRlTW9kaWZpZWQpIHsKICAgICAgICAvLyBPcHRpbWl6ZWQgc2VnbWVudCArIGJldmVsIHRyaWFuZ2xlcwogICAgICAgIGlmIChqb2luSXNPbkxlZnRTaWRlKSB7CiAgICAgICAgICAvLyBQYXRoIHNlZ21lbnRzIHRyaWFuZ2xlcwogICAgICAgICAgYWRkVmVydGV4KGxhc3RQb2ludFIsIHUwLCAxKTsKICAgICAgICAgIGFkZFZlcnRleChsYXN0UG9pbnRMLCB1MCwgMCk7CiAgICAgICAgICBhZGRWZXJ0ZXgoY3VycmVudFBvaW50TCwgdTEsIDApOwogICAgICAgICAgYWRkVmVydGV4KGxhc3RQb2ludFIsIHUwLCAxKTsKICAgICAgICAgIGFkZFZlcnRleChjdXJyZW50UG9pbnRMLCB1MSwgMCk7CiAgICAgICAgICBhZGRWZXJ0ZXgoaW5uZXJQb2ludCwgdTEsIDEpOyAvLyBCZXZlbCBqb2luIHRyaWFuZ2xlCgogICAgICAgICAgYWRkVmVydGV4KGN1cnJlbnRQb2ludEwsIHUsIDApOwogICAgICAgICAgYWRkVmVydGV4KG5leHRQb2ludEwsIHUsIDApOwogICAgICAgICAgYWRkVmVydGV4KGlubmVyUG9pbnQsIHUsIDAuNSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIFBhdGggc2VnbWVudHMgdHJpYW5nbGVzCiAgICAgICAgICBhZGRWZXJ0ZXgobGFzdFBvaW50UiwgdTAsIDEpOwogICAgICAgICAgYWRkVmVydGV4KGxhc3RQb2ludEwsIHUwLCAwKTsKICAgICAgICAgIGFkZFZlcnRleChjdXJyZW50UG9pbnRSLCB1MSwgMSk7CiAgICAgICAgICBhZGRWZXJ0ZXgobGFzdFBvaW50TCwgdTAsIDApOwogICAgICAgICAgYWRkVmVydGV4KGlubmVyUG9pbnQsIHUxLCAwKTsKICAgICAgICAgIGFkZFZlcnRleChjdXJyZW50UG9pbnRSLCB1MSwgMSk7IC8vIEJldmVsIGpvaW4gdHJpYW5nbGUKCiAgICAgICAgICBhZGRWZXJ0ZXgoY3VycmVudFBvaW50UiwgdSwgMSk7CiAgICAgICAgICBhZGRWZXJ0ZXgobmV4dFBvaW50UiwgdSwgMCk7CiAgICAgICAgICBhZGRWZXJ0ZXgoaW5uZXJQb2ludCwgdSwgMC41KTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gQmV2ZWwgam9pbiB0cmlhbmdsZS4gVGhlIHNlZ21lbnQgdHJpYW5nbGVzIGFyZSBkb25lIGluIHRoZSBtYWluIGxvb3AKICAgICAgICBpZiAoam9pbklzT25MZWZ0U2lkZSkgewogICAgICAgICAgYWRkVmVydGV4KGN1cnJlbnRQb2ludEwsIHUsIDApOwogICAgICAgICAgYWRkVmVydGV4KG5leHRQb2ludEwsIHUsIDApOwogICAgICAgICAgYWRkVmVydGV4KGN1cnJlbnRQb2ludCwgdSwgMC41KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYWRkVmVydGV4KGN1cnJlbnRQb2ludFIsIHUsIDEpOwogICAgICAgICAgYWRkVmVydGV4KG5leHRQb2ludFIsIHUsIDApOwogICAgICAgICAgYWRkVmVydGV4KGN1cnJlbnRQb2ludCwgdSwgMC41KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBjcmVhdGVTZWdtZW50VHJpYW5nbGVzV2l0aE1pZGRsZVNlY3Rpb24oam9pbklzT25MZWZ0U2lkZSwgaW5uZXJTaWRlTW9kaWZpZWQpIHsKICAgICAgaWYgKGlubmVyU2lkZU1vZGlmaWVkKSB7CiAgICAgICAgaWYgKGpvaW5Jc09uTGVmdFNpZGUpIHsKICAgICAgICAgIGFkZFZlcnRleChsYXN0UG9pbnRSLCB1MCwgMSk7CiAgICAgICAgICBhZGRWZXJ0ZXgobGFzdFBvaW50TCwgdTAsIDApOwogICAgICAgICAgYWRkVmVydGV4KGN1cnJlbnRQb2ludEwsIHUxLCAwKTsKICAgICAgICAgIGFkZFZlcnRleChsYXN0UG9pbnRSLCB1MCwgMSk7CiAgICAgICAgICBhZGRWZXJ0ZXgoY3VycmVudFBvaW50TCwgdTEsIDApOwogICAgICAgICAgYWRkVmVydGV4KGlubmVyUG9pbnQsIHUxLCAxKTsKICAgICAgICAgIGFkZFZlcnRleChjdXJyZW50UG9pbnRMLCB1MCwgMCk7CiAgICAgICAgICBhZGRWZXJ0ZXgoY3VycmVudFBvaW50LCB1MSwgMC41KTsKICAgICAgICAgIGFkZFZlcnRleChpbm5lclBvaW50LCB1MSwgMSk7CiAgICAgICAgICBhZGRWZXJ0ZXgoY3VycmVudFBvaW50LCB1MSwgMC41KTsKICAgICAgICAgIGFkZFZlcnRleChuZXh0UG9pbnRMLCB1MCwgMCk7CiAgICAgICAgICBhZGRWZXJ0ZXgoaW5uZXJQb2ludCwgdTEsIDEpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhZGRWZXJ0ZXgobGFzdFBvaW50UiwgdTAsIDEpOwogICAgICAgICAgYWRkVmVydGV4KGxhc3RQb2ludEwsIHUwLCAwKTsKICAgICAgICAgIGFkZFZlcnRleChjdXJyZW50UG9pbnRSLCB1MSwgMSk7CiAgICAgICAgICBhZGRWZXJ0ZXgobGFzdFBvaW50TCwgdTAsIDApOwogICAgICAgICAgYWRkVmVydGV4KGlubmVyUG9pbnQsIHUxLCAwKTsKICAgICAgICAgIGFkZFZlcnRleChjdXJyZW50UG9pbnRSLCB1MSwgMSk7CiAgICAgICAgICBhZGRWZXJ0ZXgoY3VycmVudFBvaW50UiwgdTAsIDEpOwogICAgICAgICAgYWRkVmVydGV4KGlubmVyUG9pbnQsIHUxLCAwKTsKICAgICAgICAgIGFkZFZlcnRleChjdXJyZW50UG9pbnQsIHUxLCAwLjUpOwogICAgICAgICAgYWRkVmVydGV4KGN1cnJlbnRQb2ludCwgdTEsIDAuNSk7CiAgICAgICAgICBhZGRWZXJ0ZXgoaW5uZXJQb2ludCwgdTEsIDApOwogICAgICAgICAgYWRkVmVydGV4KG5leHRQb2ludFIsIHUwLCAxKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBhZGRDYXBHZW9tZXRyeShjZW50ZXIsIHAxLCBwMiwgam9pbklzT25MZWZ0U2lkZSwgc3RhcnQsIHUpIHsKICAgICAgLy8gcGFyYW0gY2VudGVyOiBFbmQgcG9pbnQgb2YgdGhlIHBhdGgKICAgICAgLy8gcGFyYW0gcDEsIHAyOiBMZWZ0IGFuZCByaWdodCBjYXAgcG9pbnRzCiAgICAgIHN3aXRjaCAoc3R5bGUuc3Ryb2tlTGluZUNhcCkgewogICAgICAgIGNhc2UgJ3JvdW5kJzoKICAgICAgICAgIGlmIChzdGFydCkgewogICAgICAgICAgICBtYWtlQ2lyY3VsYXJTZWN0b3IoY2VudGVyLCBwMiwgcDEsIHUsIDAuNSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBtYWtlQ2lyY3VsYXJTZWN0b3IoY2VudGVyLCBwMSwgcDIsIHUsIDAuNSk7CiAgICAgICAgICB9CgogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgJ3NxdWFyZSc6CiAgICAgICAgICBpZiAoc3RhcnQpIHsKICAgICAgICAgICAgdGVtcFYyXzEuc3ViVmVjdG9ycyhwMSwgY2VudGVyKTsKICAgICAgICAgICAgdGVtcFYyXzIuc2V0KHRlbXBWMl8xLnksIC10ZW1wVjJfMS54KTsKICAgICAgICAgICAgdGVtcFYyXzMuYWRkVmVjdG9ycyh0ZW1wVjJfMSwgdGVtcFYyXzIpLmFkZChjZW50ZXIpOwogICAgICAgICAgICB0ZW1wVjJfNC5zdWJWZWN0b3JzKHRlbXBWMl8yLCB0ZW1wVjJfMSkuYWRkKGNlbnRlcik7IC8vIE1vZGlmeSBhbHJlYWR5IGV4aXN0aW5nIHZlcnRpY2VzCgogICAgICAgICAgICBpZiAoam9pbklzT25MZWZ0U2lkZSkgewogICAgICAgICAgICAgIHRlbXBWMl8zLnRvQXJyYXkodmVydGljZXMsIDEgKiAzKTsKICAgICAgICAgICAgICB0ZW1wVjJfNC50b0FycmF5KHZlcnRpY2VzLCAwICogMyk7CiAgICAgICAgICAgICAgdGVtcFYyXzQudG9BcnJheSh2ZXJ0aWNlcywgMyAqIDMpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRlbXBWMl8zLnRvQXJyYXkodmVydGljZXMsIDEgKiAzKTsKICAgICAgICAgICAgICB0ZW1wVjJfMy50b0FycmF5KHZlcnRpY2VzLCAzICogMyk7CiAgICAgICAgICAgICAgdGVtcFYyXzQudG9BcnJheSh2ZXJ0aWNlcywgMCAqIDMpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0ZW1wVjJfMS5zdWJWZWN0b3JzKHAyLCBjZW50ZXIpOwogICAgICAgICAgICB0ZW1wVjJfMi5zZXQodGVtcFYyXzEueSwgLXRlbXBWMl8xLngpOwogICAgICAgICAgICB0ZW1wVjJfMy5hZGRWZWN0b3JzKHRlbXBWMl8xLCB0ZW1wVjJfMikuYWRkKGNlbnRlcik7CiAgICAgICAgICAgIHRlbXBWMl80LnN1YlZlY3RvcnModGVtcFYyXzIsIHRlbXBWMl8xKS5hZGQoY2VudGVyKTsKICAgICAgICAgICAgdmFyIHZsID0gdmVydGljZXMubGVuZ3RoOyAvLyBNb2RpZnkgYWxyZWFkeSBleGlzdGluZyB2ZXJ0aWNlcwoKICAgICAgICAgICAgaWYgKGpvaW5Jc09uTGVmdFNpZGUpIHsKICAgICAgICAgICAgICB0ZW1wVjJfMy50b0FycmF5KHZlcnRpY2VzLCB2bCAtIDEgKiAzKTsKICAgICAgICAgICAgICB0ZW1wVjJfNC50b0FycmF5KHZlcnRpY2VzLCB2bCAtIDIgKiAzKTsKICAgICAgICAgICAgICB0ZW1wVjJfNC50b0FycmF5KHZlcnRpY2VzLCB2bCAtIDQgKiAzKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0ZW1wVjJfMy50b0FycmF5KHZlcnRpY2VzLCB2bCAtIDIgKiAzKTsKICAgICAgICAgICAgICB0ZW1wVjJfNC50b0FycmF5KHZlcnRpY2VzLCB2bCAtIDEgKiAzKTsKICAgICAgICAgICAgICB0ZW1wVjJfNC50b0FycmF5KHZlcnRpY2VzLCB2bCAtIDQgKiAzKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICdidXR0JzoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgLy8gTm90aGluZyB0byBkbyBoZXJlCiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHJlbW92ZUR1cGxpY2F0ZWRQb2ludHMocG9pbnRzKSB7CiAgICAgIC8vIENyZWF0ZXMgYSBuZXcgYXJyYXkgaWYgbmVjZXNzYXJ5IHdpdGggZHVwbGljYXRlZCBwb2ludHMgcmVtb3ZlZC4KICAgICAgLy8gVGhpcyBkb2VzIG5vdCByZW1vdmUgZHVwbGljYXRlZCBpbml0aWFsIGFuZCBlbmRpbmcgcG9pbnRzIG9mIGEgY2xvc2VkIHBhdGguCiAgICAgIHZhciBkdXBQb2ludHMgPSBmYWxzZTsKCiAgICAgIGZvciAodmFyIGkgPSAxLCBuID0gcG9pbnRzLmxlbmd0aCAtIDE7IGkgPCBuOyBpKyspIHsKICAgICAgICBpZiAocG9pbnRzW2ldLmRpc3RhbmNlVG8ocG9pbnRzW2kgKyAxXSkgPCBtaW5EaXN0YW5jZSkgewogICAgICAgICAgZHVwUG9pbnRzID0gdHJ1ZTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKCFkdXBQb2ludHMpIHJldHVybiBwb2ludHM7CiAgICAgIHZhciBuZXdQb2ludHMgPSBbXTsKICAgICAgbmV3UG9pbnRzLnB1c2gocG9pbnRzWzBdKTsKCiAgICAgIGZvciAodmFyIGkgPSAxLCBuID0gcG9pbnRzLmxlbmd0aCAtIDE7IGkgPCBuOyBpKyspIHsKICAgICAgICBpZiAocG9pbnRzW2ldLmRpc3RhbmNlVG8ocG9pbnRzW2kgKyAxXSkgPj0gbWluRGlzdGFuY2UpIHsKICAgICAgICAgIG5ld1BvaW50cy5wdXNoKHBvaW50c1tpXSk7CiAgICAgICAgfQogICAgICB9CgogICAgICBuZXdQb2ludHMucHVzaChwb2ludHNbcG9pbnRzLmxlbmd0aCAtIDFdKTsKICAgICAgcmV0dXJuIG5ld1BvaW50czsKICAgIH0KICB9Owp9KCk7CgpleHBvcnQgeyBTVkdMb2FkZXIgfTs="},{"version":3,"sources":["E:/自己的项目/three_test/src/assets/jsm/loaders/SVGLoader.js"],"names":["BufferGeometry","Color","FileLoader","Float32BufferAttribute","Loader","Matrix3","Path","ShapePath","Vector2","Vector3","SVGLoader","manager","call","prototype","Object","assign","create","constructor","load","url","onLoad","onProgress","onError","scope","loader","setPath","path","text","parse","parseNode","node","style","nodeType","transform","getNodeTransform","nodeName","parseStyle","hasAttribute","parsePathNode","parseRectNode","parsePolygonNode","parsePolylineNode","parseCircleNode","parseEllipseNode","parseLineNode","console","log","fill","undefined","color","setStyle","transformPath","currentTransform","paths","push","userData","nodes","childNodes","i","length","transformStack","pop","copy","identity","point","control","firstPoint","isFirstPoint","doSetFirstPoint","d","getAttribute","commands","match","l","command","type","charAt","data","substr","trim","numbers","parseFloats","j","jl","x","y","moveTo","lineTo","bezierCurveTo","getReflection","quadraticCurveTo","rx","ry","start","clone","parseArcCommand","currentPath","autoClose","curves","currentPoint","warn","x_axis_rotation","large_arc_flag","sweep_flag","end","Math","PI","abs","dx2","dy2","x1p","cos","sin","y1p","rxs","rys","x1ps","y1ps","cr","s","sqrt","dq","pq","q","max","cxp","cyp","cx","cy","theta","svgAngle","delta","absellipse","ux","uy","vx","vy","dot","len","ang","acos","min","parseFloat","w","h","iterator","a","b","index","regex","replace","r","subpath","absarc","subPaths","x1","y1","x2","y2","addStyle","svgName","jsName","adjustFunction","v","clamp","positive","string","array","split","number","indexOf","lastIndexOf","splice","parseNodeTransform","premultiply","tempTransform0","transformsTexts","tIndex","transformText","openParPos","closeParPos","transformType","tx","ty","translate","angle","tempTransform1","tempTransform2","rotate","tempTransform3","multiplyMatrices","scaleX","scaleY","scale","set","tan","m","transfVec2","v2","tempV3","applyMatrix3","isRotated","isTransformRotated","n","subPath","curve","isLineCurve","v1","isCubicBezierCurve","v0","v3","isQuadraticBezierCurve","isEllipseCurve","tempV2","aX","aY","xRadius","getTransformScaleX","yRadius","getTransformScaleY","elements","te","time","xml","DOMParser","parseFromString","timeEnd","documentElement","fillOpacity","strokeOpacity","strokeWidth","strokeLineJoin","strokeLineCap","strokeMiterLimit","getStrokeStyle","width","lineJoin","lineCap","miterLimit","strokeColor","pointsToStroke","points","arcDivisions","minDistance","vertices","normals","uvs","pointsToStrokeWithBuffers","geometry","setAttribute","tempV2_1","tempV2_2","tempV2_3","tempV2_4","tempV2_5","tempV2_6","tempV2_7","lastPointL","lastPointR","point0L","point0R","currentPointL","currentPointR","nextPointL","nextPointR","innerPoint","outerPoint","vertexOffset","removeDuplicatedPoints","numPoints","isClosed","equals","previousPoint","nextPoint","strokeWidth2","deltaU","u0","innerSideModified","joinIsOnLeftSide","isMiter","initialJoinIsOnLeftSide","numVertices","currentCoordinate","currentCoordinateUV","getNormal","multiplyScalar","sub","add","iPoint","normal1","u1","subVectors","normalize","miterSide","setLength","negate","miterLength2","segmentLengthPrev","divideScalar","segmentLengthNext","makeSegmentTriangles","makeSegmentWithBevelJoin","createSegmentTrianglesWithMiddleSection","makeCircularSector","miterFraction","addVertex","addCapGeometry","lastOuter","lastInner","toArray","p1","p2","result","position","u","center","il","rotateAround","addVectors","vl","dupPoints","distanceTo","newPoints"],"mappings":";;;;;;;;;;;;AAAA;;;;;AAMA,SACIA,cADJ,EAEIC,KAFJ,EAGIC,UAHJ,EAIIC,sBAJJ,EAKIC,MALJ,EAMIC,OANJ,EAOIC,IAPJ,EAQIC,SARJ,EASIC,OATJ,EAUIC,OAVJ,QAWO,0BAXP;;AAaA,IAAIC,SAAS,GAAG,SAAZA,SAAY,CAAUC,OAAV,EAAmB;AAE/BP,EAAAA,MAAM,CAACQ,IAAP,CAAY,IAAZ,EAAkBD,OAAlB;AAEH,CAJD;;AAMAD,SAAS,CAACG,SAAV,GAAsBC,MAAM,CAACC,MAAP,CAAcD,MAAM,CAACE,MAAP,CAAcZ,MAAM,CAACS,SAArB,CAAd,EAA+C;AAEjEI,EAAAA,WAAW,EAAEP,SAFoD;AAIjEQ,EAAAA,IAAI,EAAE,cAAUC,GAAV,EAAeC,MAAf,EAAuBC,UAAvB,EAAmCC,OAAnC,EAA4C;AAE9C,QAAIC,KAAK,GAAG,IAAZ;AAEA,QAAIC,MAAM,GAAG,IAAItB,UAAJ,CAAeqB,KAAK,CAACZ,OAArB,CAAb;AACAa,IAAAA,MAAM,CAACC,OAAP,CAAeF,KAAK,CAACG,IAArB;AACAF,IAAAA,MAAM,CAACN,IAAP,CAAYC,GAAZ,EAAiB,UAAUQ,IAAV,EAAgB;AAE7BP,MAAAA,MAAM,CAACG,KAAK,CAACK,KAAN,CAAYD,IAAZ,CAAD,CAAN;AAEH,KAJD,EAIGN,UAJH,EAIeC,OAJf;AAMH,GAhBgE;AAkBjEM,EAAAA,KAAK,EAAE,eAAUD,IAAV,EAAgB;AAEnB,aAASE,SAAT,CAAmBC,IAAnB,EAAyBC,KAAzB,EAAgC;AAE5B,UAAID,IAAI,CAACE,QAAL,KAAkB,CAAtB,EAAyB;AAEzB,UAAIC,SAAS,GAAGC,gBAAgB,CAACJ,IAAD,CAAhC;AAEA,UAAIJ,IAAI,GAAG,IAAX;;AAEA,cAAQI,IAAI,CAACK,QAAb;AAEI,aAAK,KAAL;AACI;;AAEJ,aAAK,GAAL;AACIJ,UAAAA,KAAK,GAAGK,UAAU,CAACN,IAAD,EAAOC,KAAP,CAAlB;AACA;;AAEJ,aAAK,MAAL;AACIA,UAAAA,KAAK,GAAGK,UAAU,CAACN,IAAD,EAAOC,KAAP,CAAlB;AACA,cAAID,IAAI,CAACO,YAAL,CAAkB,GAAlB,CAAJ,EAA4BX,IAAI,GAAGY,aAAa,CAACR,IAAD,CAApB;AAC5B;;AAEJ,aAAK,MAAL;AACIC,UAAAA,KAAK,GAAGK,UAAU,CAACN,IAAD,EAAOC,KAAP,CAAlB;AACAL,UAAAA,IAAI,GAAGa,aAAa,CAACT,IAAD,CAApB;AACA;;AAEJ,aAAK,SAAL;AACIC,UAAAA,KAAK,GAAGK,UAAU,CAACN,IAAD,EAAOC,KAAP,CAAlB;AACAL,UAAAA,IAAI,GAAGc,gBAAgB,CAACV,IAAD,CAAvB;AACA;;AAEJ,aAAK,UAAL;AACIC,UAAAA,KAAK,GAAGK,UAAU,CAACN,IAAD,EAAOC,KAAP,CAAlB;AACAL,UAAAA,IAAI,GAAGe,iBAAiB,CAACX,IAAD,CAAxB;AACA;;AAEJ,aAAK,QAAL;AACIC,UAAAA,KAAK,GAAGK,UAAU,CAACN,IAAD,EAAOC,KAAP,CAAlB;AACAL,UAAAA,IAAI,GAAGgB,eAAe,CAACZ,IAAD,CAAtB;AACA;;AAEJ,aAAK,SAAL;AACIC,UAAAA,KAAK,GAAGK,UAAU,CAACN,IAAD,EAAOC,KAAP,CAAlB;AACAL,UAAAA,IAAI,GAAGiB,gBAAgB,CAACb,IAAD,CAAvB;AACA;;AAEJ,aAAK,MAAL;AACIC,UAAAA,KAAK,GAAGK,UAAU,CAACN,IAAD,EAAOC,KAAP,CAAlB;AACAL,UAAAA,IAAI,GAAGkB,aAAa,CAACd,IAAD,CAApB;AACA;;AAEJ;AACIe,UAAAA,OAAO,CAACC,GAAR,CAAYhB,IAAZ;AA7CR;;AAiDA,UAAIJ,IAAJ,EAAU;AAEN,YAAIK,KAAK,CAACgB,IAAN,KAAeC,SAAf,IAA4BjB,KAAK,CAACgB,IAAN,KAAe,MAA/C,EAAuD;AAEnDrB,UAAAA,IAAI,CAACuB,KAAL,CAAWC,QAAX,CAAoBnB,KAAK,CAACgB,IAA1B;AAEH;;AAEDI,QAAAA,aAAa,CAACzB,IAAD,EAAO0B,gBAAP,CAAb;AAEAC,QAAAA,KAAK,CAACC,IAAN,CAAW5B,IAAX;AAEAA,QAAAA,IAAI,CAAC6B,QAAL,GAAgB;AAAEzB,UAAAA,IAAI,EAAEA,IAAR;AAAcC,UAAAA,KAAK,EAAEA;AAArB,SAAhB;AAEH;;AAED,UAAIyB,KAAK,GAAG1B,IAAI,CAAC2B,UAAjB;;AAEA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,KAAK,CAACG,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AAEnC7B,QAAAA,SAAS,CAAC2B,KAAK,CAACE,CAAD,CAAN,EAAW3B,KAAX,CAAT;AAEH;;AAED,UAAIE,SAAJ,EAAe;AAEX2B,QAAAA,cAAc,CAACC,GAAf;;AAEA,YAAID,cAAc,CAACD,MAAf,GAAwB,CAA5B,EAA+B;AAE3BP,UAAAA,gBAAgB,CAACU,IAAjB,CAAsBF,cAAc,CAACA,cAAc,CAACD,MAAf,GAAwB,CAAzB,CAApC;AAEH,SAJD,MAIO;AAEHP,UAAAA,gBAAgB,CAACW,QAAjB;AAEH;AAEJ;AAEJ;;AAED,aAASzB,aAAT,CAAuBR,IAAvB,EAA6B;AAEzB,UAAIJ,IAAI,GAAG,IAAInB,SAAJ,EAAX;AAEA,UAAIyD,KAAK,GAAG,IAAIxD,OAAJ,EAAZ;AACA,UAAIyD,OAAO,GAAG,IAAIzD,OAAJ,EAAd;AAEA,UAAI0D,UAAU,GAAG,IAAI1D,OAAJ,EAAjB;AACA,UAAI2D,YAAY,GAAG,IAAnB;AACA,UAAIC,eAAe,GAAG,KAAtB;AAEA,UAAIC,CAAC,GAAGvC,IAAI,CAACwC,YAAL,CAAkB,GAAlB,CAAR,CAXyB,CAazB;;AAEA,UAAIC,QAAQ,GAAGF,CAAC,CAACG,KAAF,CAAQ,sBAAR,CAAf;;AAEA,WAAK,IAAId,CAAC,GAAG,CAAR,EAAWe,CAAC,GAAGF,QAAQ,CAACZ,MAA7B,EAAqCD,CAAC,GAAGe,CAAzC,EAA4Cf,CAAC,EAA7C,EAAiD;AAE7C,YAAIgB,OAAO,GAAGH,QAAQ,CAACb,CAAD,CAAtB;AAEA,YAAIiB,IAAI,GAAGD,OAAO,CAACE,MAAR,CAAe,CAAf,CAAX;AACA,YAAIC,IAAI,GAAGH,OAAO,CAACI,MAAR,CAAe,CAAf,EAAkBC,IAAlB,EAAX;;AAEA,YAAIZ,YAAY,KAAK,IAArB,EAA2B;AAEvBC,UAAAA,eAAe,GAAG,IAAlB;AACAD,UAAAA,YAAY,GAAG,KAAf;AAEH;;AAED,gBAAQQ,IAAR;AAEI,eAAK,GAAL;AACI,gBAAIK,OAAO,GAAGC,WAAW,CAACJ,IAAD,CAAzB;;AACA,iBAAK,IAAIK,CAAC,GAAG,CAAR,EAAWC,EAAE,GAAGH,OAAO,CAACrB,MAA7B,EAAqCuB,CAAC,GAAGC,EAAzC,EAA6CD,CAAC,IAAI,CAAlD,EAAqD;AAEjDlB,cAAAA,KAAK,CAACoB,CAAN,GAAUJ,OAAO,CAACE,CAAC,GAAG,CAAL,CAAjB;AACAlB,cAAAA,KAAK,CAACqB,CAAN,GAAUL,OAAO,CAACE,CAAC,GAAG,CAAL,CAAjB;AACAjB,cAAAA,OAAO,CAACmB,CAAR,GAAYpB,KAAK,CAACoB,CAAlB;AACAnB,cAAAA,OAAO,CAACoB,CAAR,GAAYrB,KAAK,CAACqB,CAAlB;;AAEA,kBAAIH,CAAC,KAAK,CAAV,EAAa;AAETxD,gBAAAA,IAAI,CAAC4D,MAAL,CAAYtB,KAAK,CAACoB,CAAlB,EAAqBpB,KAAK,CAACqB,CAA3B;AAEH,eAJD,MAIO;AAEH3D,gBAAAA,IAAI,CAAC6D,MAAL,CAAYvB,KAAK,CAACoB,CAAlB,EAAqBpB,KAAK,CAACqB,CAA3B;AAEH;;AAED,kBAAIH,CAAC,KAAK,CAAN,IAAWd,eAAe,KAAK,IAAnC,EAAyCF,UAAU,CAACJ,IAAX,CAAgBE,KAAhB;AAE5C;;AACD;;AAEJ,eAAK,GAAL;AACI,gBAAIgB,OAAO,GAAGC,WAAW,CAACJ,IAAD,CAAzB;;AAEA,iBAAK,IAAIK,CAAC,GAAG,CAAR,EAAWC,EAAE,GAAGH,OAAO,CAACrB,MAA7B,EAAqCuB,CAAC,GAAGC,EAAzC,EAA6CD,CAAC,EAA9C,EAAkD;AAE9ClB,cAAAA,KAAK,CAACoB,CAAN,GAAUJ,OAAO,CAACE,CAAD,CAAjB;AACAjB,cAAAA,OAAO,CAACmB,CAAR,GAAYpB,KAAK,CAACoB,CAAlB;AACAnB,cAAAA,OAAO,CAACoB,CAAR,GAAYrB,KAAK,CAACqB,CAAlB;AACA3D,cAAAA,IAAI,CAAC6D,MAAL,CAAYvB,KAAK,CAACoB,CAAlB,EAAqBpB,KAAK,CAACqB,CAA3B;AAEA,kBAAIH,CAAC,KAAK,CAAN,IAAWd,eAAe,KAAK,IAAnC,EAAyCF,UAAU,CAACJ,IAAX,CAAgBE,KAAhB;AAE5C;;AACD;;AAEJ,eAAK,GAAL;AACI,gBAAIgB,OAAO,GAAGC,WAAW,CAACJ,IAAD,CAAzB;;AAEA,iBAAK,IAAIK,CAAC,GAAG,CAAR,EAAWC,EAAE,GAAGH,OAAO,CAACrB,MAA7B,EAAqCuB,CAAC,GAAGC,EAAzC,EAA6CD,CAAC,EAA9C,EAAkD;AAE9ClB,cAAAA,KAAK,CAACqB,CAAN,GAAUL,OAAO,CAACE,CAAD,CAAjB;AACAjB,cAAAA,OAAO,CAACmB,CAAR,GAAYpB,KAAK,CAACoB,CAAlB;AACAnB,cAAAA,OAAO,CAACoB,CAAR,GAAYrB,KAAK,CAACqB,CAAlB;AACA3D,cAAAA,IAAI,CAAC6D,MAAL,CAAYvB,KAAK,CAACoB,CAAlB,EAAqBpB,KAAK,CAACqB,CAA3B;AAEA,kBAAIH,CAAC,KAAK,CAAN,IAAWd,eAAe,KAAK,IAAnC,EAAyCF,UAAU,CAACJ,IAAX,CAAgBE,KAAhB;AAE5C;;AACD;;AAEJ,eAAK,GAAL;AACI,gBAAIgB,OAAO,GAAGC,WAAW,CAACJ,IAAD,CAAzB;;AAEA,iBAAK,IAAIK,CAAC,GAAG,CAAR,EAAWC,EAAE,GAAGH,OAAO,CAACrB,MAA7B,EAAqCuB,CAAC,GAAGC,EAAzC,EAA6CD,CAAC,IAAI,CAAlD,EAAqD;AAEjDlB,cAAAA,KAAK,CAACoB,CAAN,GAAUJ,OAAO,CAACE,CAAC,GAAG,CAAL,CAAjB;AACAlB,cAAAA,KAAK,CAACqB,CAAN,GAAUL,OAAO,CAACE,CAAC,GAAG,CAAL,CAAjB;AACAjB,cAAAA,OAAO,CAACmB,CAAR,GAAYpB,KAAK,CAACoB,CAAlB;AACAnB,cAAAA,OAAO,CAACoB,CAAR,GAAYrB,KAAK,CAACqB,CAAlB;AACA3D,cAAAA,IAAI,CAAC6D,MAAL,CAAYvB,KAAK,CAACoB,CAAlB,EAAqBpB,KAAK,CAACqB,CAA3B;AAEA,kBAAIH,CAAC,KAAK,CAAN,IAAWd,eAAe,KAAK,IAAnC,EAAyCF,UAAU,CAACJ,IAAX,CAAgBE,KAAhB;AAE5C;;AACD;;AAEJ,eAAK,GAAL;AACI,gBAAIgB,OAAO,GAAGC,WAAW,CAACJ,IAAD,CAAzB;;AAEA,iBAAK,IAAIK,CAAC,GAAG,CAAR,EAAWC,EAAE,GAAGH,OAAO,CAACrB,MAA7B,EAAqCuB,CAAC,GAAGC,EAAzC,EAA6CD,CAAC,IAAI,CAAlD,EAAqD;AAEjDxD,cAAAA,IAAI,CAAC8D,aAAL,CACIR,OAAO,CAACE,CAAC,GAAG,CAAL,CADX,EAEIF,OAAO,CAACE,CAAC,GAAG,CAAL,CAFX,EAGIF,OAAO,CAACE,CAAC,GAAG,CAAL,CAHX,EAIIF,OAAO,CAACE,CAAC,GAAG,CAAL,CAJX,EAKIF,OAAO,CAACE,CAAC,GAAG,CAAL,CALX,EAMIF,OAAO,CAACE,CAAC,GAAG,CAAL,CANX;AAQAjB,cAAAA,OAAO,CAACmB,CAAR,GAAYJ,OAAO,CAACE,CAAC,GAAG,CAAL,CAAnB;AACAjB,cAAAA,OAAO,CAACoB,CAAR,GAAYL,OAAO,CAACE,CAAC,GAAG,CAAL,CAAnB;AACAlB,cAAAA,KAAK,CAACoB,CAAN,GAAUJ,OAAO,CAACE,CAAC,GAAG,CAAL,CAAjB;AACAlB,cAAAA,KAAK,CAACqB,CAAN,GAAUL,OAAO,CAACE,CAAC,GAAG,CAAL,CAAjB;AAEA,kBAAIA,CAAC,KAAK,CAAN,IAAWd,eAAe,KAAK,IAAnC,EAAyCF,UAAU,CAACJ,IAAX,CAAgBE,KAAhB;AAE5C;;AACD;;AAEJ,eAAK,GAAL;AACI,gBAAIgB,OAAO,GAAGC,WAAW,CAACJ,IAAD,CAAzB;;AAEA,iBAAK,IAAIK,CAAC,GAAG,CAAR,EAAWC,EAAE,GAAGH,OAAO,CAACrB,MAA7B,EAAqCuB,CAAC,GAAGC,EAAzC,EAA6CD,CAAC,IAAI,CAAlD,EAAqD;AAEjDxD,cAAAA,IAAI,CAAC8D,aAAL,CACIC,aAAa,CAACzB,KAAK,CAACoB,CAAP,EAAUnB,OAAO,CAACmB,CAAlB,CADjB,EAEIK,aAAa,CAACzB,KAAK,CAACqB,CAAP,EAAUpB,OAAO,CAACoB,CAAlB,CAFjB,EAGIL,OAAO,CAACE,CAAC,GAAG,CAAL,CAHX,EAIIF,OAAO,CAACE,CAAC,GAAG,CAAL,CAJX,EAKIF,OAAO,CAACE,CAAC,GAAG,CAAL,CALX,EAMIF,OAAO,CAACE,CAAC,GAAG,CAAL,CANX;AAQAjB,cAAAA,OAAO,CAACmB,CAAR,GAAYJ,OAAO,CAACE,CAAC,GAAG,CAAL,CAAnB;AACAjB,cAAAA,OAAO,CAACoB,CAAR,GAAYL,OAAO,CAACE,CAAC,GAAG,CAAL,CAAnB;AACAlB,cAAAA,KAAK,CAACoB,CAAN,GAAUJ,OAAO,CAACE,CAAC,GAAG,CAAL,CAAjB;AACAlB,cAAAA,KAAK,CAACqB,CAAN,GAAUL,OAAO,CAACE,CAAC,GAAG,CAAL,CAAjB;AAEA,kBAAIA,CAAC,KAAK,CAAN,IAAWd,eAAe,KAAK,IAAnC,EAAyCF,UAAU,CAACJ,IAAX,CAAgBE,KAAhB;AAE5C;;AACD;;AAEJ,eAAK,GAAL;AACI,gBAAIgB,OAAO,GAAGC,WAAW,CAACJ,IAAD,CAAzB;;AAEA,iBAAK,IAAIK,CAAC,GAAG,CAAR,EAAWC,EAAE,GAAGH,OAAO,CAACrB,MAA7B,EAAqCuB,CAAC,GAAGC,EAAzC,EAA6CD,CAAC,IAAI,CAAlD,EAAqD;AAEjDxD,cAAAA,IAAI,CAACgE,gBAAL,CACIV,OAAO,CAACE,CAAC,GAAG,CAAL,CADX,EAEIF,OAAO,CAACE,CAAC,GAAG,CAAL,CAFX,EAGIF,OAAO,CAACE,CAAC,GAAG,CAAL,CAHX,EAIIF,OAAO,CAACE,CAAC,GAAG,CAAL,CAJX;AAMAjB,cAAAA,OAAO,CAACmB,CAAR,GAAYJ,OAAO,CAACE,CAAC,GAAG,CAAL,CAAnB;AACAjB,cAAAA,OAAO,CAACoB,CAAR,GAAYL,OAAO,CAACE,CAAC,GAAG,CAAL,CAAnB;AACAlB,cAAAA,KAAK,CAACoB,CAAN,GAAUJ,OAAO,CAACE,CAAC,GAAG,CAAL,CAAjB;AACAlB,cAAAA,KAAK,CAACqB,CAAN,GAAUL,OAAO,CAACE,CAAC,GAAG,CAAL,CAAjB;AAEA,kBAAIA,CAAC,KAAK,CAAN,IAAWd,eAAe,KAAK,IAAnC,EAAyCF,UAAU,CAACJ,IAAX,CAAgBE,KAAhB;AAE5C;;AACD;;AAEJ,eAAK,GAAL;AACI,gBAAIgB,OAAO,GAAGC,WAAW,CAACJ,IAAD,CAAzB;;AAEA,iBAAK,IAAIK,CAAC,GAAG,CAAR,EAAWC,EAAE,GAAGH,OAAO,CAACrB,MAA7B,EAAqCuB,CAAC,GAAGC,EAAzC,EAA6CD,CAAC,IAAI,CAAlD,EAAqD;AAEjD,kBAAIS,EAAE,GAAGF,aAAa,CAACzB,KAAK,CAACoB,CAAP,EAAUnB,OAAO,CAACmB,CAAlB,CAAtB;AACA,kBAAIQ,EAAE,GAAGH,aAAa,CAACzB,KAAK,CAACqB,CAAP,EAAUpB,OAAO,CAACoB,CAAlB,CAAtB;AACA3D,cAAAA,IAAI,CAACgE,gBAAL,CACIC,EADJ,EAEIC,EAFJ,EAGIZ,OAAO,CAACE,CAAC,GAAG,CAAL,CAHX,EAIIF,OAAO,CAACE,CAAC,GAAG,CAAL,CAJX;AAMAjB,cAAAA,OAAO,CAACmB,CAAR,GAAYO,EAAZ;AACA1B,cAAAA,OAAO,CAACoB,CAAR,GAAYO,EAAZ;AACA5B,cAAAA,KAAK,CAACoB,CAAN,GAAUJ,OAAO,CAACE,CAAC,GAAG,CAAL,CAAjB;AACAlB,cAAAA,KAAK,CAACqB,CAAN,GAAUL,OAAO,CAACE,CAAC,GAAG,CAAL,CAAjB;AAEA,kBAAIA,CAAC,KAAK,CAAN,IAAWd,eAAe,KAAK,IAAnC,EAAyCF,UAAU,CAACJ,IAAX,CAAgBE,KAAhB;AAE5C;;AACD;;AAEJ,eAAK,GAAL;AACI,gBAAIgB,OAAO,GAAGC,WAAW,CAACJ,IAAD,CAAzB;;AAEA,iBAAK,IAAIK,CAAC,GAAG,CAAR,EAAWC,EAAE,GAAGH,OAAO,CAACrB,MAA7B,EAAqCuB,CAAC,GAAGC,EAAzC,EAA6CD,CAAC,IAAI,CAAlD,EAAqD;AAEjD,kBAAIW,KAAK,GAAG7B,KAAK,CAAC8B,KAAN,EAAZ;AACA9B,cAAAA,KAAK,CAACoB,CAAN,GAAUJ,OAAO,CAACE,CAAC,GAAG,CAAL,CAAjB;AACAlB,cAAAA,KAAK,CAACqB,CAAN,GAAUL,OAAO,CAACE,CAAC,GAAG,CAAL,CAAjB;AACAjB,cAAAA,OAAO,CAACmB,CAAR,GAAYpB,KAAK,CAACoB,CAAlB;AACAnB,cAAAA,OAAO,CAACoB,CAAR,GAAYrB,KAAK,CAACqB,CAAlB;AACAU,cAAAA,eAAe,CACXrE,IADW,EACLsD,OAAO,CAACE,CAAD,CADF,EACOF,OAAO,CAACE,CAAC,GAAG,CAAL,CADd,EACuBF,OAAO,CAACE,CAAC,GAAG,CAAL,CAD9B,EACuCF,OAAO,CAACE,CAAC,GAAG,CAAL,CAD9C,EACuDF,OAAO,CAACE,CAAC,GAAG,CAAL,CAD9D,EACuEW,KADvE,EAC8E7B,KAD9E,CAAf;AAIA,kBAAIkB,CAAC,KAAK,CAAN,IAAWd,eAAe,KAAK,IAAnC,EAAyCF,UAAU,CAACJ,IAAX,CAAgBE,KAAhB;AAE5C;;AACD;;AAEJ,eAAK,GAAL;AACI,gBAAIgB,OAAO,GAAGC,WAAW,CAACJ,IAAD,CAAzB;;AAEA,iBAAK,IAAIK,CAAC,GAAG,CAAR,EAAWC,EAAE,GAAGH,OAAO,CAACrB,MAA7B,EAAqCuB,CAAC,GAAGC,EAAzC,EAA6CD,CAAC,IAAI,CAAlD,EAAqD;AAEjDlB,cAAAA,KAAK,CAACoB,CAAN,IAAWJ,OAAO,CAACE,CAAC,GAAG,CAAL,CAAlB;AACAlB,cAAAA,KAAK,CAACqB,CAAN,IAAWL,OAAO,CAACE,CAAC,GAAG,CAAL,CAAlB;AACAjB,cAAAA,OAAO,CAACmB,CAAR,GAAYpB,KAAK,CAACoB,CAAlB;AACAnB,cAAAA,OAAO,CAACoB,CAAR,GAAYrB,KAAK,CAACqB,CAAlB;;AAEA,kBAAIH,CAAC,KAAK,CAAV,EAAa;AAETxD,gBAAAA,IAAI,CAAC4D,MAAL,CAAYtB,KAAK,CAACoB,CAAlB,EAAqBpB,KAAK,CAACqB,CAA3B;AAEH,eAJD,MAIO;AAEH3D,gBAAAA,IAAI,CAAC6D,MAAL,CAAYvB,KAAK,CAACoB,CAAlB,EAAqBpB,KAAK,CAACqB,CAA3B;AAEH;;AAED,kBAAIH,CAAC,KAAK,CAAN,IAAWd,eAAe,KAAK,IAAnC,EAAyCF,UAAU,CAACJ,IAAX,CAAgBE,KAAhB;AAE5C;;AACD;;AAEJ,eAAK,GAAL;AACI,gBAAIgB,OAAO,GAAGC,WAAW,CAACJ,IAAD,CAAzB;;AAEA,iBAAK,IAAIK,CAAC,GAAG,CAAR,EAAWC,EAAE,GAAGH,OAAO,CAACrB,MAA7B,EAAqCuB,CAAC,GAAGC,EAAzC,EAA6CD,CAAC,EAA9C,EAAkD;AAE9ClB,cAAAA,KAAK,CAACoB,CAAN,IAAWJ,OAAO,CAACE,CAAD,CAAlB;AACAjB,cAAAA,OAAO,CAACmB,CAAR,GAAYpB,KAAK,CAACoB,CAAlB;AACAnB,cAAAA,OAAO,CAACoB,CAAR,GAAYrB,KAAK,CAACqB,CAAlB;AACA3D,cAAAA,IAAI,CAAC6D,MAAL,CAAYvB,KAAK,CAACoB,CAAlB,EAAqBpB,KAAK,CAACqB,CAA3B;AAEA,kBAAIH,CAAC,KAAK,CAAN,IAAWd,eAAe,KAAK,IAAnC,EAAyCF,UAAU,CAACJ,IAAX,CAAgBE,KAAhB;AAE5C;;AACD;;AAEJ,eAAK,GAAL;AACI,gBAAIgB,OAAO,GAAGC,WAAW,CAACJ,IAAD,CAAzB;;AAEA,iBAAK,IAAIK,CAAC,GAAG,CAAR,EAAWC,EAAE,GAAGH,OAAO,CAACrB,MAA7B,EAAqCuB,CAAC,GAAGC,EAAzC,EAA6CD,CAAC,EAA9C,EAAkD;AAE9ClB,cAAAA,KAAK,CAACqB,CAAN,IAAWL,OAAO,CAACE,CAAD,CAAlB;AACAjB,cAAAA,OAAO,CAACmB,CAAR,GAAYpB,KAAK,CAACoB,CAAlB;AACAnB,cAAAA,OAAO,CAACoB,CAAR,GAAYrB,KAAK,CAACqB,CAAlB;AACA3D,cAAAA,IAAI,CAAC6D,MAAL,CAAYvB,KAAK,CAACoB,CAAlB,EAAqBpB,KAAK,CAACqB,CAA3B;AAEA,kBAAIH,CAAC,KAAK,CAAN,IAAWd,eAAe,KAAK,IAAnC,EAAyCF,UAAU,CAACJ,IAAX,CAAgBE,KAAhB;AAE5C;;AACD;;AAEJ,eAAK,GAAL;AACI,gBAAIgB,OAAO,GAAGC,WAAW,CAACJ,IAAD,CAAzB;;AAEA,iBAAK,IAAIK,CAAC,GAAG,CAAR,EAAWC,EAAE,GAAGH,OAAO,CAACrB,MAA7B,EAAqCuB,CAAC,GAAGC,EAAzC,EAA6CD,CAAC,IAAI,CAAlD,EAAqD;AAEjDlB,cAAAA,KAAK,CAACoB,CAAN,IAAWJ,OAAO,CAACE,CAAC,GAAG,CAAL,CAAlB;AACAlB,cAAAA,KAAK,CAACqB,CAAN,IAAWL,OAAO,CAACE,CAAC,GAAG,CAAL,CAAlB;AACAjB,cAAAA,OAAO,CAACmB,CAAR,GAAYpB,KAAK,CAACoB,CAAlB;AACAnB,cAAAA,OAAO,CAACoB,CAAR,GAAYrB,KAAK,CAACqB,CAAlB;AACA3D,cAAAA,IAAI,CAAC6D,MAAL,CAAYvB,KAAK,CAACoB,CAAlB,EAAqBpB,KAAK,CAACqB,CAA3B;AAEA,kBAAIH,CAAC,KAAK,CAAN,IAAWd,eAAe,KAAK,IAAnC,EAAyCF,UAAU,CAACJ,IAAX,CAAgBE,KAAhB;AAE5C;;AACD;;AAEJ,eAAK,GAAL;AACI,gBAAIgB,OAAO,GAAGC,WAAW,CAACJ,IAAD,CAAzB;;AAEA,iBAAK,IAAIK,CAAC,GAAG,CAAR,EAAWC,EAAE,GAAGH,OAAO,CAACrB,MAA7B,EAAqCuB,CAAC,GAAGC,EAAzC,EAA6CD,CAAC,IAAI,CAAlD,EAAqD;AAEjDxD,cAAAA,IAAI,CAAC8D,aAAL,CACIxB,KAAK,CAACoB,CAAN,GAAUJ,OAAO,CAACE,CAAC,GAAG,CAAL,CADrB,EAEIlB,KAAK,CAACqB,CAAN,GAAUL,OAAO,CAACE,CAAC,GAAG,CAAL,CAFrB,EAGIlB,KAAK,CAACoB,CAAN,GAAUJ,OAAO,CAACE,CAAC,GAAG,CAAL,CAHrB,EAIIlB,KAAK,CAACqB,CAAN,GAAUL,OAAO,CAACE,CAAC,GAAG,CAAL,CAJrB,EAKIlB,KAAK,CAACoB,CAAN,GAAUJ,OAAO,CAACE,CAAC,GAAG,CAAL,CALrB,EAMIlB,KAAK,CAACqB,CAAN,GAAUL,OAAO,CAACE,CAAC,GAAG,CAAL,CANrB;AAQAjB,cAAAA,OAAO,CAACmB,CAAR,GAAYpB,KAAK,CAACoB,CAAN,GAAUJ,OAAO,CAACE,CAAC,GAAG,CAAL,CAA7B;AACAjB,cAAAA,OAAO,CAACoB,CAAR,GAAYrB,KAAK,CAACqB,CAAN,GAAUL,OAAO,CAACE,CAAC,GAAG,CAAL,CAA7B;AACAlB,cAAAA,KAAK,CAACoB,CAAN,IAAWJ,OAAO,CAACE,CAAC,GAAG,CAAL,CAAlB;AACAlB,cAAAA,KAAK,CAACqB,CAAN,IAAWL,OAAO,CAACE,CAAC,GAAG,CAAL,CAAlB;AAEA,kBAAIA,CAAC,KAAK,CAAN,IAAWd,eAAe,KAAK,IAAnC,EAAyCF,UAAU,CAACJ,IAAX,CAAgBE,KAAhB;AAE5C;;AACD;;AAEJ,eAAK,GAAL;AACI,gBAAIgB,OAAO,GAAGC,WAAW,CAACJ,IAAD,CAAzB;;AAEA,iBAAK,IAAIK,CAAC,GAAG,CAAR,EAAWC,EAAE,GAAGH,OAAO,CAACrB,MAA7B,EAAqCuB,CAAC,GAAGC,EAAzC,EAA6CD,CAAC,IAAI,CAAlD,EAAqD;AAEjDxD,cAAAA,IAAI,CAAC8D,aAAL,CACIC,aAAa,CAACzB,KAAK,CAACoB,CAAP,EAAUnB,OAAO,CAACmB,CAAlB,CADjB,EAEIK,aAAa,CAACzB,KAAK,CAACqB,CAAP,EAAUpB,OAAO,CAACoB,CAAlB,CAFjB,EAGIrB,KAAK,CAACoB,CAAN,GAAUJ,OAAO,CAACE,CAAC,GAAG,CAAL,CAHrB,EAIIlB,KAAK,CAACqB,CAAN,GAAUL,OAAO,CAACE,CAAC,GAAG,CAAL,CAJrB,EAKIlB,KAAK,CAACoB,CAAN,GAAUJ,OAAO,CAACE,CAAC,GAAG,CAAL,CALrB,EAMIlB,KAAK,CAACqB,CAAN,GAAUL,OAAO,CAACE,CAAC,GAAG,CAAL,CANrB;AAQAjB,cAAAA,OAAO,CAACmB,CAAR,GAAYpB,KAAK,CAACoB,CAAN,GAAUJ,OAAO,CAACE,CAAC,GAAG,CAAL,CAA7B;AACAjB,cAAAA,OAAO,CAACoB,CAAR,GAAYrB,KAAK,CAACqB,CAAN,GAAUL,OAAO,CAACE,CAAC,GAAG,CAAL,CAA7B;AACAlB,cAAAA,KAAK,CAACoB,CAAN,IAAWJ,OAAO,CAACE,CAAC,GAAG,CAAL,CAAlB;AACAlB,cAAAA,KAAK,CAACqB,CAAN,IAAWL,OAAO,CAACE,CAAC,GAAG,CAAL,CAAlB;AAEA,kBAAIA,CAAC,KAAK,CAAN,IAAWd,eAAe,KAAK,IAAnC,EAAyCF,UAAU,CAACJ,IAAX,CAAgBE,KAAhB;AAE5C;;AACD;;AAEJ,eAAK,GAAL;AACI,gBAAIgB,OAAO,GAAGC,WAAW,CAACJ,IAAD,CAAzB;;AAEA,iBAAK,IAAIK,CAAC,GAAG,CAAR,EAAWC,EAAE,GAAGH,OAAO,CAACrB,MAA7B,EAAqCuB,CAAC,GAAGC,EAAzC,EAA6CD,CAAC,IAAI,CAAlD,EAAqD;AAEjDxD,cAAAA,IAAI,CAACgE,gBAAL,CACI1B,KAAK,CAACoB,CAAN,GAAUJ,OAAO,CAACE,CAAC,GAAG,CAAL,CADrB,EAEIlB,KAAK,CAACqB,CAAN,GAAUL,OAAO,CAACE,CAAC,GAAG,CAAL,CAFrB,EAGIlB,KAAK,CAACoB,CAAN,GAAUJ,OAAO,CAACE,CAAC,GAAG,CAAL,CAHrB,EAIIlB,KAAK,CAACqB,CAAN,GAAUL,OAAO,CAACE,CAAC,GAAG,CAAL,CAJrB;AAMAjB,cAAAA,OAAO,CAACmB,CAAR,GAAYpB,KAAK,CAACoB,CAAN,GAAUJ,OAAO,CAACE,CAAC,GAAG,CAAL,CAA7B;AACAjB,cAAAA,OAAO,CAACoB,CAAR,GAAYrB,KAAK,CAACqB,CAAN,GAAUL,OAAO,CAACE,CAAC,GAAG,CAAL,CAA7B;AACAlB,cAAAA,KAAK,CAACoB,CAAN,IAAWJ,OAAO,CAACE,CAAC,GAAG,CAAL,CAAlB;AACAlB,cAAAA,KAAK,CAACqB,CAAN,IAAWL,OAAO,CAACE,CAAC,GAAG,CAAL,CAAlB;AAEA,kBAAIA,CAAC,KAAK,CAAN,IAAWd,eAAe,KAAK,IAAnC,EAAyCF,UAAU,CAACJ,IAAX,CAAgBE,KAAhB;AAE5C;;AACD;;AAEJ,eAAK,GAAL;AACI,gBAAIgB,OAAO,GAAGC,WAAW,CAACJ,IAAD,CAAzB;;AAEA,iBAAK,IAAIK,CAAC,GAAG,CAAR,EAAWC,EAAE,GAAGH,OAAO,CAACrB,MAA7B,EAAqCuB,CAAC,GAAGC,EAAzC,EAA6CD,CAAC,IAAI,CAAlD,EAAqD;AAEjD,kBAAIS,EAAE,GAAGF,aAAa,CAACzB,KAAK,CAACoB,CAAP,EAAUnB,OAAO,CAACmB,CAAlB,CAAtB;AACA,kBAAIQ,EAAE,GAAGH,aAAa,CAACzB,KAAK,CAACqB,CAAP,EAAUpB,OAAO,CAACoB,CAAlB,CAAtB;AACA3D,cAAAA,IAAI,CAACgE,gBAAL,CACIC,EADJ,EAEIC,EAFJ,EAGI5B,KAAK,CAACoB,CAAN,GAAUJ,OAAO,CAACE,CAAC,GAAG,CAAL,CAHrB,EAIIlB,KAAK,CAACqB,CAAN,GAAUL,OAAO,CAACE,CAAC,GAAG,CAAL,CAJrB;AAMAjB,cAAAA,OAAO,CAACmB,CAAR,GAAYO,EAAZ;AACA1B,cAAAA,OAAO,CAACoB,CAAR,GAAYO,EAAZ;AACA5B,cAAAA,KAAK,CAACoB,CAAN,GAAUpB,KAAK,CAACoB,CAAN,GAAUJ,OAAO,CAACE,CAAC,GAAG,CAAL,CAA3B;AACAlB,cAAAA,KAAK,CAACqB,CAAN,GAAUrB,KAAK,CAACqB,CAAN,GAAUL,OAAO,CAACE,CAAC,GAAG,CAAL,CAA3B;AAEA,kBAAIA,CAAC,KAAK,CAAN,IAAWd,eAAe,KAAK,IAAnC,EAAyCF,UAAU,CAACJ,IAAX,CAAgBE,KAAhB;AAE5C;;AACD;;AAEJ,eAAK,GAAL;AACI,gBAAIgB,OAAO,GAAGC,WAAW,CAACJ,IAAD,CAAzB;;AAEA,iBAAK,IAAIK,CAAC,GAAG,CAAR,EAAWC,EAAE,GAAGH,OAAO,CAACrB,MAA7B,EAAqCuB,CAAC,GAAGC,EAAzC,EAA6CD,CAAC,IAAI,CAAlD,EAAqD;AAEjD,kBAAIW,KAAK,GAAG7B,KAAK,CAAC8B,KAAN,EAAZ;AACA9B,cAAAA,KAAK,CAACoB,CAAN,IAAWJ,OAAO,CAACE,CAAC,GAAG,CAAL,CAAlB;AACAlB,cAAAA,KAAK,CAACqB,CAAN,IAAWL,OAAO,CAACE,CAAC,GAAG,CAAL,CAAlB;AACAjB,cAAAA,OAAO,CAACmB,CAAR,GAAYpB,KAAK,CAACoB,CAAlB;AACAnB,cAAAA,OAAO,CAACoB,CAAR,GAAYrB,KAAK,CAACqB,CAAlB;AACAU,cAAAA,eAAe,CACXrE,IADW,EACLsD,OAAO,CAACE,CAAD,CADF,EACOF,OAAO,CAACE,CAAC,GAAG,CAAL,CADd,EACuBF,OAAO,CAACE,CAAC,GAAG,CAAL,CAD9B,EACuCF,OAAO,CAACE,CAAC,GAAG,CAAL,CAD9C,EACuDF,OAAO,CAACE,CAAC,GAAG,CAAL,CAD9D,EACuEW,KADvE,EAC8E7B,KAD9E,CAAf;AAIA,kBAAIkB,CAAC,KAAK,CAAN,IAAWd,eAAe,KAAK,IAAnC,EAAyCF,UAAU,CAACJ,IAAX,CAAgBE,KAAhB;AAE5C;;AACD;;AAEJ,eAAK,GAAL;AACA,eAAK,GAAL;AACItC,YAAAA,IAAI,CAACsE,WAAL,CAAiBC,SAAjB,GAA6B,IAA7B;;AAEA,gBAAIvE,IAAI,CAACsE,WAAL,CAAiBE,MAAjB,CAAwBvC,MAAxB,GAAiC,CAArC,EAAwC;AAEpC;AACAK,cAAAA,KAAK,CAACF,IAAN,CAAWI,UAAX;AACAxC,cAAAA,IAAI,CAACsE,WAAL,CAAiBG,YAAjB,CAA8BrC,IAA9B,CAAmCE,KAAnC;AACAG,cAAAA,YAAY,GAAG,IAAf;AAEH;;AACD;;AAEJ;AACItB,YAAAA,OAAO,CAACuD,IAAR,CAAa1B,OAAb;AAxXR,SAd6C,CA0Y7C;;;AAEAN,QAAAA,eAAe,GAAG,KAAlB;AAEH;;AAED,aAAO1C,IAAP;AAEH;AAEP;;;;;;;;;;AASM,aAASqE,eAAT,CAAyBrE,IAAzB,EAA+BiE,EAA/B,EAAmCC,EAAnC,EAAuCS,eAAvC,EAAwDC,cAAxD,EAAwEC,UAAxE,EAAoFV,KAApF,EAA2FW,GAA3F,EAAgG;AAE5FH,MAAAA,eAAe,GAAGA,eAAe,GAAGI,IAAI,CAACC,EAAvB,GAA4B,GAA9C,CAF4F,CAI5F;;AACAf,MAAAA,EAAE,GAAGc,IAAI,CAACE,GAAL,CAAShB,EAAT,CAAL;AACAC,MAAAA,EAAE,GAAGa,IAAI,CAACE,GAAL,CAASf,EAAT,CAAL,CAN4F,CAQ5F;;AACA,UAAIgB,GAAG,GAAG,CAACf,KAAK,CAACT,CAAN,GAAUoB,GAAG,CAACpB,CAAf,IAAoB,GAA9B;AACA,UAAIyB,GAAG,GAAG,CAAChB,KAAK,CAACR,CAAN,GAAUmB,GAAG,CAACnB,CAAf,IAAoB,GAA9B;AACA,UAAIyB,GAAG,GAAGL,IAAI,CAACM,GAAL,CAASV,eAAT,IAA4BO,GAA5B,GAAkCH,IAAI,CAACO,GAAL,CAASX,eAAT,IAA4BQ,GAAxE;AACA,UAAII,GAAG,GAAG,CAAER,IAAI,CAACO,GAAL,CAASX,eAAT,CAAF,GAA8BO,GAA9B,GAAoCH,IAAI,CAACM,GAAL,CAASV,eAAT,IAA4BQ,GAA1E,CAZ4F,CAc5F;;AACA,UAAIK,GAAG,GAAGvB,EAAE,GAAGA,EAAf;AACA,UAAIwB,GAAG,GAAGvB,EAAE,GAAGA,EAAf;AACA,UAAIwB,IAAI,GAAGN,GAAG,GAAGA,GAAjB;AACA,UAAIO,IAAI,GAAGJ,GAAG,GAAGA,GAAjB,CAlB4F,CAoB5F;;AACA,UAAIK,EAAE,GAAGF,IAAI,GAAGF,GAAP,GAAaG,IAAI,GAAGF,GAA7B;;AAEA,UAAIG,EAAE,GAAG,CAAT,EAAY;AAER;AACA,YAAIC,CAAC,GAAGd,IAAI,CAACe,IAAL,CAAUF,EAAV,CAAR;AACA3B,QAAAA,EAAE,GAAG4B,CAAC,GAAG5B,EAAT;AACAC,QAAAA,EAAE,GAAG2B,CAAC,GAAG3B,EAAT;AACAsB,QAAAA,GAAG,GAAGvB,EAAE,GAAGA,EAAX;AACAwB,QAAAA,GAAG,GAAGvB,EAAE,GAAGA,EAAX;AAEH;;AAED,UAAI6B,EAAE,GAAIP,GAAG,GAAGG,IAAN,GAAaF,GAAG,GAAGC,IAA7B;AACA,UAAIM,EAAE,GAAG,CAACR,GAAG,GAAGC,GAAN,GAAYM,EAAb,IAAmBA,EAA5B;AACA,UAAIE,CAAC,GAAGlB,IAAI,CAACe,IAAL,CAAUf,IAAI,CAACmB,GAAL,CAAS,CAAT,EAAYF,EAAZ,CAAV,CAAR;AACA,UAAIpB,cAAc,KAAKC,UAAvB,EAAmCoB,CAAC,GAAG,CAAEA,CAAN;AACnC,UAAIE,GAAG,GAAGF,CAAC,GAAGhC,EAAJ,GAASsB,GAAT,GAAerB,EAAzB;AACA,UAAIkC,GAAG,GAAG,CAAEH,CAAF,GAAM/B,EAAN,GAAWkB,GAAX,GAAiBnB,EAA3B,CAvC4F,CAyC5F;;AACA,UAAIoC,EAAE,GAAGtB,IAAI,CAACM,GAAL,CAASV,eAAT,IAA4BwB,GAA5B,GAAkCpB,IAAI,CAACO,GAAL,CAASX,eAAT,IAA4ByB,GAA9D,GAAoE,CAACjC,KAAK,CAACT,CAAN,GAAUoB,GAAG,CAACpB,CAAf,IAAoB,CAAjG;AACA,UAAI4C,EAAE,GAAGvB,IAAI,CAACO,GAAL,CAASX,eAAT,IAA4BwB,GAA5B,GAAkCpB,IAAI,CAACM,GAAL,CAASV,eAAT,IAA4ByB,GAA9D,GAAoE,CAACjC,KAAK,CAACR,CAAN,GAAUmB,GAAG,CAACnB,CAAf,IAAoB,CAAjG,CA3C4F,CA6C5F;;AACA,UAAI4C,KAAK,GAAGC,QAAQ,CAAC,CAAD,EAAI,CAAJ,EAAO,CAACpB,GAAG,GAAGe,GAAP,IAAclC,EAArB,EAAyB,CAACsB,GAAG,GAAGa,GAAP,IAAclC,EAAvC,CAApB;AACA,UAAIuC,KAAK,GAAGD,QAAQ,CAAC,CAACpB,GAAG,GAAGe,GAAP,IAAclC,EAAf,EAAmB,CAACsB,GAAG,GAAGa,GAAP,IAAclC,EAAjC,EAAqC,CAAC,CAAEkB,GAAF,GAAQe,GAAT,IAAgBlC,EAArD,EAAyD,CAAC,CAAEsB,GAAF,GAAQa,GAAT,IAAgBlC,EAAzE,CAAR,IAAwFa,IAAI,CAACC,EAAL,GAAU,CAAlG,CAAZ;AAEAhF,MAAAA,IAAI,CAACsE,WAAL,CAAiBoC,UAAjB,CAA4BL,EAA5B,EAAgCC,EAAhC,EAAoCrC,EAApC,EAAwCC,EAAxC,EAA4CqC,KAA5C,EAAmDA,KAAK,GAAGE,KAA3D,EAAkE5B,UAAU,KAAK,CAAjF,EAAoFF,eAApF;AAEH;;AAED,aAAS6B,QAAT,CAAkBG,EAAlB,EAAsBC,EAAtB,EAA0BC,EAA1B,EAA8BC,EAA9B,EAAkC;AAE9B,UAAIC,GAAG,GAAGJ,EAAE,GAAGE,EAAL,GAAUD,EAAE,GAAGE,EAAzB;AACA,UAAIE,GAAG,GAAGjC,IAAI,CAACe,IAAL,CAAUa,EAAE,GAAGA,EAAL,GAAUC,EAAE,GAAGA,EAAzB,IAA+B7B,IAAI,CAACe,IAAL,CAAUe,EAAE,GAAGA,EAAL,GAAUC,EAAE,GAAGA,EAAzB,CAAzC;AACA,UAAIG,GAAG,GAAGlC,IAAI,CAACmC,IAAL,CAAUnC,IAAI,CAACmB,GAAL,CAAS,CAAE,CAAX,EAAcnB,IAAI,CAACoC,GAAL,CAAS,CAAT,EAAYJ,GAAG,GAAGC,GAAlB,CAAd,CAAV,CAAV,CAJ8B,CAI8B;;AAC5D,UAAKL,EAAE,GAAGG,EAAL,GAAUF,EAAE,GAAGC,EAAhB,GAAsB,CAA1B,EAA6BI,GAAG,GAAG,CAAEA,GAAR;AAC7B,aAAOA,GAAP;AAEH;AAEP;;;;;;AAIM,aAASpG,aAAT,CAAuBT,IAAvB,EAA6B;AAEzB,UAAIsD,CAAC,GAAG0D,UAAU,CAAChH,IAAI,CAACwC,YAAL,CAAkB,GAAlB,KAA0B,CAA3B,CAAlB;AACA,UAAIe,CAAC,GAAGyD,UAAU,CAAChH,IAAI,CAACwC,YAAL,CAAkB,GAAlB,KAA0B,CAA3B,CAAlB;AACA,UAAIqB,EAAE,GAAGmD,UAAU,CAAChH,IAAI,CAACwC,YAAL,CAAkB,IAAlB,KAA2B,CAA5B,CAAnB;AACA,UAAIsB,EAAE,GAAGkD,UAAU,CAAChH,IAAI,CAACwC,YAAL,CAAkB,IAAlB,KAA2B,CAA5B,CAAnB;AACA,UAAIyE,CAAC,GAAGD,UAAU,CAAChH,IAAI,CAACwC,YAAL,CAAkB,OAAlB,CAAD,CAAlB;AACA,UAAI0E,CAAC,GAAGF,UAAU,CAAChH,IAAI,CAACwC,YAAL,CAAkB,QAAlB,CAAD,CAAlB;AAEA,UAAI5C,IAAI,GAAG,IAAInB,SAAJ,EAAX;AACAmB,MAAAA,IAAI,CAAC4D,MAAL,CAAYF,CAAC,GAAG,IAAIO,EAApB,EAAwBN,CAAxB;AACA3D,MAAAA,IAAI,CAAC6D,MAAL,CAAYH,CAAC,GAAG2D,CAAJ,GAAQ,IAAIpD,EAAxB,EAA4BN,CAA5B;AACA,UAAIM,EAAE,KAAK,CAAP,IAAYC,EAAE,KAAK,CAAvB,EAA0BlE,IAAI,CAAC8D,aAAL,CAAmBJ,CAAC,GAAG2D,CAAvB,EAA0B1D,CAA1B,EAA6BD,CAAC,GAAG2D,CAAjC,EAAoC1D,CAApC,EAAuCD,CAAC,GAAG2D,CAA3C,EAA8C1D,CAAC,GAAG,IAAIO,EAAtD;AAC1BlE,MAAAA,IAAI,CAAC6D,MAAL,CAAYH,CAAC,GAAG2D,CAAhB,EAAmB1D,CAAC,GAAG2D,CAAJ,GAAQ,IAAIpD,EAA/B;AACA,UAAID,EAAE,KAAK,CAAP,IAAYC,EAAE,KAAK,CAAvB,EAA0BlE,IAAI,CAAC8D,aAAL,CAAmBJ,CAAC,GAAG2D,CAAvB,EAA0B1D,CAAC,GAAG2D,CAA9B,EAAiC5D,CAAC,GAAG2D,CAArC,EAAwC1D,CAAC,GAAG2D,CAA5C,EAA+C5D,CAAC,GAAG2D,CAAJ,GAAQ,IAAIpD,EAA3D,EAA+DN,CAAC,GAAG2D,CAAnE;AAC1BtH,MAAAA,IAAI,CAAC6D,MAAL,CAAYH,CAAC,GAAG,IAAIO,EAApB,EAAwBN,CAAC,GAAG2D,CAA5B;;AAEA,UAAIrD,EAAE,KAAK,CAAP,IAAYC,EAAE,KAAK,CAAvB,EAA0B;AAEtBlE,QAAAA,IAAI,CAAC8D,aAAL,CAAmBJ,CAAnB,EAAsBC,CAAC,GAAG2D,CAA1B,EAA6B5D,CAA7B,EAAgCC,CAAC,GAAG2D,CAApC,EAAuC5D,CAAvC,EAA0CC,CAAC,GAAG2D,CAAJ,GAAQ,IAAIpD,EAAtD;AAEH;;AAEDlE,MAAAA,IAAI,CAAC6D,MAAL,CAAYH,CAAZ,EAAeC,CAAC,GAAG,IAAIO,EAAvB;;AAEA,UAAID,EAAE,KAAK,CAAP,IAAYC,EAAE,KAAK,CAAvB,EAA0B;AAEtBlE,QAAAA,IAAI,CAAC8D,aAAL,CAAmBJ,CAAnB,EAAsBC,CAAtB,EAAyBD,CAAzB,EAA4BC,CAA5B,EAA+BD,CAAC,GAAG,IAAIO,EAAvC,EAA2CN,CAA3C;AAEH;;AAED,aAAO3D,IAAP;AAEH;;AAED,aAASc,gBAAT,CAA0BV,IAA1B,EAAgC;AAE5B,eAASmH,QAAT,CAAkBzE,KAAlB,EAAyB0E,CAAzB,EAA4BC,CAA5B,EAA+B;AAE3B,YAAI/D,CAAC,GAAG0D,UAAU,CAACI,CAAD,CAAlB;AACA,YAAI7D,CAAC,GAAGyD,UAAU,CAACK,CAAD,CAAlB;;AAEA,YAAIC,KAAK,KAAK,CAAd,EAAiB;AAEb1H,UAAAA,IAAI,CAAC4D,MAAL,CAAYF,CAAZ,EAAeC,CAAf;AAEH,SAJD,MAIO;AAEH3D,UAAAA,IAAI,CAAC6D,MAAL,CAAYH,CAAZ,EAAeC,CAAf;AAEH;;AAED+D,QAAAA,KAAK;AAER;;AAED,UAAIC,KAAK,GAAG,iCAAZ;AAEA,UAAI3H,IAAI,GAAG,IAAInB,SAAJ,EAAX;AAEA,UAAI6I,KAAK,GAAG,CAAZ;AAEAtH,MAAAA,IAAI,CAACwC,YAAL,CAAkB,QAAlB,EAA4BgF,OAA5B,CAAoCD,KAApC,EAA2CJ,QAA3C;AAEAvH,MAAAA,IAAI,CAACsE,WAAL,CAAiBC,SAAjB,GAA6B,IAA7B;AAEA,aAAOvE,IAAP;AAEH;;AAED,aAASe,iBAAT,CAA2BX,IAA3B,EAAiC;AAE7B,eAASmH,QAAT,CAAkBzE,KAAlB,EAAyB0E,CAAzB,EAA4BC,CAA5B,EAA+B;AAE3B,YAAI/D,CAAC,GAAG0D,UAAU,CAACI,CAAD,CAAlB;AACA,YAAI7D,CAAC,GAAGyD,UAAU,CAACK,CAAD,CAAlB;;AAEA,YAAIC,KAAK,KAAK,CAAd,EAAiB;AAEb1H,UAAAA,IAAI,CAAC4D,MAAL,CAAYF,CAAZ,EAAeC,CAAf;AAEH,SAJD,MAIO;AAEH3D,UAAAA,IAAI,CAAC6D,MAAL,CAAYH,CAAZ,EAAeC,CAAf;AAEH;;AAED+D,QAAAA,KAAK;AAER;;AAED,UAAIC,KAAK,GAAG,iCAAZ;AAEA,UAAI3H,IAAI,GAAG,IAAInB,SAAJ,EAAX;AAEA,UAAI6I,KAAK,GAAG,CAAZ;AAEAtH,MAAAA,IAAI,CAACwC,YAAL,CAAkB,QAAlB,EAA4BgF,OAA5B,CAAoCD,KAApC,EAA2CJ,QAA3C;AAEAvH,MAAAA,IAAI,CAACsE,WAAL,CAAiBC,SAAjB,GAA6B,KAA7B;AAEA,aAAOvE,IAAP;AAEH;;AAED,aAASgB,eAAT,CAAyBZ,IAAzB,EAA+B;AAE3B,UAAIsD,CAAC,GAAG0D,UAAU,CAAChH,IAAI,CAACwC,YAAL,CAAkB,IAAlB,CAAD,CAAlB;AACA,UAAIe,CAAC,GAAGyD,UAAU,CAAChH,IAAI,CAACwC,YAAL,CAAkB,IAAlB,CAAD,CAAlB;AACA,UAAIiF,CAAC,GAAGT,UAAU,CAAChH,IAAI,CAACwC,YAAL,CAAkB,GAAlB,CAAD,CAAlB;AAEA,UAAIkF,OAAO,GAAG,IAAIlJ,IAAJ,EAAd;AACAkJ,MAAAA,OAAO,CAACC,MAAR,CAAerE,CAAf,EAAkBC,CAAlB,EAAqBkE,CAArB,EAAwB,CAAxB,EAA2B9C,IAAI,CAACC,EAAL,GAAU,CAArC;AAEA,UAAIhF,IAAI,GAAG,IAAInB,SAAJ,EAAX;AACAmB,MAAAA,IAAI,CAACgI,QAAL,CAAcpG,IAAd,CAAmBkG,OAAnB;AAEA,aAAO9H,IAAP;AAEH;;AAED,aAASiB,gBAAT,CAA0Bb,IAA1B,EAAgC;AAE5B,UAAIsD,CAAC,GAAG0D,UAAU,CAAChH,IAAI,CAACwC,YAAL,CAAkB,IAAlB,CAAD,CAAlB;AACA,UAAIe,CAAC,GAAGyD,UAAU,CAAChH,IAAI,CAACwC,YAAL,CAAkB,IAAlB,CAAD,CAAlB;AACA,UAAIqB,EAAE,GAAGmD,UAAU,CAAChH,IAAI,CAACwC,YAAL,CAAkB,IAAlB,CAAD,CAAnB;AACA,UAAIsB,EAAE,GAAGkD,UAAU,CAAChH,IAAI,CAACwC,YAAL,CAAkB,IAAlB,CAAD,CAAnB;AAEA,UAAIkF,OAAO,GAAG,IAAIlJ,IAAJ,EAAd;AACAkJ,MAAAA,OAAO,CAACpB,UAAR,CAAmBhD,CAAnB,EAAsBC,CAAtB,EAAyBM,EAAzB,EAA6BC,EAA7B,EAAiC,CAAjC,EAAoCa,IAAI,CAACC,EAAL,GAAU,CAA9C;AAEA,UAAIhF,IAAI,GAAG,IAAInB,SAAJ,EAAX;AACAmB,MAAAA,IAAI,CAACgI,QAAL,CAAcpG,IAAd,CAAmBkG,OAAnB;AAEA,aAAO9H,IAAP;AAEH;;AAED,aAASkB,aAAT,CAAuBd,IAAvB,EAA6B;AAEzB,UAAI6H,EAAE,GAAGb,UAAU,CAAChH,IAAI,CAACwC,YAAL,CAAkB,IAAlB,CAAD,CAAnB;AACA,UAAIsF,EAAE,GAAGd,UAAU,CAAChH,IAAI,CAACwC,YAAL,CAAkB,IAAlB,CAAD,CAAnB;AACA,UAAIuF,EAAE,GAAGf,UAAU,CAAChH,IAAI,CAACwC,YAAL,CAAkB,IAAlB,CAAD,CAAnB;AACA,UAAIwF,EAAE,GAAGhB,UAAU,CAAChH,IAAI,CAACwC,YAAL,CAAkB,IAAlB,CAAD,CAAnB;AAEA,UAAI5C,IAAI,GAAG,IAAInB,SAAJ,EAAX;AACAmB,MAAAA,IAAI,CAAC4D,MAAL,CAAYqE,EAAZ,EAAgBC,EAAhB;AACAlI,MAAAA,IAAI,CAAC6D,MAAL,CAAYsE,EAAZ,EAAgBC,EAAhB;AACApI,MAAAA,IAAI,CAACsE,WAAL,CAAiBC,SAAjB,GAA6B,KAA7B;AAEA,aAAOvE,IAAP;AAEH,KA9uBkB,CAgvBnB;;;AAEA,aAASU,UAAT,CAAoBN,IAApB,EAA0BC,KAA1B,EAAiC;AAE7BA,MAAAA,KAAK,GAAGjB,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBgB,KAAlB,CAAR,CAF6B,CAEK;;AAElC,eAASgI,QAAT,CAAkBC,OAAlB,EAA2BC,MAA3B,EAAmCC,cAAnC,EAAmD;AAE/C,YAAIA,cAAc,KAAKlH,SAAvB,EAAkCkH,cAAc,GAAG,SAASpG,IAAT,CAAcqG,CAAd,EAAiB;AAEhE,iBAAOA,CAAP;AAEH,SAJiC;AAMlC,YAAIrI,IAAI,CAACO,YAAL,CAAkB2H,OAAlB,CAAJ,EAAgCjI,KAAK,CAACkI,MAAD,CAAL,GAAgBC,cAAc,CAACpI,IAAI,CAACwC,YAAL,CAAkB0F,OAAlB,CAAD,CAA9B;AAChC,YAAIlI,IAAI,CAACC,KAAL,IAAcD,IAAI,CAACC,KAAL,CAAWiI,OAAX,MAAwB,EAA1C,EAA8CjI,KAAK,CAACkI,MAAD,CAAL,GAAgBC,cAAc,CAACpI,IAAI,CAACC,KAAL,CAAWiI,OAAX,CAAD,CAA9B;AAEjD;;AAED,eAASI,KAAT,CAAeD,CAAf,EAAkB;AAEd,eAAO1D,IAAI,CAACmB,GAAL,CAAS,CAAT,EAAYnB,IAAI,CAACoC,GAAL,CAAS,CAAT,EAAYC,UAAU,CAACqB,CAAD,CAAtB,CAAZ,CAAP;AAEH;;AAED,eAASE,QAAT,CAAkBF,CAAlB,EAAqB;AAEjB,eAAO1D,IAAI,CAACmB,GAAL,CAAS,CAAT,EAAYkB,UAAU,CAACqB,CAAD,CAAtB,CAAP;AAEH;;AAEDJ,MAAAA,QAAQ,CAAC,MAAD,EAAS,MAAT,CAAR;AACAA,MAAAA,QAAQ,CAAC,cAAD,EAAiB,aAAjB,EAAgCK,KAAhC,CAAR;AACAL,MAAAA,QAAQ,CAAC,QAAD,EAAW,QAAX,CAAR;AACAA,MAAAA,QAAQ,CAAC,gBAAD,EAAmB,eAAnB,EAAoCK,KAApC,CAAR;AACAL,MAAAA,QAAQ,CAAC,cAAD,EAAiB,aAAjB,EAAgCM,QAAhC,CAAR;AACAN,MAAAA,QAAQ,CAAC,iBAAD,EAAoB,gBAApB,CAAR;AACAA,MAAAA,QAAQ,CAAC,gBAAD,EAAmB,eAAnB,CAAR;AACAA,MAAAA,QAAQ,CAAC,mBAAD,EAAsB,kBAAtB,EAA0CM,QAA1C,CAAR;AAEA,aAAOtI,KAAP;AAEH,KA1xBkB,CA4xBnB;;;AAEA,aAAS0D,aAAT,CAAuByD,CAAvB,EAA0BC,CAA1B,EAA6B;AAEzB,aAAOD,CAAC,IAAIC,CAAC,GAAGD,CAAR,CAAR;AAEH;;AAED,aAASjE,WAAT,CAAqBqF,MAArB,EAA6B;AAEzB,UAAIC,KAAK,GAAGD,MAAM,CAACE,KAAP,CAAa,qBAAb,CAAZ;;AAEA,WAAK,IAAI9G,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6G,KAAK,CAAC5G,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AAEnC,YAAI+G,MAAM,GAAGF,KAAK,CAAC7G,CAAD,CAAlB,CAFmC,CAInC;AACA;;AAEA,YAAI+G,MAAM,CAACC,OAAP,CAAe,GAAf,MAAwBD,MAAM,CAACE,WAAP,CAAmB,GAAnB,CAA5B,EAAqD;AAEjD,cAAIH,KAAK,GAAGC,MAAM,CAACD,KAAP,CAAa,GAAb,CAAZ;;AAEA,eAAK,IAAIjD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGiD,KAAK,CAAC7G,MAA1B,EAAkC4D,CAAC,EAAnC,EAAuC;AAEnCgD,YAAAA,KAAK,CAACK,MAAN,CAAalH,CAAC,GAAG6D,CAAJ,GAAQ,CAArB,EAAwB,CAAxB,EAA2B,OAAOiD,KAAK,CAACjD,CAAD,CAAvC;AAEH;AAEJ;;AAEDgD,QAAAA,KAAK,CAAC7G,CAAD,CAAL,GAAWoF,UAAU,CAAC2B,MAAD,CAArB;AAEH;;AAED,aAAOF,KAAP;AAGH;;AAED,aAASrI,gBAAT,CAA0BJ,IAA1B,EAAgC;AAE5B,UAAI,CAACA,IAAI,CAACO,YAAL,CAAkB,WAAlB,CAAL,EAAqC;AAEjC,eAAO,IAAP;AAEH;;AAED,UAAIJ,SAAS,GAAG4I,kBAAkB,CAAC/I,IAAD,CAAlC;;AAEA,UAAI8B,cAAc,CAACD,MAAf,GAAwB,CAA5B,EAA+B;AAE3B1B,QAAAA,SAAS,CAAC6I,WAAV,CAAsBlH,cAAc,CAACA,cAAc,CAACD,MAAf,GAAwB,CAAzB,CAApC;AAEH;;AAEDP,MAAAA,gBAAgB,CAACU,IAAjB,CAAsB7B,SAAtB;AACA2B,MAAAA,cAAc,CAACN,IAAf,CAAoBrB,SAApB;AAEA,aAAOA,SAAP;AAEH;;AAED,aAAS4I,kBAAT,CAA4B/I,IAA5B,EAAkC;AAE9B,UAAIG,SAAS,GAAG,IAAI5B,OAAJ,EAAhB;AACA,UAAI+C,gBAAgB,GAAG2H,cAAvB;AACA,UAAIC,eAAe,GAAGlJ,IAAI,CAACwC,YAAL,CAAkB,WAAlB,EAA+BkG,KAA/B,CAAqC,GAArC,CAAtB;;AAEA,WAAK,IAAIS,MAAM,GAAGD,eAAe,CAACrH,MAAhB,GAAyB,CAA3C,EAA8CsH,MAAM,IAAI,CAAxD,EAA2DA,MAAM,EAAjE,EAAqE;AAEjE,YAAIC,aAAa,GAAGF,eAAe,CAACC,MAAD,CAAf,CAAwBlG,IAAxB,EAApB;AAEA,YAAImG,aAAa,KAAK,EAAtB,EAA0B;AAE1B,YAAIC,UAAU,GAAGD,aAAa,CAACR,OAAd,CAAsB,GAAtB,CAAjB;AACA,YAAIU,WAAW,GAAGF,aAAa,CAACvH,MAAhC;;AAEA,YAAIwH,UAAU,GAAG,CAAb,IAAkBA,UAAU,GAAGC,WAAnC,EAAgD;AAE5C,cAAIC,aAAa,GAAGH,aAAa,CAACpG,MAAd,CAAqB,CAArB,EAAwBqG,UAAxB,CAApB;AAEA,cAAIZ,KAAK,GAAGtF,WAAW,CAACiG,aAAa,CAACpG,MAAd,CAAqBqG,UAAU,GAAG,CAAlC,EAAqCC,WAAW,GAAGD,UAAd,GAA2B,CAAhE,CAAD,CAAvB;AAEA/H,UAAAA,gBAAgB,CAACW,QAAjB;;AAEA,kBAAQsH,aAAR;AAEI,iBAAK,WAAL;AAEI,kBAAId,KAAK,CAAC5G,MAAN,IAAgB,CAApB,EAAuB;AAEnB,oBAAI2H,EAAE,GAAGf,KAAK,CAAC,CAAD,CAAd;AACA,oBAAIgB,EAAE,GAAGD,EAAT;;AAEA,oBAAIf,KAAK,CAAC5G,MAAN,IAAgB,CAApB,EAAuB;AAEnB4H,kBAAAA,EAAE,GAAGhB,KAAK,CAAC,CAAD,CAAV;AAEH;;AAEDnH,gBAAAA,gBAAgB,CAACoI,SAAjB,CAA2BF,EAA3B,EAA+BC,EAA/B;AAEH;;AAED;;AAEJ,iBAAK,QAAL;AAEI,kBAAIhB,KAAK,CAAC5G,MAAN,IAAgB,CAApB,EAAuB;AAEnB,oBAAI8H,KAAK,GAAG,CAAZ;AACA,oBAAI1D,EAAE,GAAG,CAAT;AACA,oBAAIC,EAAE,GAAG,CAAT,CAJmB,CAMnB;;AACAyD,gBAAAA,KAAK,GAAG,CAAElB,KAAK,CAAC,CAAD,CAAP,GAAa9D,IAAI,CAACC,EAAlB,GAAuB,GAA/B;;AAEA,oBAAI6D,KAAK,CAAC5G,MAAN,IAAgB,CAApB,EAAuB;AAEnB;AACAoE,kBAAAA,EAAE,GAAGwC,KAAK,CAAC,CAAD,CAAV;AACAvC,kBAAAA,EAAE,GAAGuC,KAAK,CAAC,CAAD,CAAV;AAEH,iBAfkB,CAiBnB;;;AACAmB,gBAAAA,cAAc,CAAC3H,QAAf,GAA0ByH,SAA1B,CAAoC,CAAEzD,EAAtC,EAA0C,CAAEC,EAA5C;AACA2D,gBAAAA,cAAc,CAAC5H,QAAf,GAA0B6H,MAA1B,CAAiCH,KAAjC;AACAI,gBAAAA,cAAc,CAACC,gBAAf,CAAgCH,cAAhC,EAAgDD,cAAhD;AACAA,gBAAAA,cAAc,CAAC3H,QAAf,GAA0ByH,SAA1B,CAAoCzD,EAApC,EAAwCC,EAAxC;AACA5E,gBAAAA,gBAAgB,CAAC0I,gBAAjB,CAAkCJ,cAAlC,EAAkDG,cAAlD;AAEH;;AAED;;AAEJ,iBAAK,OAAL;AAEI,kBAAItB,KAAK,CAAC5G,MAAN,IAAgB,CAApB,EAAuB;AAEnB,oBAAIoI,MAAM,GAAGxB,KAAK,CAAC,CAAD,CAAlB;AACA,oBAAIyB,MAAM,GAAGD,MAAb;;AAEA,oBAAIxB,KAAK,CAAC5G,MAAN,IAAgB,CAApB,EAAuB;AAEnBqI,kBAAAA,MAAM,GAAGzB,KAAK,CAAC,CAAD,CAAd;AAEH;;AAEDnH,gBAAAA,gBAAgB,CAAC6I,KAAjB,CAAuBF,MAAvB,EAA+BC,MAA/B;AAEH;;AAED;;AAEJ,iBAAK,OAAL;AAEI,kBAAIzB,KAAK,CAAC5G,MAAN,KAAiB,CAArB,EAAwB;AAEpBP,gBAAAA,gBAAgB,CAAC8I,GAAjB,CACI,CADJ,EACOzF,IAAI,CAAC0F,GAAL,CAAS5B,KAAK,CAAC,CAAD,CAAL,GAAW9D,IAAI,CAACC,EAAhB,GAAqB,GAA9B,CADP,EAC2C,CAD3C,EAEI,CAFJ,EAEO,CAFP,EAEU,CAFV,EAGI,CAHJ,EAGO,CAHP,EAGU,CAHV;AAMH;;AAED;;AAEJ,iBAAK,OAAL;AAEI,kBAAI6D,KAAK,CAAC5G,MAAN,KAAiB,CAArB,EAAwB;AAEpBP,gBAAAA,gBAAgB,CAAC8I,GAAjB,CACI,CADJ,EACO,CADP,EACU,CADV,EAEIzF,IAAI,CAAC0F,GAAL,CAAS5B,KAAK,CAAC,CAAD,CAAL,GAAW9D,IAAI,CAACC,EAAhB,GAAqB,GAA9B,CAFJ,EAEwC,CAFxC,EAE2C,CAF3C,EAGI,CAHJ,EAGO,CAHP,EAGU,CAHV;AAMH;;AAED;;AAEJ,iBAAK,QAAL;AAEI,kBAAI6D,KAAK,CAAC5G,MAAN,KAAiB,CAArB,EAAwB;AAEpBP,gBAAAA,gBAAgB,CAAC8I,GAAjB,CACI3B,KAAK,CAAC,CAAD,CADT,EACcA,KAAK,CAAC,CAAD,CADnB,EACwBA,KAAK,CAAC,CAAD,CAD7B,EAEIA,KAAK,CAAC,CAAD,CAFT,EAEcA,KAAK,CAAC,CAAD,CAFnB,EAEwBA,KAAK,CAAC,CAAD,CAF7B,EAGI,CAHJ,EAGO,CAHP,EAGU,CAHV;AAMH;;AAED;AA9GR;AAkHH;;AAEDtI,QAAAA,SAAS,CAAC6I,WAAV,CAAsB1H,gBAAtB;AAEH;;AAED,aAAOnB,SAAP;AAEH;;AAED,aAASkB,aAAT,CAAuBzB,IAAvB,EAA6B0K,CAA7B,EAAgC;AAE5B,eAASC,UAAT,CAAoBC,EAApB,EAAwB;AAEpBC,QAAAA,MAAM,CAACL,GAAP,CAAWI,EAAE,CAAClH,CAAd,EAAiBkH,EAAE,CAACjH,CAApB,EAAuB,CAAvB,EAA0BmH,YAA1B,CAAuCJ,CAAvC;AAEAE,QAAAA,EAAE,CAACJ,GAAH,CAAOK,MAAM,CAACnH,CAAd,EAAiBmH,MAAM,CAAClH,CAAxB;AAEH;;AAED,UAAIoH,SAAS,GAAGC,kBAAkB,CAACN,CAAD,CAAlC;AAEA,UAAI1C,QAAQ,GAAGhI,IAAI,CAACgI,QAApB;;AAEA,WAAK,IAAIhG,CAAC,GAAG,CAAR,EAAWiJ,CAAC,GAAGjD,QAAQ,CAAC/F,MAA7B,EAAqCD,CAAC,GAAGiJ,CAAzC,EAA4CjJ,CAAC,EAA7C,EAAiD;AAE7C,YAAIkJ,OAAO,GAAGlD,QAAQ,CAAChG,CAAD,CAAtB;AACA,YAAIwC,MAAM,GAAG0G,OAAO,CAAC1G,MAArB;;AAEA,aAAK,IAAIhB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGgB,MAAM,CAACvC,MAA3B,EAAmCuB,CAAC,EAApC,EAAwC;AAEpC,cAAI2H,KAAK,GAAG3G,MAAM,CAAChB,CAAD,CAAlB;;AAEA,cAAI2H,KAAK,CAACC,WAAV,EAAuB;AAEnBT,YAAAA,UAAU,CAACQ,KAAK,CAACE,EAAP,CAAV;AACAV,YAAAA,UAAU,CAACQ,KAAK,CAACP,EAAP,CAAV;AAEH,WALD,MAKO,IAAIO,KAAK,CAACG,kBAAV,EAA8B;AAEjCX,YAAAA,UAAU,CAACQ,KAAK,CAACI,EAAP,CAAV;AACAZ,YAAAA,UAAU,CAACQ,KAAK,CAACE,EAAP,CAAV;AACAV,YAAAA,UAAU,CAACQ,KAAK,CAACP,EAAP,CAAV;AACAD,YAAAA,UAAU,CAACQ,KAAK,CAACK,EAAP,CAAV;AAEH,WAPM,MAOA,IAAIL,KAAK,CAACM,sBAAV,EAAkC;AAErCd,YAAAA,UAAU,CAACQ,KAAK,CAACI,EAAP,CAAV;AACAZ,YAAAA,UAAU,CAACQ,KAAK,CAACE,EAAP,CAAV;AACAV,YAAAA,UAAU,CAACQ,KAAK,CAACP,EAAP,CAAV;AAEH,WANM,MAMA,IAAIO,KAAK,CAACO,cAAV,EAA0B;AAE7B,gBAAIX,SAAJ,EAAe;AAEX5J,cAAAA,OAAO,CAACuD,IAAR,CAAa,4EAAb;AAEH;;AAEDiH,YAAAA,MAAM,CAACnB,GAAP,CAAWW,KAAK,CAACS,EAAjB,EAAqBT,KAAK,CAACU,EAA3B;AACAlB,YAAAA,UAAU,CAACgB,MAAD,CAAV;AACAR,YAAAA,KAAK,CAACS,EAAN,GAAWD,MAAM,CAACjI,CAAlB;AACAyH,YAAAA,KAAK,CAACU,EAAN,GAAWF,MAAM,CAAChI,CAAlB;AAEAwH,YAAAA,KAAK,CAACW,OAAN,IAAiBC,kBAAkB,CAACrB,CAAD,CAAnC;AACAS,YAAAA,KAAK,CAACa,OAAN,IAAiBC,kBAAkB,CAACvB,CAAD,CAAnC;AAEH;AAEJ;AAEJ;AAEJ;;AAED,aAASM,kBAAT,CAA4BN,CAA5B,EAA+B;AAE3B,aAAOA,CAAC,CAACwB,QAAF,CAAW,CAAX,MAAkB,CAAlB,IAAuBxB,CAAC,CAACwB,QAAF,CAAW,CAAX,MAAkB,CAAhD;AAEH;;AAED,aAASH,kBAAT,CAA4BrB,CAA5B,EAA+B;AAE3B,UAAIyB,EAAE,GAAGzB,CAAC,CAACwB,QAAX;AACA,aAAOnH,IAAI,CAACe,IAAL,CAAUqG,EAAE,CAAC,CAAD,CAAF,GAAQA,EAAE,CAAC,CAAD,CAAV,GAAgBA,EAAE,CAAC,CAAD,CAAF,GAAQA,EAAE,CAAC,CAAD,CAApC,CAAP;AAEH;;AAED,aAASF,kBAAT,CAA4BvB,CAA5B,EAA+B;AAE3B,UAAIyB,EAAE,GAAGzB,CAAC,CAACwB,QAAX;AACA,aAAOnH,IAAI,CAACe,IAAL,CAAUqG,EAAE,CAAC,CAAD,CAAF,GAAQA,EAAE,CAAC,CAAD,CAAV,GAAgBA,EAAE,CAAC,CAAD,CAAF,GAAQA,EAAE,CAAC,CAAD,CAApC,CAAP;AAEH,KAjkCkB,CAmkCnB;;;AAEAhL,IAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AAEA,QAAIO,KAAK,GAAG,EAAZ;AAEA,QAAIO,cAAc,GAAG,EAArB;AAEA,QAAImH,cAAc,GAAG,IAAI1K,OAAJ,EAArB;AACA,QAAIqL,cAAc,GAAG,IAAIrL,OAAJ,EAArB;AACA,QAAIsL,cAAc,GAAG,IAAItL,OAAJ,EAArB;AACA,QAAIwL,cAAc,GAAG,IAAIxL,OAAJ,EAArB;AACA,QAAIgN,MAAM,GAAG,IAAI7M,OAAJ,EAAb;AACA,QAAI+L,MAAM,GAAG,IAAI9L,OAAJ,EAAb;AAEA,QAAI2C,gBAAgB,GAAG,IAAI/C,OAAJ,EAAvB;AAEAwC,IAAAA,OAAO,CAACiL,IAAR,CAAa,4BAAb;AAEA,QAAIC,GAAG,GAAG,IAAIC,SAAJ,GAAgBC,eAAhB,CAAgCtM,IAAhC,EAAsC,eAAtC,CAAV,CAtlCmB,CAslC+C;;AAElEkB,IAAAA,OAAO,CAACqL,OAAR,CAAgB,4BAAhB;AAEArL,IAAAA,OAAO,CAACiL,IAAR,CAAa,wBAAb;AAEAjM,IAAAA,SAAS,CAACkM,GAAG,CAACI,eAAL,EAAsB;AAC3BpL,MAAAA,IAAI,EAAE,MADqB;AAE3BqL,MAAAA,WAAW,EAAE,CAFc;AAG3BC,MAAAA,aAAa,EAAE,CAHY;AAI3BC,MAAAA,WAAW,EAAE,CAJc;AAK3BC,MAAAA,cAAc,EAAE,OALW;AAM3BC,MAAAA,aAAa,EAAE,MANY;AAO3BC,MAAAA,gBAAgB,EAAE;AAPS,KAAtB,CAAT;AAUA,QAAI5J,IAAI,GAAG;AAAExB,MAAAA,KAAK,EAAEA,KAAT;AAAgB0K,MAAAA,GAAG,EAAEA,GAAG,CAACI;AAAzB,KAAX,CAtmCmB,CAwmCnB;;AAGAtL,IAAAA,OAAO,CAACqL,OAAR,CAAgB,wBAAhB;AAEA,WAAOrJ,IAAP;AAEH;AAjoCgE,CAA/C,CAAtB;;AAqoCAnE,SAAS,CAACgO,cAAV,GAA2B,UAAUC,KAAV,EAAiB1L,KAAjB,EAAwB2L,QAAxB,EAAkCC,OAAlC,EAA2CC,UAA3C,EAAuD;AAE9E;AACA;AACA;AACA;AACA;AACA;AAEAH,EAAAA,KAAK,GAAGA,KAAK,KAAK3L,SAAV,GAAsB2L,KAAtB,GAA8B,CAAtC;AACA1L,EAAAA,KAAK,GAAGA,KAAK,KAAKD,SAAV,GAAsBC,KAAtB,GAA8B,MAAtC;AACA2L,EAAAA,QAAQ,GAAGA,QAAQ,KAAK5L,SAAb,GAAyB4L,QAAzB,GAAoC,OAA/C;AACAC,EAAAA,OAAO,GAAGA,OAAO,KAAK7L,SAAZ,GAAwB6L,OAAxB,GAAkC,MAA5C;AACAC,EAAAA,UAAU,GAAGA,UAAU,KAAK9L,SAAf,GAA2B8L,UAA3B,GAAwC,CAArD;AAEA,SAAO;AACHC,IAAAA,WAAW,EAAE9L,KADV;AAEHqL,IAAAA,WAAW,EAAEK,KAFV;AAGHJ,IAAAA,cAAc,EAAEK,QAHb;AAIHJ,IAAAA,aAAa,EAAEK,OAJZ;AAKHJ,IAAAA,gBAAgB,EAAEK;AALf,GAAP;AAQH,CAvBD;;AAyBApO,SAAS,CAACsO,cAAV,GAA2B,UAAUC,MAAV,EAAkBlN,KAAlB,EAAyBmN,YAAzB,EAAuCC,WAAvC,EAAoD;AAE3E;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,MAAIC,QAAQ,GAAG,EAAf;AACA,MAAIC,OAAO,GAAG,EAAd;AACA,MAAIC,GAAG,GAAG,EAAV;;AAEA,MAAI5O,SAAS,CAAC6O,yBAAV,CAAoCN,MAApC,EAA4ClN,KAA5C,EAAmDmN,YAAnD,EAAiEC,WAAjE,EAA8EC,QAA9E,EAAwFC,OAAxF,EAAiGC,GAAjG,MAA0G,CAA9G,EAAiH;AAE7G,WAAO,IAAP;AAEH;;AAED,MAAIE,QAAQ,GAAG,IAAIxP,cAAJ,EAAf;AACAwP,EAAAA,QAAQ,CAACC,YAAT,CAAsB,UAAtB,EAAkC,IAAItP,sBAAJ,CAA2BiP,QAA3B,EAAqC,CAArC,CAAlC;AACAI,EAAAA,QAAQ,CAACC,YAAT,CAAsB,QAAtB,EAAgC,IAAItP,sBAAJ,CAA2BkP,OAA3B,EAAoC,CAApC,CAAhC;AACAG,EAAAA,QAAQ,CAACC,YAAT,CAAsB,IAAtB,EAA4B,IAAItP,sBAAJ,CAA2BmP,GAA3B,EAAgC,CAAhC,CAA5B;AAEA,SAAOE,QAAP;AAEH,CA3BD;;AA6BA9O,SAAS,CAAC6O,yBAAV,GAAsC,YAAY;AAE9C,MAAIG,QAAQ,GAAG,IAAIlP,OAAJ,EAAf;AACA,MAAImP,QAAQ,GAAG,IAAInP,OAAJ,EAAf;AACA,MAAIoP,QAAQ,GAAG,IAAIpP,OAAJ,EAAf;AACA,MAAIqP,QAAQ,GAAG,IAAIrP,OAAJ,EAAf;AACA,MAAIsP,QAAQ,GAAG,IAAItP,OAAJ,EAAf;AACA,MAAIuP,QAAQ,GAAG,IAAIvP,OAAJ,EAAf;AACA,MAAIwP,QAAQ,GAAG,IAAIxP,OAAJ,EAAf;AACA,MAAIyP,UAAU,GAAG,IAAIzP,OAAJ,EAAjB;AACA,MAAI0P,UAAU,GAAG,IAAI1P,OAAJ,EAAjB;AACA,MAAI2P,OAAO,GAAG,IAAI3P,OAAJ,EAAd;AACA,MAAI4P,OAAO,GAAG,IAAI5P,OAAJ,EAAd;AACA,MAAI6P,aAAa,GAAG,IAAI7P,OAAJ,EAApB;AACA,MAAI8P,aAAa,GAAG,IAAI9P,OAAJ,EAApB;AACA,MAAI+P,UAAU,GAAG,IAAI/P,OAAJ,EAAjB;AACA,MAAIgQ,UAAU,GAAG,IAAIhQ,OAAJ,EAAjB;AACA,MAAIiQ,UAAU,GAAG,IAAIjQ,OAAJ,EAAjB;AACA,MAAIkQ,UAAU,GAAG,IAAIlQ,OAAJ,EAAjB;AAEA,SAAO,UAAUyO,MAAV,EAAkBlN,KAAlB,EAAyBmN,YAAzB,EAAuCC,WAAvC,EAAoDC,QAApD,EAA8DC,OAA9D,EAAuEC,GAAvE,EAA4EqB,YAA5E,EAA0F;AAE7F;AACA;AACA;AACA;AACA;AACA;AAEAzB,IAAAA,YAAY,GAAGA,YAAY,KAAKlM,SAAjB,GAA6BkM,YAA7B,GAA4C,EAA3D;AACAC,IAAAA,WAAW,GAAGA,WAAW,KAAKnM,SAAhB,GAA4BmM,WAA5B,GAA0C,KAAxD;AACAwB,IAAAA,YAAY,GAAGA,YAAY,KAAK3N,SAAjB,GAA6B2N,YAA7B,GAA4C,CAA3D,CAX6F,CAa7F;;AACA1B,IAAAA,MAAM,GAAG2B,sBAAsB,CAAC3B,MAAD,CAA/B;AAEA,QAAI4B,SAAS,GAAG5B,MAAM,CAACtL,MAAvB;AAEA,QAAIkN,SAAS,GAAG,CAAhB,EAAmB,OAAO,CAAP;AAEnB,QAAIC,QAAQ,GAAG7B,MAAM,CAAC,CAAD,CAAN,CAAU8B,MAAV,CAAiB9B,MAAM,CAAC4B,SAAS,GAAG,CAAb,CAAvB,CAAf;AAEA,QAAI1K,YAAJ;AACA,QAAI6K,aAAa,GAAG/B,MAAM,CAAC,CAAD,CAA1B;AACA,QAAIgC,SAAJ;AAEA,QAAIC,YAAY,GAAGnP,KAAK,CAACuM,WAAN,GAAoB,CAAvC;AAEA,QAAI6C,MAAM,GAAG,KAAKN,SAAS,GAAG,CAAjB,CAAb;AACA,QAAIO,EAAE,GAAG,CAAT;AAEA,QAAIC,iBAAJ;AACA,QAAIC,gBAAJ;AACA,QAAIC,OAAJ;AACA,QAAIC,uBAAuB,GAAG,KAA9B;AAEA,QAAIC,WAAW,GAAG,CAAlB;AACA,QAAIC,iBAAiB,GAAGf,YAAY,GAAG,CAAvC;AACA,QAAIgB,mBAAmB,GAAGhB,YAAY,GAAG,CAAzC,CAtC6F,CAwC7F;;AACAiB,IAAAA,SAAS,CAAC3C,MAAM,CAAC,CAAD,CAAP,EAAYA,MAAM,CAAC,CAAD,CAAlB,EAAuBS,QAAvB,CAAT,CAA0CmC,cAA1C,CAAyDX,YAAzD;AACAjB,IAAAA,UAAU,CAACnM,IAAX,CAAgBmL,MAAM,CAAC,CAAD,CAAtB,EAA2B6C,GAA3B,CAA+BpC,QAA/B;AACAQ,IAAAA,UAAU,CAACpM,IAAX,CAAgBmL,MAAM,CAAC,CAAD,CAAtB,EAA2B8C,GAA3B,CAA+BrC,QAA/B;AACAS,IAAAA,OAAO,CAACrM,IAAR,CAAamM,UAAb;AACAG,IAAAA,OAAO,CAACtM,IAAR,CAAaoM,UAAb;;AAEA,SAAK,IAAI8B,MAAM,GAAG,CAAlB,EAAqBA,MAAM,GAAGnB,SAA9B,EAAyCmB,MAAM,EAA/C,EAAmD;AAE/C7L,MAAAA,YAAY,GAAG8I,MAAM,CAAC+C,MAAD,CAArB,CAF+C,CAI/C;;AACA,UAAIA,MAAM,KAAKnB,SAAS,GAAG,CAA3B,EAA8B;AAE1B,YAAIC,QAAJ,EAAc;AAEV;AACAG,UAAAA,SAAS,GAAGhC,MAAM,CAAC,CAAD,CAAlB;AAEH,SALD,MAKOgC,SAAS,GAAGjO,SAAZ;AAEV,OATD,MASO;AAEHiO,QAAAA,SAAS,GAAGhC,MAAM,CAAC+C,MAAM,GAAG,CAAV,CAAlB;AAEH,OAlB8C,CAoB/C;;;AACA,UAAIC,OAAO,GAAGvC,QAAd;AACAkC,MAAAA,SAAS,CAACZ,aAAD,EAAgB7K,YAAhB,EAA8B8L,OAA9B,CAAT;AAEArC,MAAAA,QAAQ,CAAC9L,IAAT,CAAcmO,OAAd,EAAuBJ,cAAvB,CAAsCX,YAAtC;AACAb,MAAAA,aAAa,CAACvM,IAAd,CAAmBqC,YAAnB,EAAiC2L,GAAjC,CAAqClC,QAArC;AACAU,MAAAA,aAAa,CAACxM,IAAd,CAAmBqC,YAAnB,EAAiC4L,GAAjC,CAAqCnC,QAArC;AAEA,UAAIsC,EAAE,GAAGd,EAAE,GAAGD,MAAd;AAEAE,MAAAA,iBAAiB,GAAG,KAApB;;AAEA,UAAIJ,SAAS,KAAKjO,SAAlB,EAA6B;AAEzB;AACA4O,QAAAA,SAAS,CAACzL,YAAD,EAAe8K,SAAf,EAA0BtB,QAA1B,CAAT;AAEAC,QAAAA,QAAQ,CAAC9L,IAAT,CAAc6L,QAAd,EAAwBkC,cAAxB,CAAuCX,YAAvC;AACAX,QAAAA,UAAU,CAACzM,IAAX,CAAgBqC,YAAhB,EAA8B2L,GAA9B,CAAkClC,QAAlC;AACAY,QAAAA,UAAU,CAAC1M,IAAX,CAAgBqC,YAAhB,EAA8B4L,GAA9B,CAAkCnC,QAAlC;AAEA0B,QAAAA,gBAAgB,GAAG,IAAnB;AACA1B,QAAAA,QAAQ,CAACuC,UAAT,CAAoBlB,SAApB,EAA+BD,aAA/B;;AACA,YAAIiB,OAAO,CAACxJ,GAAR,CAAYmH,QAAZ,IAAwB,CAA5B,EAA+B;AAE3B0B,UAAAA,gBAAgB,GAAG,KAAnB;AAEH;;AACD,YAAIU,MAAM,KAAK,CAAf,EAAkBR,uBAAuB,GAAGF,gBAA1B;AAElB1B,QAAAA,QAAQ,CAACuC,UAAT,CAAoBlB,SAApB,EAA+B9K,YAA/B;AACAyJ,QAAAA,QAAQ,CAACwC,SAAT;AACA,YAAI3J,GAAG,GAAGhC,IAAI,CAACE,GAAL,CAASsL,OAAO,CAACxJ,GAAR,CAAYmH,QAAZ,CAAT,CAAV,CApByB,CAsBzB;;AACA,YAAInH,GAAG,KAAK,CAAZ,EAAe;AAEX;AACA,cAAI4J,SAAS,GAAGnB,YAAY,GAAGzI,GAA/B;AACAmH,UAAAA,QAAQ,CAACiC,cAAT,CAAwB,CAAEQ,SAA1B;AACAxC,UAAAA,QAAQ,CAACsC,UAAT,CAAoBhM,YAApB,EAAkC6K,aAAlC;AACAlB,UAAAA,QAAQ,CAAChM,IAAT,CAAc+L,QAAd,EAAwByC,SAAxB,CAAkCD,SAAlC,EAA6CN,GAA7C,CAAiDnC,QAAjD;AACAa,UAAAA,UAAU,CAAC3M,IAAX,CAAgBgM,QAAhB,EAA0ByC,MAA1B;AACA,cAAIC,YAAY,GAAG1C,QAAQ,CAACnM,MAAT,EAAnB;AACA,cAAI8O,iBAAiB,GAAG5C,QAAQ,CAAClM,MAAT,EAAxB;AACAkM,UAAAA,QAAQ,CAAC6C,YAAT,CAAsBD,iBAAtB;AACA1C,UAAAA,QAAQ,CAACoC,UAAT,CAAoBlB,SAApB,EAA+B9K,YAA/B;AACA,cAAIwM,iBAAiB,GAAG5C,QAAQ,CAACpM,MAAT,EAAxB;AACAoM,UAAAA,QAAQ,CAAC2C,YAAT,CAAsBC,iBAAtB,EAbW,CAcX;;AACA,cAAI9C,QAAQ,CAACpH,GAAT,CAAagI,UAAb,IAA2BgC,iBAA3B,IAAgD1C,QAAQ,CAACtH,GAAT,CAAagI,UAAb,IAA2BkC,iBAA/E,EAAkG;AAE9FtB,YAAAA,iBAAiB,GAAG,IAApB;AAEH;;AACDX,UAAAA,UAAU,CAAC5M,IAAX,CAAgBgM,QAAhB,EAA0BiC,GAA1B,CAA8B5L,YAA9B;AACAsK,UAAAA,UAAU,CAACsB,GAAX,CAAe5L,YAAf;AAEAoL,UAAAA,OAAO,GAAG,KAAV;;AAEA,cAAIF,iBAAJ,EAAuB;AAEnB,gBAAIC,gBAAJ,EAAsB;AAElBd,cAAAA,UAAU,CAAC1M,IAAX,CAAgB2M,UAAhB;AACAH,cAAAA,aAAa,CAACxM,IAAd,CAAmB2M,UAAnB;AAEH,aALD,MAKO;AAEHF,cAAAA,UAAU,CAACzM,IAAX,CAAgB2M,UAAhB;AACAJ,cAAAA,aAAa,CAACvM,IAAd,CAAmB2M,UAAnB;AAEH;AAEJ,WAdD,MAcO;AAEH;AAEAmC,YAAAA,oBAAoB;AAEvB;;AAED,kBAAQ7Q,KAAK,CAACwM,cAAd;AAEI,iBAAK,OAAL;AAEIsE,cAAAA,wBAAwB,CAACvB,gBAAD,EAAmBD,iBAAnB,EAAsCa,EAAtC,CAAxB;AAEA;;AAEJ,iBAAK,OAAL;AAEI;AAEAY,cAAAA,uCAAuC,CAACxB,gBAAD,EAAmBD,iBAAnB,CAAvC,CAJJ,CAMI;;AAEA,kBAAIC,gBAAJ,EAAsB;AAElByB,gBAAAA,kBAAkB,CAAC5M,YAAD,EAAekK,aAAf,EAA8BE,UAA9B,EAA0C2B,EAA1C,EAA8C,CAA9C,CAAlB;AAEH,eAJD,MAIO;AAEHa,gBAAAA,kBAAkB,CAAC5M,YAAD,EAAeqK,UAAf,EAA2BF,aAA3B,EAA0C4B,EAA1C,EAA8C,CAA9C,CAAlB;AAEH;;AAED;;AAEJ,iBAAK,OAAL;AACA,iBAAK,YAAL;AACA;AAEI,kBAAIc,aAAa,GAAI9B,YAAY,GAAGnP,KAAK,CAAC0M,gBAAtB,GAA0C+D,YAA9D;;AAEA,kBAAIQ,aAAa,GAAG,CAApB,EAAuB;AAEnB;AAEA,oBAAIjR,KAAK,CAACwM,cAAN,KAAyB,YAA7B,EAA2C;AAEvCsE,kBAAAA,wBAAwB,CAACvB,gBAAD,EAAmBD,iBAAnB,EAAsCa,EAAtC,CAAxB;AACA;AAEH,iBALD,MAKO;AAEH;AAEAY,kBAAAA,uCAAuC,CAACxB,gBAAD,EAAmBD,iBAAnB,CAAvC,CAJG,CAMH;;AAEA,sBAAIC,gBAAJ,EAAsB;AAElBvB,oBAAAA,QAAQ,CAACoC,UAAT,CAAoBzB,UAApB,EAAgCL,aAAhC,EAA+CwB,cAA/C,CAA8DmB,aAA9D,EAA6EjB,GAA7E,CAAiF1B,aAAjF;AACAL,oBAAAA,QAAQ,CAACmC,UAAT,CAAoBzB,UAApB,EAAgCH,UAAhC,EAA4CsB,cAA5C,CAA2DmB,aAA3D,EAA0EjB,GAA1E,CAA8ExB,UAA9E;AAEA0C,oBAAAA,SAAS,CAAC5C,aAAD,EAAgB6B,EAAhB,EAAoB,CAApB,CAAT;AACAe,oBAAAA,SAAS,CAAClD,QAAD,EAAWmC,EAAX,EAAe,CAAf,CAAT;AACAe,oBAAAA,SAAS,CAAC9M,YAAD,EAAe+L,EAAf,EAAmB,GAAnB,CAAT;AAEAe,oBAAAA,SAAS,CAAC9M,YAAD,EAAe+L,EAAf,EAAmB,GAAnB,CAAT;AACAe,oBAAAA,SAAS,CAAClD,QAAD,EAAWmC,EAAX,EAAe,CAAf,CAAT;AACAe,oBAAAA,SAAS,CAACjD,QAAD,EAAWkC,EAAX,EAAe,CAAf,CAAT;AAEAe,oBAAAA,SAAS,CAAC9M,YAAD,EAAe+L,EAAf,EAAmB,GAAnB,CAAT;AACAe,oBAAAA,SAAS,CAACjD,QAAD,EAAWkC,EAAX,EAAe,CAAf,CAAT;AACAe,oBAAAA,SAAS,CAAC1C,UAAD,EAAa2B,EAAb,EAAiB,CAAjB,CAAT;AAEH,mBAjBD,MAiBO;AAEHnC,oBAAAA,QAAQ,CAACoC,UAAT,CAAoBzB,UAApB,EAAgCJ,aAAhC,EAA+CuB,cAA/C,CAA8DmB,aAA9D,EAA6EjB,GAA7E,CAAiFzB,aAAjF;AACAN,oBAAAA,QAAQ,CAACmC,UAAT,CAAoBzB,UAApB,EAAgCF,UAAhC,EAA4CqB,cAA5C,CAA2DmB,aAA3D,EAA0EjB,GAA1E,CAA8EvB,UAA9E;AAEAyC,oBAAAA,SAAS,CAAC3C,aAAD,EAAgB4B,EAAhB,EAAoB,CAApB,CAAT;AACAe,oBAAAA,SAAS,CAAClD,QAAD,EAAWmC,EAAX,EAAe,CAAf,CAAT;AACAe,oBAAAA,SAAS,CAAC9M,YAAD,EAAe+L,EAAf,EAAmB,GAAnB,CAAT;AAEAe,oBAAAA,SAAS,CAAC9M,YAAD,EAAe+L,EAAf,EAAmB,GAAnB,CAAT;AACAe,oBAAAA,SAAS,CAAClD,QAAD,EAAWmC,EAAX,EAAe,CAAf,CAAT;AACAe,oBAAAA,SAAS,CAACjD,QAAD,EAAWkC,EAAX,EAAe,CAAf,CAAT;AAEAe,oBAAAA,SAAS,CAAC9M,YAAD,EAAe+L,EAAf,EAAmB,GAAnB,CAAT;AACAe,oBAAAA,SAAS,CAACjD,QAAD,EAAWkC,EAAX,EAAe,CAAf,CAAT;AACAe,oBAAAA,SAAS,CAACzC,UAAD,EAAa0B,EAAb,EAAiB,CAAjB,CAAT;AAEH;AAEJ;AAEJ,eAvDD,MAuDO;AAEH;AAEA,oBAAIb,iBAAJ,EAAuB;AAEnB;AAEA,sBAAIC,gBAAJ,EAAsB;AAElB2B,oBAAAA,SAAS,CAAC/C,UAAD,EAAakB,EAAb,EAAiB,CAAjB,CAAT;AACA6B,oBAAAA,SAAS,CAAChD,UAAD,EAAamB,EAAb,EAAiB,CAAjB,CAAT;AACA6B,oBAAAA,SAAS,CAACvC,UAAD,EAAawB,EAAb,EAAiB,CAAjB,CAAT;AAEAe,oBAAAA,SAAS,CAAC/C,UAAD,EAAakB,EAAb,EAAiB,CAAjB,CAAT;AACA6B,oBAAAA,SAAS,CAACvC,UAAD,EAAawB,EAAb,EAAiB,CAAjB,CAAT;AACAe,oBAAAA,SAAS,CAACxC,UAAD,EAAayB,EAAb,EAAiB,CAAjB,CAAT;AAEH,mBAVD,MAUO;AAEHe,oBAAAA,SAAS,CAAC/C,UAAD,EAAakB,EAAb,EAAiB,CAAjB,CAAT;AACA6B,oBAAAA,SAAS,CAAChD,UAAD,EAAamB,EAAb,EAAiB,CAAjB,CAAT;AACA6B,oBAAAA,SAAS,CAACvC,UAAD,EAAawB,EAAb,EAAiB,CAAjB,CAAT;AAEAe,oBAAAA,SAAS,CAAChD,UAAD,EAAamB,EAAb,EAAiB,CAAjB,CAAT;AACA6B,oBAAAA,SAAS,CAACxC,UAAD,EAAayB,EAAb,EAAiB,CAAjB,CAAT;AACAe,oBAAAA,SAAS,CAACvC,UAAD,EAAawB,EAAb,EAAiB,CAAjB,CAAT;AAEH;;AAGD,sBAAIZ,gBAAJ,EAAsB;AAElBf,oBAAAA,UAAU,CAACzM,IAAX,CAAgB4M,UAAhB;AAEH,mBAJD,MAIO;AAEHF,oBAAAA,UAAU,CAAC1M,IAAX,CAAgB4M,UAAhB;AAEH;AAGJ,iBAtCD,MAsCO;AAEH;AAEA,sBAAIY,gBAAJ,EAAsB;AAElB2B,oBAAAA,SAAS,CAAC5C,aAAD,EAAgB6B,EAAhB,EAAoB,CAApB,CAAT;AACAe,oBAAAA,SAAS,CAACvC,UAAD,EAAawB,EAAb,EAAiB,CAAjB,CAAT;AACAe,oBAAAA,SAAS,CAAC9M,YAAD,EAAe+L,EAAf,EAAmB,GAAnB,CAAT;AAEAe,oBAAAA,SAAS,CAAC9M,YAAD,EAAe+L,EAAf,EAAmB,GAAnB,CAAT;AACAe,oBAAAA,SAAS,CAACvC,UAAD,EAAawB,EAAb,EAAiB,CAAjB,CAAT;AACAe,oBAAAA,SAAS,CAAC1C,UAAD,EAAa2B,EAAb,EAAiB,CAAjB,CAAT;AAEH,mBAVD,MAUO;AAEHe,oBAAAA,SAAS,CAAC3C,aAAD,EAAgB4B,EAAhB,EAAoB,CAApB,CAAT;AACAe,oBAAAA,SAAS,CAACvC,UAAD,EAAawB,EAAb,EAAiB,CAAjB,CAAT;AACAe,oBAAAA,SAAS,CAAC9M,YAAD,EAAe+L,EAAf,EAAmB,GAAnB,CAAT;AAEAe,oBAAAA,SAAS,CAAC9M,YAAD,EAAe+L,EAAf,EAAmB,GAAnB,CAAT;AACAe,oBAAAA,SAAS,CAACvC,UAAD,EAAawB,EAAb,EAAiB,CAAjB,CAAT;AACAe,oBAAAA,SAAS,CAACzC,UAAD,EAAa0B,EAAb,EAAiB,CAAjB,CAAT;AAEH;AAEJ;;AAEDX,gBAAAA,OAAO,GAAG,IAAV;AAEH;;AAED;AAnKR;AAuKH,SAtND,MAsNO;AAEH;AAEAqB,UAAAA,oBAAoB;AAEvB;AAEJ,OArPD,MAqPO;AAEH;AAEAA,QAAAA,oBAAoB;AAEvB;;AAED,UAAI,CAAC9B,QAAD,IAAakB,MAAM,KAAKnB,SAAS,GAAG,CAAxC,EAA2C;AAEvC;AACAqC,QAAAA,cAAc,CAACjE,MAAM,CAAC,CAAD,CAAP,EAAYkB,OAAZ,EAAqBC,OAArB,EAA8BkB,gBAA9B,EAAgD,IAAhD,EAAsDF,EAAtD,CAAd;AAEH,OAlS8C,CAoS/C;;;AAEAA,MAAAA,EAAE,GAAGc,EAAL;AAEAlB,MAAAA,aAAa,GAAG7K,YAAhB;AAEA8J,MAAAA,UAAU,CAACnM,IAAX,CAAgByM,UAAhB;AACAL,MAAAA,UAAU,CAACpM,IAAX,CAAgB0M,UAAhB;AAEH;;AAED,QAAI,CAACM,QAAL,EAAe;AAEX;AACAoC,MAAAA,cAAc,CAAC/M,YAAD,EAAekK,aAAf,EAA8BC,aAA9B,EAA6CgB,gBAA7C,EAA+D,KAA/D,EAAsEY,EAAtE,CAAd;AAEH,KALD,MAKO,IAAIb,iBAAiB,IAAIjC,QAAzB,EAAmC;AAEtC;AAEA,UAAI+D,SAAS,GAAGzC,UAAhB;AACA,UAAI0C,SAAS,GAAG3C,UAAhB;;AAEA,UAAIe,uBAAuB,KAAKF,gBAAhC,EAAkD;AAE9C6B,QAAAA,SAAS,GAAG1C,UAAZ;AACA2C,QAAAA,SAAS,GAAG1C,UAAZ;AAEH;;AAED,UAAIY,gBAAJ,EAAsB;AAElB,YAAIC,OAAO,IAAIC,uBAAf,EAAwC;AAEpC4B,UAAAA,SAAS,CAACC,OAAV,CAAkBjE,QAAlB,EAA4B,IAAI,CAAhC;AACAgE,UAAAA,SAAS,CAACC,OAAV,CAAkBjE,QAAlB,EAA4B,IAAI,CAAhC;;AAEA,cAAImC,OAAJ,EAAa;AAET4B,YAAAA,SAAS,CAACE,OAAV,CAAkBjE,QAAlB,EAA4B,IAAI,CAAhC;AAEH;AAEJ;AAEJ,OAfD,MAeO;AAEH,YAAImC,OAAO,IAAI,CAACC,uBAAhB,EAAyC;AAErC4B,UAAAA,SAAS,CAACC,OAAV,CAAkBjE,QAAlB,EAA4B,IAAI,CAAhC;AACAgE,UAAAA,SAAS,CAACC,OAAV,CAAkBjE,QAAlB,EAA4B,IAAI,CAAhC;;AAEA,cAAImC,OAAJ,EAAa;AAET4B,YAAAA,SAAS,CAACE,OAAV,CAAkBjE,QAAlB,EAA4B,IAAI,CAAhC;AAEH;AAEJ;AAEJ;AAEJ;;AAED,WAAOqC,WAAP,CAnZ6F,CAqZ7F;AAEA;;AAEA,aAASG,SAAT,CAAmB0B,EAAnB,EAAuBC,EAAvB,EAA2BC,MAA3B,EAAmC;AAE/BA,MAAAA,MAAM,CAACrB,UAAP,CAAkBoB,EAAlB,EAAsBD,EAAtB;AACA,aAAOE,MAAM,CAACtH,GAAP,CAAW,CAAEsH,MAAM,CAACnO,CAApB,EAAuBmO,MAAM,CAACpO,CAA9B,EAAiCgN,SAAjC,EAAP;AAEH;;AAED,aAASa,SAAT,CAAmBQ,QAAnB,EAA6BC,CAA7B,EAAgCvJ,CAAhC,EAAmC;AAE/B,UAAIiF,QAAJ,EAAc;AAEVA,QAAAA,QAAQ,CAACsC,iBAAD,CAAR,GAA8B+B,QAAQ,CAACrO,CAAvC;AACAgK,QAAAA,QAAQ,CAACsC,iBAAiB,GAAG,CAArB,CAAR,GAAkC+B,QAAQ,CAACpO,CAA3C;AACA+J,QAAAA,QAAQ,CAACsC,iBAAiB,GAAG,CAArB,CAAR,GAAkC,CAAlC;;AAEA,YAAIrC,OAAJ,EAAa;AAETA,UAAAA,OAAO,CAACqC,iBAAD,CAAP,GAA6B,CAA7B;AACArC,UAAAA,OAAO,CAACqC,iBAAiB,GAAG,CAArB,CAAP,GAAiC,CAAjC;AACArC,UAAAA,OAAO,CAACqC,iBAAiB,GAAG,CAArB,CAAP,GAAiC,CAAjC;AAEH;;AAEDA,QAAAA,iBAAiB,IAAI,CAArB;;AAEA,YAAIpC,GAAJ,EAAS;AAELA,UAAAA,GAAG,CAACqC,mBAAD,CAAH,GAA2B+B,CAA3B;AACApE,UAAAA,GAAG,CAACqC,mBAAmB,GAAG,CAAvB,CAAH,GAA+BxH,CAA/B;AAEAwH,UAAAA,mBAAmB,IAAI,CAAvB;AAEH;AAEJ;;AAEDF,MAAAA,WAAW,IAAI,CAAf;AAEH;;AAED,aAASsB,kBAAT,CAA4BY,MAA5B,EAAoCL,EAApC,EAAwCC,EAAxC,EAA4CG,CAA5C,EAA+CvJ,CAA/C,EAAkD;AAE9C;AACA;AAEAuF,MAAAA,QAAQ,CAAC5L,IAAT,CAAcwP,EAAd,EAAkBxB,GAAlB,CAAsB6B,MAAtB,EAA8BvB,SAA9B;AACAzC,MAAAA,QAAQ,CAAC7L,IAAT,CAAcyP,EAAd,EAAkBzB,GAAlB,CAAsB6B,MAAtB,EAA8BvB,SAA9B;AAEA,UAAI3G,KAAK,GAAGhF,IAAI,CAACC,EAAjB;AACA,UAAI+B,GAAG,GAAGiH,QAAQ,CAACjH,GAAT,CAAakH,QAAb,CAAV;AACA,UAAIlJ,IAAI,CAACE,GAAL,CAAS8B,GAAT,IAAgB,CAApB,EAAuBgD,KAAK,GAAGhF,IAAI,CAACE,GAAL,CAASF,IAAI,CAACmC,IAAL,CAAUH,GAAV,CAAT,CAAR;AAEvBgD,MAAAA,KAAK,IAAIyD,YAAT;AAEAU,MAAAA,QAAQ,CAAC9L,IAAT,CAAcwP,EAAd;;AAEA,WAAK,IAAI5P,CAAC,GAAG,CAAR,EAAWkQ,EAAE,GAAG1E,YAAY,GAAG,CAApC,EAAuCxL,CAAC,GAAGkQ,EAA3C,EAA+ClQ,CAAC,EAAhD,EAAoD;AAEhDmM,QAAAA,QAAQ,CAAC/L,IAAT,CAAc8L,QAAd,EAAwBiE,YAAxB,CAAqCF,MAArC,EAA6ClI,KAA7C;AAEAwH,QAAAA,SAAS,CAACrD,QAAD,EAAW8D,CAAX,EAAcvJ,CAAd,CAAT;AACA8I,QAAAA,SAAS,CAACpD,QAAD,EAAW6D,CAAX,EAAcvJ,CAAd,CAAT;AACA8I,QAAAA,SAAS,CAACU,MAAD,EAASD,CAAT,EAAY,GAAZ,CAAT;AAEA9D,QAAAA,QAAQ,CAAC9L,IAAT,CAAc+L,QAAd;AAEH;;AAEDoD,MAAAA,SAAS,CAACpD,QAAD,EAAW6D,CAAX,EAAcvJ,CAAd,CAAT;AACA8I,MAAAA,SAAS,CAACM,EAAD,EAAKG,CAAL,EAAQvJ,CAAR,CAAT;AACA8I,MAAAA,SAAS,CAACU,MAAD,EAASD,CAAT,EAAY,GAAZ,CAAT;AAEH;;AAED,aAASd,oBAAT,GAAgC;AAE5BK,MAAAA,SAAS,CAAC/C,UAAD,EAAakB,EAAb,EAAiB,CAAjB,CAAT;AACA6B,MAAAA,SAAS,CAAChD,UAAD,EAAamB,EAAb,EAAiB,CAAjB,CAAT;AACA6B,MAAAA,SAAS,CAAC5C,aAAD,EAAgB6B,EAAhB,EAAoB,CAApB,CAAT;AAEAe,MAAAA,SAAS,CAAC/C,UAAD,EAAakB,EAAb,EAAiB,CAAjB,CAAT;AACA6B,MAAAA,SAAS,CAAC5C,aAAD,EAAgB6B,EAAhB,EAAoB,CAApB,CAAT;AACAe,MAAAA,SAAS,CAAC3C,aAAD,EAAgB4B,EAAhB,EAAoB,CAApB,CAAT;AAEH;;AAED,aAASW,wBAAT,CAAkCvB,gBAAlC,EAAoDD,iBAApD,EAAuEqC,CAAvE,EAA0E;AAEtE,UAAIrC,iBAAJ,EAAuB;AAEnB;AAEA,YAAIC,gBAAJ,EAAsB;AAElB;AAEA2B,UAAAA,SAAS,CAAC/C,UAAD,EAAakB,EAAb,EAAiB,CAAjB,CAAT;AACA6B,UAAAA,SAAS,CAAChD,UAAD,EAAamB,EAAb,EAAiB,CAAjB,CAAT;AACA6B,UAAAA,SAAS,CAAC5C,aAAD,EAAgB6B,EAAhB,EAAoB,CAApB,CAAT;AAEAe,UAAAA,SAAS,CAAC/C,UAAD,EAAakB,EAAb,EAAiB,CAAjB,CAAT;AACA6B,UAAAA,SAAS,CAAC5C,aAAD,EAAgB6B,EAAhB,EAAoB,CAApB,CAAT;AACAe,UAAAA,SAAS,CAACxC,UAAD,EAAayB,EAAb,EAAiB,CAAjB,CAAT,CAVkB,CAYlB;;AAEAe,UAAAA,SAAS,CAAC5C,aAAD,EAAgBqD,CAAhB,EAAmB,CAAnB,CAAT;AACAT,UAAAA,SAAS,CAAC1C,UAAD,EAAamD,CAAb,EAAgB,CAAhB,CAAT;AACAT,UAAAA,SAAS,CAACxC,UAAD,EAAaiD,CAAb,EAAgB,GAAhB,CAAT;AAEH,SAlBD,MAkBO;AAEH;AAEAT,UAAAA,SAAS,CAAC/C,UAAD,EAAakB,EAAb,EAAiB,CAAjB,CAAT;AACA6B,UAAAA,SAAS,CAAChD,UAAD,EAAamB,EAAb,EAAiB,CAAjB,CAAT;AACA6B,UAAAA,SAAS,CAAC3C,aAAD,EAAgB4B,EAAhB,EAAoB,CAApB,CAAT;AAEAe,UAAAA,SAAS,CAAChD,UAAD,EAAamB,EAAb,EAAiB,CAAjB,CAAT;AACA6B,UAAAA,SAAS,CAACxC,UAAD,EAAayB,EAAb,EAAiB,CAAjB,CAAT;AACAe,UAAAA,SAAS,CAAC3C,aAAD,EAAgB4B,EAAhB,EAAoB,CAApB,CAAT,CAVG,CAYH;;AAEAe,UAAAA,SAAS,CAAC3C,aAAD,EAAgBoD,CAAhB,EAAmB,CAAnB,CAAT;AACAT,UAAAA,SAAS,CAACzC,UAAD,EAAakD,CAAb,EAAgB,CAAhB,CAAT;AACAT,UAAAA,SAAS,CAACxC,UAAD,EAAaiD,CAAb,EAAgB,GAAhB,CAAT;AAEH;AAEJ,OA1CD,MA0CO;AAEH;AAEA,YAAIpC,gBAAJ,EAAsB;AAElB2B,UAAAA,SAAS,CAAC5C,aAAD,EAAgBqD,CAAhB,EAAmB,CAAnB,CAAT;AACAT,UAAAA,SAAS,CAAC1C,UAAD,EAAamD,CAAb,EAAgB,CAAhB,CAAT;AACAT,UAAAA,SAAS,CAAC9M,YAAD,EAAeuN,CAAf,EAAkB,GAAlB,CAAT;AAEH,SAND,MAMO;AAEHT,UAAAA,SAAS,CAAC3C,aAAD,EAAgBoD,CAAhB,EAAmB,CAAnB,CAAT;AACAT,UAAAA,SAAS,CAACzC,UAAD,EAAakD,CAAb,EAAgB,CAAhB,CAAT;AACAT,UAAAA,SAAS,CAAC9M,YAAD,EAAeuN,CAAf,EAAkB,GAAlB,CAAT;AAEH;AAEJ;AAEJ;;AAED,aAASZ,uCAAT,CAAiDxB,gBAAjD,EAAmED,iBAAnE,EAAsF;AAElF,UAAIA,iBAAJ,EAAuB;AAEnB,YAAIC,gBAAJ,EAAsB;AAElB2B,UAAAA,SAAS,CAAC/C,UAAD,EAAakB,EAAb,EAAiB,CAAjB,CAAT;AACA6B,UAAAA,SAAS,CAAChD,UAAD,EAAamB,EAAb,EAAiB,CAAjB,CAAT;AACA6B,UAAAA,SAAS,CAAC5C,aAAD,EAAgB6B,EAAhB,EAAoB,CAApB,CAAT;AAEAe,UAAAA,SAAS,CAAC/C,UAAD,EAAakB,EAAb,EAAiB,CAAjB,CAAT;AACA6B,UAAAA,SAAS,CAAC5C,aAAD,EAAgB6B,EAAhB,EAAoB,CAApB,CAAT;AACAe,UAAAA,SAAS,CAACxC,UAAD,EAAayB,EAAb,EAAiB,CAAjB,CAAT;AAEAe,UAAAA,SAAS,CAAC5C,aAAD,EAAgBe,EAAhB,EAAoB,CAApB,CAAT;AACA6B,UAAAA,SAAS,CAAC9M,YAAD,EAAe+L,EAAf,EAAmB,GAAnB,CAAT;AACAe,UAAAA,SAAS,CAACxC,UAAD,EAAayB,EAAb,EAAiB,CAAjB,CAAT;AAEAe,UAAAA,SAAS,CAAC9M,YAAD,EAAe+L,EAAf,EAAmB,GAAnB,CAAT;AACAe,UAAAA,SAAS,CAAC1C,UAAD,EAAaa,EAAb,EAAiB,CAAjB,CAAT;AACA6B,UAAAA,SAAS,CAACxC,UAAD,EAAayB,EAAb,EAAiB,CAAjB,CAAT;AAEH,SAlBD,MAkBO;AAEHe,UAAAA,SAAS,CAAC/C,UAAD,EAAakB,EAAb,EAAiB,CAAjB,CAAT;AACA6B,UAAAA,SAAS,CAAChD,UAAD,EAAamB,EAAb,EAAiB,CAAjB,CAAT;AACA6B,UAAAA,SAAS,CAAC3C,aAAD,EAAgB4B,EAAhB,EAAoB,CAApB,CAAT;AAEAe,UAAAA,SAAS,CAAChD,UAAD,EAAamB,EAAb,EAAiB,CAAjB,CAAT;AACA6B,UAAAA,SAAS,CAACxC,UAAD,EAAayB,EAAb,EAAiB,CAAjB,CAAT;AACAe,UAAAA,SAAS,CAAC3C,aAAD,EAAgB4B,EAAhB,EAAoB,CAApB,CAAT;AAEAe,UAAAA,SAAS,CAAC3C,aAAD,EAAgBc,EAAhB,EAAoB,CAApB,CAAT;AACA6B,UAAAA,SAAS,CAACxC,UAAD,EAAayB,EAAb,EAAiB,CAAjB,CAAT;AACAe,UAAAA,SAAS,CAAC9M,YAAD,EAAe+L,EAAf,EAAmB,GAAnB,CAAT;AAEAe,UAAAA,SAAS,CAAC9M,YAAD,EAAe+L,EAAf,EAAmB,GAAnB,CAAT;AACAe,UAAAA,SAAS,CAACxC,UAAD,EAAayB,EAAb,EAAiB,CAAjB,CAAT;AACAe,UAAAA,SAAS,CAACzC,UAAD,EAAaY,EAAb,EAAiB,CAAjB,CAAT;AAEH;AAEJ;AAEJ;;AAED,aAAS8B,cAAT,CAAwBS,MAAxB,EAAgCL,EAAhC,EAAoCC,EAApC,EAAwCjC,gBAAxC,EAA0DzL,KAA1D,EAAiE6N,CAAjE,EAAoE;AAEhE;AACA;AAEA,cAAQ3R,KAAK,CAACyM,aAAd;AAEI,aAAK,OAAL;AAEI,cAAI3I,KAAJ,EAAW;AAEPkN,YAAAA,kBAAkB,CAACY,MAAD,EAASJ,EAAT,EAAaD,EAAb,EAAiBI,CAAjB,EAAoB,GAApB,CAAlB;AAEH,WAJD,MAIO;AAEHX,YAAAA,kBAAkB,CAACY,MAAD,EAASL,EAAT,EAAaC,EAAb,EAAiBG,CAAjB,EAAoB,GAApB,CAAlB;AAEH;;AAED;;AAEJ,aAAK,QAAL;AAEI,cAAI7N,KAAJ,EAAW;AAEP6J,YAAAA,QAAQ,CAACyC,UAAT,CAAoBmB,EAApB,EAAwBK,MAAxB;AACAhE,YAAAA,QAAQ,CAACzD,GAAT,CAAawD,QAAQ,CAACrK,CAAtB,EAAyB,CAAEqK,QAAQ,CAACtK,CAApC;AAEAwK,YAAAA,QAAQ,CAACkE,UAAT,CAAoBpE,QAApB,EAA8BC,QAA9B,EAAwCoC,GAAxC,CAA4C4B,MAA5C;AACA9D,YAAAA,QAAQ,CAACsC,UAAT,CAAoBxC,QAApB,EAA8BD,QAA9B,EAAwCqC,GAAxC,CAA4C4B,MAA5C,EANO,CAQP;;AACA,gBAAIrC,gBAAJ,EAAsB;AAElB1B,cAAAA,QAAQ,CAACyD,OAAT,CAAiBjE,QAAjB,EAA2B,IAAI,CAA/B;AACAS,cAAAA,QAAQ,CAACwD,OAAT,CAAiBjE,QAAjB,EAA2B,IAAI,CAA/B;AACAS,cAAAA,QAAQ,CAACwD,OAAT,CAAiBjE,QAAjB,EAA2B,IAAI,CAA/B;AAEH,aAND,MAMO;AAEHQ,cAAAA,QAAQ,CAACyD,OAAT,CAAiBjE,QAAjB,EAA2B,IAAI,CAA/B;AACAQ,cAAAA,QAAQ,CAACyD,OAAT,CAAiBjE,QAAjB,EAA2B,IAAI,CAA/B;AACAS,cAAAA,QAAQ,CAACwD,OAAT,CAAiBjE,QAAjB,EAA2B,IAAI,CAA/B;AAEH;AAEJ,WAvBD,MAuBO;AAEHM,YAAAA,QAAQ,CAACyC,UAAT,CAAoBoB,EAApB,EAAwBI,MAAxB;AACAhE,YAAAA,QAAQ,CAACzD,GAAT,CAAawD,QAAQ,CAACrK,CAAtB,EAAyB,CAAEqK,QAAQ,CAACtK,CAApC;AAEAwK,YAAAA,QAAQ,CAACkE,UAAT,CAAoBpE,QAApB,EAA8BC,QAA9B,EAAwCoC,GAAxC,CAA4C4B,MAA5C;AACA9D,YAAAA,QAAQ,CAACsC,UAAT,CAAoBxC,QAApB,EAA8BD,QAA9B,EAAwCqC,GAAxC,CAA4C4B,MAA5C;AAEA,gBAAII,EAAE,GAAG3E,QAAQ,CAACzL,MAAlB,CARG,CAUH;;AACA,gBAAI2N,gBAAJ,EAAsB;AAElB1B,cAAAA,QAAQ,CAACyD,OAAT,CAAiBjE,QAAjB,EAA2B2E,EAAE,GAAG,IAAI,CAApC;AACAlE,cAAAA,QAAQ,CAACwD,OAAT,CAAiBjE,QAAjB,EAA2B2E,EAAE,GAAG,IAAI,CAApC;AACAlE,cAAAA,QAAQ,CAACwD,OAAT,CAAiBjE,QAAjB,EAA2B2E,EAAE,GAAG,IAAI,CAApC;AAEH,aAND,MAMO;AAEHnE,cAAAA,QAAQ,CAACyD,OAAT,CAAiBjE,QAAjB,EAA2B2E,EAAE,GAAG,IAAI,CAApC;AACAlE,cAAAA,QAAQ,CAACwD,OAAT,CAAiBjE,QAAjB,EAA2B2E,EAAE,GAAG,IAAI,CAApC;AACAlE,cAAAA,QAAQ,CAACwD,OAAT,CAAiBjE,QAAjB,EAA2B2E,EAAE,GAAG,IAAI,CAApC;AAEH;AAEJ;;AAED;;AAEJ,aAAK,MAAL;AACA;AAEI;AACA;AA1ER;AA8EH;;AAED,aAASnD,sBAAT,CAAgC3B,MAAhC,EAAwC;AAEpC;AACA;AAEA,UAAI+E,SAAS,GAAG,KAAhB;;AACA,WAAK,IAAItQ,CAAC,GAAG,CAAR,EAAWiJ,CAAC,GAAGsC,MAAM,CAACtL,MAAP,GAAgB,CAApC,EAAuCD,CAAC,GAAGiJ,CAA3C,EAA8CjJ,CAAC,EAA/C,EAAmD;AAE/C,YAAIuL,MAAM,CAACvL,CAAD,CAAN,CAAUuQ,UAAV,CAAqBhF,MAAM,CAACvL,CAAC,GAAG,CAAL,CAA3B,IAAsCyL,WAA1C,EAAuD;AAEnD6E,UAAAA,SAAS,GAAG,IAAZ;AACA;AAEH;AAEJ;;AAED,UAAI,CAACA,SAAL,EAAgB,OAAO/E,MAAP;AAEhB,UAAIiF,SAAS,GAAG,EAAhB;AACAA,MAAAA,SAAS,CAAC5Q,IAAV,CAAe2L,MAAM,CAAC,CAAD,CAArB;;AAEA,WAAK,IAAIvL,CAAC,GAAG,CAAR,EAAWiJ,CAAC,GAAGsC,MAAM,CAACtL,MAAP,GAAgB,CAApC,EAAuCD,CAAC,GAAGiJ,CAA3C,EAA8CjJ,CAAC,EAA/C,EAAmD;AAE/C,YAAIuL,MAAM,CAACvL,CAAD,CAAN,CAAUuQ,UAAV,CAAqBhF,MAAM,CAACvL,CAAC,GAAG,CAAL,CAA3B,KAAuCyL,WAA3C,EAAwD;AAEpD+E,UAAAA,SAAS,CAAC5Q,IAAV,CAAe2L,MAAM,CAACvL,CAAD,CAArB;AAEH;AAEJ;;AAEDwQ,MAAAA,SAAS,CAAC5Q,IAAV,CAAe2L,MAAM,CAACA,MAAM,CAACtL,MAAP,GAAgB,CAAjB,CAArB;AAEA,aAAOuQ,SAAP;AAEH;AAEJ,GA1tBD;AA4tBH,CAhvBqC,EAAtC;;AAkvBA,SAASxT,SAAT","sourcesContent":["/**\n * @author mrdoob / http://mrdoob.com/\n * @author zz85 / http://joshuakoo.com/\n * @author yomboprime / https://yombo.org\n */\n\nimport {\n    BufferGeometry,\n    Color,\n    FileLoader,\n    Float32BufferAttribute,\n    Loader,\n    Matrix3,\n    Path,\n    ShapePath,\n    Vector2,\n    Vector3\n} from \"../../js/three.module.js\";\n\nvar SVGLoader = function (manager) {\n\n    Loader.call(this, manager);\n\n};\n\nSVGLoader.prototype = Object.assign(Object.create(Loader.prototype), {\n\n    constructor: SVGLoader,\n\n    load: function (url, onLoad, onProgress, onError) {\n\n        var scope = this;\n\n        var loader = new FileLoader(scope.manager);\n        loader.setPath(scope.path);\n        loader.load(url, function (text) {\n\n            onLoad(scope.parse(text));\n\n        }, onProgress, onError);\n\n    },\n\n    parse: function (text) {\n\n        function parseNode(node, style) {\n\n            if (node.nodeType !== 1) return;\n\n            var transform = getNodeTransform(node);\n\n            var path = null;\n\n            switch (node.nodeName) {\n\n                case 'svg':\n                    break;\n\n                case 'g':\n                    style = parseStyle(node, style);\n                    break;\n\n                case 'path':\n                    style = parseStyle(node, style);\n                    if (node.hasAttribute('d')) path = parsePathNode(node);\n                    break;\n\n                case 'rect':\n                    style = parseStyle(node, style);\n                    path = parseRectNode(node);\n                    break;\n\n                case 'polygon':\n                    style = parseStyle(node, style);\n                    path = parsePolygonNode(node);\n                    break;\n\n                case 'polyline':\n                    style = parseStyle(node, style);\n                    path = parsePolylineNode(node);\n                    break;\n\n                case 'circle':\n                    style = parseStyle(node, style);\n                    path = parseCircleNode(node);\n                    break;\n\n                case 'ellipse':\n                    style = parseStyle(node, style);\n                    path = parseEllipseNode(node);\n                    break;\n\n                case 'line':\n                    style = parseStyle(node, style);\n                    path = parseLineNode(node);\n                    break;\n\n                default:\n                    console.log(node);\n\n            }\n\n            if (path) {\n\n                if (style.fill !== undefined && style.fill !== 'none') {\n\n                    path.color.setStyle(style.fill);\n\n                }\n\n                transformPath(path, currentTransform);\n\n                paths.push(path);\n\n                path.userData = { node: node, style: style };\n\n            }\n\n            var nodes = node.childNodes;\n\n            for (var i = 0; i < nodes.length; i++) {\n\n                parseNode(nodes[i], style);\n\n            }\n\n            if (transform) {\n\n                transformStack.pop();\n\n                if (transformStack.length > 0) {\n\n                    currentTransform.copy(transformStack[transformStack.length - 1]);\n\n                } else {\n\n                    currentTransform.identity();\n\n                }\n\n            }\n\n        }\n\n        function parsePathNode(node) {\n\n            var path = new ShapePath();\n\n            var point = new Vector2();\n            var control = new Vector2();\n\n            var firstPoint = new Vector2();\n            var isFirstPoint = true;\n            var doSetFirstPoint = false;\n\n            var d = node.getAttribute('d');\n\n            // console.log( d );\n\n            var commands = d.match(/[a-df-z][^a-df-z]*/ig);\n\n            for (var i = 0, l = commands.length; i < l; i++) {\n\n                var command = commands[i];\n\n                var type = command.charAt(0);\n                var data = command.substr(1).trim();\n\n                if (isFirstPoint === true) {\n\n                    doSetFirstPoint = true;\n                    isFirstPoint = false;\n\n                }\n\n                switch (type) {\n\n                    case 'M':\n                        var numbers = parseFloats(data);\n                        for (var j = 0, jl = numbers.length; j < jl; j += 2) {\n\n                            point.x = numbers[j + 0];\n                            point.y = numbers[j + 1];\n                            control.x = point.x;\n                            control.y = point.y;\n\n                            if (j === 0) {\n\n                                path.moveTo(point.x, point.y);\n\n                            } else {\n\n                                path.lineTo(point.x, point.y);\n\n                            }\n\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point);\n\n                        }\n                        break;\n\n                    case 'H':\n                        var numbers = parseFloats(data);\n\n                        for (var j = 0, jl = numbers.length; j < jl; j++) {\n\n                            point.x = numbers[j];\n                            control.x = point.x;\n                            control.y = point.y;\n                            path.lineTo(point.x, point.y);\n\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point);\n\n                        }\n                        break;\n\n                    case 'V':\n                        var numbers = parseFloats(data);\n\n                        for (var j = 0, jl = numbers.length; j < jl; j++) {\n\n                            point.y = numbers[j];\n                            control.x = point.x;\n                            control.y = point.y;\n                            path.lineTo(point.x, point.y);\n\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point);\n\n                        }\n                        break;\n\n                    case 'L':\n                        var numbers = parseFloats(data);\n\n                        for (var j = 0, jl = numbers.length; j < jl; j += 2) {\n\n                            point.x = numbers[j + 0];\n                            point.y = numbers[j + 1];\n                            control.x = point.x;\n                            control.y = point.y;\n                            path.lineTo(point.x, point.y);\n\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point);\n\n                        }\n                        break;\n\n                    case 'C':\n                        var numbers = parseFloats(data);\n\n                        for (var j = 0, jl = numbers.length; j < jl; j += 6) {\n\n                            path.bezierCurveTo(\n                                numbers[j + 0],\n                                numbers[j + 1],\n                                numbers[j + 2],\n                                numbers[j + 3],\n                                numbers[j + 4],\n                                numbers[j + 5]\n                            );\n                            control.x = numbers[j + 2];\n                            control.y = numbers[j + 3];\n                            point.x = numbers[j + 4];\n                            point.y = numbers[j + 5];\n\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point);\n\n                        }\n                        break;\n\n                    case 'S':\n                        var numbers = parseFloats(data);\n\n                        for (var j = 0, jl = numbers.length; j < jl; j += 4) {\n\n                            path.bezierCurveTo(\n                                getReflection(point.x, control.x),\n                                getReflection(point.y, control.y),\n                                numbers[j + 0],\n                                numbers[j + 1],\n                                numbers[j + 2],\n                                numbers[j + 3]\n                            );\n                            control.x = numbers[j + 0];\n                            control.y = numbers[j + 1];\n                            point.x = numbers[j + 2];\n                            point.y = numbers[j + 3];\n\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point);\n\n                        }\n                        break;\n\n                    case 'Q':\n                        var numbers = parseFloats(data);\n\n                        for (var j = 0, jl = numbers.length; j < jl; j += 4) {\n\n                            path.quadraticCurveTo(\n                                numbers[j + 0],\n                                numbers[j + 1],\n                                numbers[j + 2],\n                                numbers[j + 3]\n                            );\n                            control.x = numbers[j + 0];\n                            control.y = numbers[j + 1];\n                            point.x = numbers[j + 2];\n                            point.y = numbers[j + 3];\n\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point);\n\n                        }\n                        break;\n\n                    case 'T':\n                        var numbers = parseFloats(data);\n\n                        for (var j = 0, jl = numbers.length; j < jl; j += 2) {\n\n                            var rx = getReflection(point.x, control.x);\n                            var ry = getReflection(point.y, control.y);\n                            path.quadraticCurveTo(\n                                rx,\n                                ry,\n                                numbers[j + 0],\n                                numbers[j + 1]\n                            );\n                            control.x = rx;\n                            control.y = ry;\n                            point.x = numbers[j + 0];\n                            point.y = numbers[j + 1];\n\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point);\n\n                        }\n                        break;\n\n                    case 'A':\n                        var numbers = parseFloats(data);\n\n                        for (var j = 0, jl = numbers.length; j < jl; j += 7) {\n\n                            var start = point.clone();\n                            point.x = numbers[j + 5];\n                            point.y = numbers[j + 6];\n                            control.x = point.x;\n                            control.y = point.y;\n                            parseArcCommand(\n                                path, numbers[j], numbers[j + 1], numbers[j + 2], numbers[j + 3], numbers[j + 4], start, point\n                            );\n\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point);\n\n                        }\n                        break;\n\n                    case 'm':\n                        var numbers = parseFloats(data);\n\n                        for (var j = 0, jl = numbers.length; j < jl; j += 2) {\n\n                            point.x += numbers[j + 0];\n                            point.y += numbers[j + 1];\n                            control.x = point.x;\n                            control.y = point.y;\n\n                            if (j === 0) {\n\n                                path.moveTo(point.x, point.y);\n\n                            } else {\n\n                                path.lineTo(point.x, point.y);\n\n                            }\n\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point);\n\n                        }\n                        break;\n\n                    case 'h':\n                        var numbers = parseFloats(data);\n\n                        for (var j = 0, jl = numbers.length; j < jl; j++) {\n\n                            point.x += numbers[j];\n                            control.x = point.x;\n                            control.y = point.y;\n                            path.lineTo(point.x, point.y);\n\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point);\n\n                        }\n                        break;\n\n                    case 'v':\n                        var numbers = parseFloats(data);\n\n                        for (var j = 0, jl = numbers.length; j < jl; j++) {\n\n                            point.y += numbers[j];\n                            control.x = point.x;\n                            control.y = point.y;\n                            path.lineTo(point.x, point.y);\n\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point);\n\n                        }\n                        break;\n\n                    case 'l':\n                        var numbers = parseFloats(data);\n\n                        for (var j = 0, jl = numbers.length; j < jl; j += 2) {\n\n                            point.x += numbers[j + 0];\n                            point.y += numbers[j + 1];\n                            control.x = point.x;\n                            control.y = point.y;\n                            path.lineTo(point.x, point.y);\n\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point);\n\n                        }\n                        break;\n\n                    case 'c':\n                        var numbers = parseFloats(data);\n\n                        for (var j = 0, jl = numbers.length; j < jl; j += 6) {\n\n                            path.bezierCurveTo(\n                                point.x + numbers[j + 0],\n                                point.y + numbers[j + 1],\n                                point.x + numbers[j + 2],\n                                point.y + numbers[j + 3],\n                                point.x + numbers[j + 4],\n                                point.y + numbers[j + 5]\n                            );\n                            control.x = point.x + numbers[j + 2];\n                            control.y = point.y + numbers[j + 3];\n                            point.x += numbers[j + 4];\n                            point.y += numbers[j + 5];\n\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point);\n\n                        }\n                        break;\n\n                    case 's':\n                        var numbers = parseFloats(data);\n\n                        for (var j = 0, jl = numbers.length; j < jl; j += 4) {\n\n                            path.bezierCurveTo(\n                                getReflection(point.x, control.x),\n                                getReflection(point.y, control.y),\n                                point.x + numbers[j + 0],\n                                point.y + numbers[j + 1],\n                                point.x + numbers[j + 2],\n                                point.y + numbers[j + 3]\n                            );\n                            control.x = point.x + numbers[j + 0];\n                            control.y = point.y + numbers[j + 1];\n                            point.x += numbers[j + 2];\n                            point.y += numbers[j + 3];\n\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point);\n\n                        }\n                        break;\n\n                    case 'q':\n                        var numbers = parseFloats(data);\n\n                        for (var j = 0, jl = numbers.length; j < jl; j += 4) {\n\n                            path.quadraticCurveTo(\n                                point.x + numbers[j + 0],\n                                point.y + numbers[j + 1],\n                                point.x + numbers[j + 2],\n                                point.y + numbers[j + 3]\n                            );\n                            control.x = point.x + numbers[j + 0];\n                            control.y = point.y + numbers[j + 1];\n                            point.x += numbers[j + 2];\n                            point.y += numbers[j + 3];\n\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point);\n\n                        }\n                        break;\n\n                    case 't':\n                        var numbers = parseFloats(data);\n\n                        for (var j = 0, jl = numbers.length; j < jl; j += 2) {\n\n                            var rx = getReflection(point.x, control.x);\n                            var ry = getReflection(point.y, control.y);\n                            path.quadraticCurveTo(\n                                rx,\n                                ry,\n                                point.x + numbers[j + 0],\n                                point.y + numbers[j + 1]\n                            );\n                            control.x = rx;\n                            control.y = ry;\n                            point.x = point.x + numbers[j + 0];\n                            point.y = point.y + numbers[j + 1];\n\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point);\n\n                        }\n                        break;\n\n                    case 'a':\n                        var numbers = parseFloats(data);\n\n                        for (var j = 0, jl = numbers.length; j < jl; j += 7) {\n\n                            var start = point.clone();\n                            point.x += numbers[j + 5];\n                            point.y += numbers[j + 6];\n                            control.x = point.x;\n                            control.y = point.y;\n                            parseArcCommand(\n                                path, numbers[j], numbers[j + 1], numbers[j + 2], numbers[j + 3], numbers[j + 4], start, point\n                            );\n\n                            if (j === 0 && doSetFirstPoint === true) firstPoint.copy(point);\n\n                        }\n                        break;\n\n                    case 'Z':\n                    case 'z':\n                        path.currentPath.autoClose = true;\n\n                        if (path.currentPath.curves.length > 0) {\n\n                            // Reset point to beginning of Path\n                            point.copy(firstPoint);\n                            path.currentPath.currentPoint.copy(point);\n                            isFirstPoint = true;\n\n                        }\n                        break;\n\n                    default:\n                        console.warn(command);\n\n                }\n\n                // console.log( type, parseFloats( data ), parseFloats( data ).length  )\n\n                doSetFirstPoint = false;\n\n            }\n\n            return path;\n\n        }\n\n\t\t/**\n\t\t * https://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\n\t\t * https://mortoray.com/2017/02/16/rendering-an-svg-elliptical-arc-as-bezier-curves/ Appendix: Endpoint to center arc conversion\n\t\t * From\n\t\t * rx ry x-axis-rotation large-arc-flag sweep-flag x y\n\t\t * To\n\t\t * aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation\n\t\t */\n\n        function parseArcCommand(path, rx, ry, x_axis_rotation, large_arc_flag, sweep_flag, start, end) {\n\n            x_axis_rotation = x_axis_rotation * Math.PI / 180;\n\n            // Ensure radii are positive\n            rx = Math.abs(rx);\n            ry = Math.abs(ry);\n\n            // Compute (x1′, y1′)\n            var dx2 = (start.x - end.x) / 2.0;\n            var dy2 = (start.y - end.y) / 2.0;\n            var x1p = Math.cos(x_axis_rotation) * dx2 + Math.sin(x_axis_rotation) * dy2;\n            var y1p = - Math.sin(x_axis_rotation) * dx2 + Math.cos(x_axis_rotation) * dy2;\n\n            // Compute (cx′, cy′)\n            var rxs = rx * rx;\n            var rys = ry * ry;\n            var x1ps = x1p * x1p;\n            var y1ps = y1p * y1p;\n\n            // Ensure radii are large enough\n            var cr = x1ps / rxs + y1ps / rys;\n\n            if (cr > 1) {\n\n                // scale up rx,ry equally so cr == 1\n                var s = Math.sqrt(cr);\n                rx = s * rx;\n                ry = s * ry;\n                rxs = rx * rx;\n                rys = ry * ry;\n\n            }\n\n            var dq = (rxs * y1ps + rys * x1ps);\n            var pq = (rxs * rys - dq) / dq;\n            var q = Math.sqrt(Math.max(0, pq));\n            if (large_arc_flag === sweep_flag) q = - q;\n            var cxp = q * rx * y1p / ry;\n            var cyp = - q * ry * x1p / rx;\n\n            // Step 3: Compute (cx, cy) from (cx′, cy′)\n            var cx = Math.cos(x_axis_rotation) * cxp - Math.sin(x_axis_rotation) * cyp + (start.x + end.x) / 2;\n            var cy = Math.sin(x_axis_rotation) * cxp + Math.cos(x_axis_rotation) * cyp + (start.y + end.y) / 2;\n\n            // Step 4: Compute θ1 and Δθ\n            var theta = svgAngle(1, 0, (x1p - cxp) / rx, (y1p - cyp) / ry);\n            var delta = svgAngle((x1p - cxp) / rx, (y1p - cyp) / ry, (- x1p - cxp) / rx, (- y1p - cyp) / ry) % (Math.PI * 2);\n\n            path.currentPath.absellipse(cx, cy, rx, ry, theta, theta + delta, sweep_flag === 0, x_axis_rotation);\n\n        }\n\n        function svgAngle(ux, uy, vx, vy) {\n\n            var dot = ux * vx + uy * vy;\n            var len = Math.sqrt(ux * ux + uy * uy) * Math.sqrt(vx * vx + vy * vy);\n            var ang = Math.acos(Math.max(- 1, Math.min(1, dot / len))); // floating point precision, slightly over values appear\n            if ((ux * vy - uy * vx) < 0) ang = - ang;\n            return ang;\n\n        }\n\n\t\t/*\n\t\t* According to https://www.w3.org/TR/SVG/shapes.html#RectElementRXAttribute\n\t\t* rounded corner should be rendered to elliptical arc, but bezier curve does the job well enough\n\t\t*/\n        function parseRectNode(node) {\n\n            var x = parseFloat(node.getAttribute('x') || 0);\n            var y = parseFloat(node.getAttribute('y') || 0);\n            var rx = parseFloat(node.getAttribute('rx') || 0);\n            var ry = parseFloat(node.getAttribute('ry') || 0);\n            var w = parseFloat(node.getAttribute('width'));\n            var h = parseFloat(node.getAttribute('height'));\n\n            var path = new ShapePath();\n            path.moveTo(x + 2 * rx, y);\n            path.lineTo(x + w - 2 * rx, y);\n            if (rx !== 0 || ry !== 0) path.bezierCurveTo(x + w, y, x + w, y, x + w, y + 2 * ry);\n            path.lineTo(x + w, y + h - 2 * ry);\n            if (rx !== 0 || ry !== 0) path.bezierCurveTo(x + w, y + h, x + w, y + h, x + w - 2 * rx, y + h);\n            path.lineTo(x + 2 * rx, y + h);\n\n            if (rx !== 0 || ry !== 0) {\n\n                path.bezierCurveTo(x, y + h, x, y + h, x, y + h - 2 * ry);\n\n            }\n\n            path.lineTo(x, y + 2 * ry);\n\n            if (rx !== 0 || ry !== 0) {\n\n                path.bezierCurveTo(x, y, x, y, x + 2 * rx, y);\n\n            }\n\n            return path;\n\n        }\n\n        function parsePolygonNode(node) {\n\n            function iterator(match, a, b) {\n\n                var x = parseFloat(a);\n                var y = parseFloat(b);\n\n                if (index === 0) {\n\n                    path.moveTo(x, y);\n\n                } else {\n\n                    path.lineTo(x, y);\n\n                }\n\n                index++;\n\n            }\n\n            var regex = /(-?[\\d\\.?]+)[,|\\s](-?[\\d\\.?]+)/g;\n\n            var path = new ShapePath();\n\n            var index = 0;\n\n            node.getAttribute('points').replace(regex, iterator);\n\n            path.currentPath.autoClose = true;\n\n            return path;\n\n        }\n\n        function parsePolylineNode(node) {\n\n            function iterator(match, a, b) {\n\n                var x = parseFloat(a);\n                var y = parseFloat(b);\n\n                if (index === 0) {\n\n                    path.moveTo(x, y);\n\n                } else {\n\n                    path.lineTo(x, y);\n\n                }\n\n                index++;\n\n            }\n\n            var regex = /(-?[\\d\\.?]+)[,|\\s](-?[\\d\\.?]+)/g;\n\n            var path = new ShapePath();\n\n            var index = 0;\n\n            node.getAttribute('points').replace(regex, iterator);\n\n            path.currentPath.autoClose = false;\n\n            return path;\n\n        }\n\n        function parseCircleNode(node) {\n\n            var x = parseFloat(node.getAttribute('cx'));\n            var y = parseFloat(node.getAttribute('cy'));\n            var r = parseFloat(node.getAttribute('r'));\n\n            var subpath = new Path();\n            subpath.absarc(x, y, r, 0, Math.PI * 2);\n\n            var path = new ShapePath();\n            path.subPaths.push(subpath);\n\n            return path;\n\n        }\n\n        function parseEllipseNode(node) {\n\n            var x = parseFloat(node.getAttribute('cx'));\n            var y = parseFloat(node.getAttribute('cy'));\n            var rx = parseFloat(node.getAttribute('rx'));\n            var ry = parseFloat(node.getAttribute('ry'));\n\n            var subpath = new Path();\n            subpath.absellipse(x, y, rx, ry, 0, Math.PI * 2);\n\n            var path = new ShapePath();\n            path.subPaths.push(subpath);\n\n            return path;\n\n        }\n\n        function parseLineNode(node) {\n\n            var x1 = parseFloat(node.getAttribute('x1'));\n            var y1 = parseFloat(node.getAttribute('y1'));\n            var x2 = parseFloat(node.getAttribute('x2'));\n            var y2 = parseFloat(node.getAttribute('y2'));\n\n            var path = new ShapePath();\n            path.moveTo(x1, y1);\n            path.lineTo(x2, y2);\n            path.currentPath.autoClose = false;\n\n            return path;\n\n        }\n\n        //\n\n        function parseStyle(node, style) {\n\n            style = Object.assign({}, style); // clone style\n\n            function addStyle(svgName, jsName, adjustFunction) {\n\n                if (adjustFunction === undefined) adjustFunction = function copy(v) {\n\n                    return v;\n\n                };\n\n                if (node.hasAttribute(svgName)) style[jsName] = adjustFunction(node.getAttribute(svgName));\n                if (node.style && node.style[svgName] !== '') style[jsName] = adjustFunction(node.style[svgName]);\n\n            }\n\n            function clamp(v) {\n\n                return Math.max(0, Math.min(1, parseFloat(v)));\n\n            }\n\n            function positive(v) {\n\n                return Math.max(0, parseFloat(v));\n\n            }\n\n            addStyle('fill', 'fill');\n            addStyle('fill-opacity', 'fillOpacity', clamp);\n            addStyle('stroke', 'stroke');\n            addStyle('stroke-opacity', 'strokeOpacity', clamp);\n            addStyle('stroke-width', 'strokeWidth', positive);\n            addStyle('stroke-linejoin', 'strokeLineJoin');\n            addStyle('stroke-linecap', 'strokeLineCap');\n            addStyle('stroke-miterlimit', 'strokeMiterLimit', positive);\n\n            return style;\n\n        }\n\n        // http://www.w3.org/TR/SVG11/implnote.html#PathElementImplementationNotes\n\n        function getReflection(a, b) {\n\n            return a - (b - a);\n\n        }\n\n        function parseFloats(string) {\n\n            var array = string.split(/[\\s,]+|(?=\\s?[+\\-])/);\n\n            for (var i = 0; i < array.length; i++) {\n\n                var number = array[i];\n\n                // Handle values like 48.6037.7.8\n                // TODO Find a regex for this\n\n                if (number.indexOf('.') !== number.lastIndexOf('.')) {\n\n                    var split = number.split('.');\n\n                    for (var s = 2; s < split.length; s++) {\n\n                        array.splice(i + s - 1, 0, '0.' + split[s]);\n\n                    }\n\n                }\n\n                array[i] = parseFloat(number);\n\n            }\n\n            return array;\n\n\n        }\n\n        function getNodeTransform(node) {\n\n            if (!node.hasAttribute('transform')) {\n\n                return null;\n\n            }\n\n            var transform = parseNodeTransform(node);\n\n            if (transformStack.length > 0) {\n\n                transform.premultiply(transformStack[transformStack.length - 1]);\n\n            }\n\n            currentTransform.copy(transform);\n            transformStack.push(transform);\n\n            return transform;\n\n        }\n\n        function parseNodeTransform(node) {\n\n            var transform = new Matrix3();\n            var currentTransform = tempTransform0;\n            var transformsTexts = node.getAttribute('transform').split(')');\n\n            for (var tIndex = transformsTexts.length - 1; tIndex >= 0; tIndex--) {\n\n                var transformText = transformsTexts[tIndex].trim();\n\n                if (transformText === '') continue;\n\n                var openParPos = transformText.indexOf('(');\n                var closeParPos = transformText.length;\n\n                if (openParPos > 0 && openParPos < closeParPos) {\n\n                    var transformType = transformText.substr(0, openParPos);\n\n                    var array = parseFloats(transformText.substr(openParPos + 1, closeParPos - openParPos - 1));\n\n                    currentTransform.identity();\n\n                    switch (transformType) {\n\n                        case \"translate\":\n\n                            if (array.length >= 1) {\n\n                                var tx = array[0];\n                                var ty = tx;\n\n                                if (array.length >= 2) {\n\n                                    ty = array[1];\n\n                                }\n\n                                currentTransform.translate(tx, ty);\n\n                            }\n\n                            break;\n\n                        case \"rotate\":\n\n                            if (array.length >= 1) {\n\n                                var angle = 0;\n                                var cx = 0;\n                                var cy = 0;\n\n                                // Angle\n                                angle = - array[0] * Math.PI / 180;\n\n                                if (array.length >= 3) {\n\n                                    // Center x, y\n                                    cx = array[1];\n                                    cy = array[2];\n\n                                }\n\n                                // Rotate around center (cx, cy)\n                                tempTransform1.identity().translate(- cx, - cy);\n                                tempTransform2.identity().rotate(angle);\n                                tempTransform3.multiplyMatrices(tempTransform2, tempTransform1);\n                                tempTransform1.identity().translate(cx, cy);\n                                currentTransform.multiplyMatrices(tempTransform1, tempTransform3);\n\n                            }\n\n                            break;\n\n                        case \"scale\":\n\n                            if (array.length >= 1) {\n\n                                var scaleX = array[0];\n                                var scaleY = scaleX;\n\n                                if (array.length >= 2) {\n\n                                    scaleY = array[1];\n\n                                }\n\n                                currentTransform.scale(scaleX, scaleY);\n\n                            }\n\n                            break;\n\n                        case \"skewX\":\n\n                            if (array.length === 1) {\n\n                                currentTransform.set(\n                                    1, Math.tan(array[0] * Math.PI / 180), 0,\n                                    0, 1, 0,\n                                    0, 0, 1\n                                );\n\n                            }\n\n                            break;\n\n                        case \"skewY\":\n\n                            if (array.length === 1) {\n\n                                currentTransform.set(\n                                    1, 0, 0,\n                                    Math.tan(array[0] * Math.PI / 180), 1, 0,\n                                    0, 0, 1\n                                );\n\n                            }\n\n                            break;\n\n                        case \"matrix\":\n\n                            if (array.length === 6) {\n\n                                currentTransform.set(\n                                    array[0], array[2], array[4],\n                                    array[1], array[3], array[5],\n                                    0, 0, 1\n                                );\n\n                            }\n\n                            break;\n\n                    }\n\n                }\n\n                transform.premultiply(currentTransform);\n\n            }\n\n            return transform;\n\n        }\n\n        function transformPath(path, m) {\n\n            function transfVec2(v2) {\n\n                tempV3.set(v2.x, v2.y, 1).applyMatrix3(m);\n\n                v2.set(tempV3.x, tempV3.y);\n\n            }\n\n            var isRotated = isTransformRotated(m);\n\n            var subPaths = path.subPaths;\n\n            for (var i = 0, n = subPaths.length; i < n; i++) {\n\n                var subPath = subPaths[i];\n                var curves = subPath.curves;\n\n                for (var j = 0; j < curves.length; j++) {\n\n                    var curve = curves[j];\n\n                    if (curve.isLineCurve) {\n\n                        transfVec2(curve.v1);\n                        transfVec2(curve.v2);\n\n                    } else if (curve.isCubicBezierCurve) {\n\n                        transfVec2(curve.v0);\n                        transfVec2(curve.v1);\n                        transfVec2(curve.v2);\n                        transfVec2(curve.v3);\n\n                    } else if (curve.isQuadraticBezierCurve) {\n\n                        transfVec2(curve.v0);\n                        transfVec2(curve.v1);\n                        transfVec2(curve.v2);\n\n                    } else if (curve.isEllipseCurve) {\n\n                        if (isRotated) {\n\n                            console.warn(\"SVGLoader: Elliptic arc or ellipse rotation or skewing is not implemented.\");\n\n                        }\n\n                        tempV2.set(curve.aX, curve.aY);\n                        transfVec2(tempV2);\n                        curve.aX = tempV2.x;\n                        curve.aY = tempV2.y;\n\n                        curve.xRadius *= getTransformScaleX(m);\n                        curve.yRadius *= getTransformScaleY(m);\n\n                    }\n\n                }\n\n            }\n\n        }\n\n        function isTransformRotated(m) {\n\n            return m.elements[1] !== 0 || m.elements[3] !== 0;\n\n        }\n\n        function getTransformScaleX(m) {\n\n            var te = m.elements;\n            return Math.sqrt(te[0] * te[0] + te[1] * te[1]);\n\n        }\n\n        function getTransformScaleY(m) {\n\n            var te = m.elements;\n            return Math.sqrt(te[3] * te[3] + te[4] * te[4]);\n\n        }\n\n        //\n\n        console.log('THREE.SVGLoader');\n\n        var paths = [];\n\n        var transformStack = [];\n\n        var tempTransform0 = new Matrix3();\n        var tempTransform1 = new Matrix3();\n        var tempTransform2 = new Matrix3();\n        var tempTransform3 = new Matrix3();\n        var tempV2 = new Vector2();\n        var tempV3 = new Vector3();\n\n        var currentTransform = new Matrix3();\n\n        console.time('THREE.SVGLoader: DOMParser');\n\n        var xml = new DOMParser().parseFromString(text, 'image/svg+xml'); // application/xml\n\n        console.timeEnd('THREE.SVGLoader: DOMParser');\n\n        console.time('THREE.SVGLoader: Parse');\n\n        parseNode(xml.documentElement, {\n            fill: '#000',\n            fillOpacity: 1,\n            strokeOpacity: 1,\n            strokeWidth: 1,\n            strokeLineJoin: 'miter',\n            strokeLineCap: 'butt',\n            strokeMiterLimit: 4\n        });\n\n        var data = { paths: paths, xml: xml.documentElement };\n\n        // console.log( paths );\n\n\n        console.timeEnd('THREE.SVGLoader: Parse');\n\n        return data;\n\n    }\n\n});\n\nSVGLoader.getStrokeStyle = function (width, color, lineJoin, lineCap, miterLimit) {\n\n    // Param width: Stroke width\n    // Param color: As returned by Color.getStyle()\n    // Param lineJoin: One of \"round\", \"bevel\", \"miter\" or \"miter-limit\"\n    // Param lineCap: One of \"round\", \"square\" or \"butt\"\n    // Param miterLimit: Maximum join length, in multiples of the \"width\" parameter (join is truncated if it exceeds that distance)\n    // Returns style object\n\n    width = width !== undefined ? width : 1;\n    color = color !== undefined ? color : '#000';\n    lineJoin = lineJoin !== undefined ? lineJoin : 'miter';\n    lineCap = lineCap !== undefined ? lineCap : 'butt';\n    miterLimit = miterLimit !== undefined ? miterLimit : 4;\n\n    return {\n        strokeColor: color,\n        strokeWidth: width,\n        strokeLineJoin: lineJoin,\n        strokeLineCap: lineCap,\n        strokeMiterLimit: miterLimit\n    };\n\n};\n\nSVGLoader.pointsToStroke = function (points, style, arcDivisions, minDistance) {\n\n    // Generates a stroke with some witdh around the given path.\n    // The path can be open or closed (last point equals to first point)\n    // Param points: Array of Vector2D (the path). Minimum 2 points.\n    // Param style: Object with SVG properties as returned by SVGLoader.getStrokeStyle(), or SVGLoader.parse() in the path.userData.style object\n    // Params arcDivisions: Arc divisions for round joins and endcaps. (Optional)\n    // Param minDistance: Points closer to this distance will be merged. (Optional)\n    // Returns BufferGeometry with stroke triangles (In plane z = 0). UV coordinates are generated ('u' along path. 'v' across it, from left to right)\n\n    var vertices = [];\n    var normals = [];\n    var uvs = [];\n\n    if (SVGLoader.pointsToStrokeWithBuffers(points, style, arcDivisions, minDistance, vertices, normals, uvs) === 0) {\n\n        return null;\n\n    }\n\n    var geometry = new BufferGeometry();\n    geometry.setAttribute('position', new Float32BufferAttribute(vertices, 3));\n    geometry.setAttribute('normal', new Float32BufferAttribute(normals, 3));\n    geometry.setAttribute('uv', new Float32BufferAttribute(uvs, 2));\n\n    return geometry;\n\n};\n\nSVGLoader.pointsToStrokeWithBuffers = function () {\n\n    var tempV2_1 = new Vector2();\n    var tempV2_2 = new Vector2();\n    var tempV2_3 = new Vector2();\n    var tempV2_4 = new Vector2();\n    var tempV2_5 = new Vector2();\n    var tempV2_6 = new Vector2();\n    var tempV2_7 = new Vector2();\n    var lastPointL = new Vector2();\n    var lastPointR = new Vector2();\n    var point0L = new Vector2();\n    var point0R = new Vector2();\n    var currentPointL = new Vector2();\n    var currentPointR = new Vector2();\n    var nextPointL = new Vector2();\n    var nextPointR = new Vector2();\n    var innerPoint = new Vector2();\n    var outerPoint = new Vector2();\n\n    return function (points, style, arcDivisions, minDistance, vertices, normals, uvs, vertexOffset) {\n\n        // This function can be called to update existing arrays or buffers.\n        // Accepts same parameters as pointsToStroke, plus the buffers and optional offset.\n        // Param vertexOffset: Offset vertices to start writing in the buffers (3 elements/vertex for vertices and normals, and 2 elements/vertex for uvs)\n        // Returns number of written vertices / normals / uvs pairs\n        // if 'vertices' parameter is undefined no triangles will be generated, but the returned vertices count will still be valid (useful to preallocate the buffers)\n        // 'normals' and 'uvs' buffers are optional\n\n        arcDivisions = arcDivisions !== undefined ? arcDivisions : 12;\n        minDistance = minDistance !== undefined ? minDistance : 0.001;\n        vertexOffset = vertexOffset !== undefined ? vertexOffset : 0;\n\n        // First ensure there are no duplicated points\n        points = removeDuplicatedPoints(points);\n\n        var numPoints = points.length;\n\n        if (numPoints < 2) return 0;\n\n        var isClosed = points[0].equals(points[numPoints - 1]);\n\n        var currentPoint;\n        var previousPoint = points[0];\n        var nextPoint;\n\n        var strokeWidth2 = style.strokeWidth / 2;\n\n        var deltaU = 1 / (numPoints - 1);\n        var u0 = 0;\n\n        var innerSideModified;\n        var joinIsOnLeftSide;\n        var isMiter;\n        var initialJoinIsOnLeftSide = false;\n\n        var numVertices = 0;\n        var currentCoordinate = vertexOffset * 3;\n        var currentCoordinateUV = vertexOffset * 2;\n\n        // Get initial left and right stroke points\n        getNormal(points[0], points[1], tempV2_1).multiplyScalar(strokeWidth2);\n        lastPointL.copy(points[0]).sub(tempV2_1);\n        lastPointR.copy(points[0]).add(tempV2_1);\n        point0L.copy(lastPointL);\n        point0R.copy(lastPointR);\n\n        for (var iPoint = 1; iPoint < numPoints; iPoint++) {\n\n            currentPoint = points[iPoint];\n\n            // Get next point\n            if (iPoint === numPoints - 1) {\n\n                if (isClosed) {\n\n                    // Skip duplicated initial point\n                    nextPoint = points[1];\n\n                } else nextPoint = undefined;\n\n            } else {\n\n                nextPoint = points[iPoint + 1];\n\n            }\n\n            // Normal of previous segment in tempV2_1\n            var normal1 = tempV2_1;\n            getNormal(previousPoint, currentPoint, normal1);\n\n            tempV2_3.copy(normal1).multiplyScalar(strokeWidth2);\n            currentPointL.copy(currentPoint).sub(tempV2_3);\n            currentPointR.copy(currentPoint).add(tempV2_3);\n\n            var u1 = u0 + deltaU;\n\n            innerSideModified = false;\n\n            if (nextPoint !== undefined) {\n\n                // Normal of next segment in tempV2_2\n                getNormal(currentPoint, nextPoint, tempV2_2);\n\n                tempV2_3.copy(tempV2_2).multiplyScalar(strokeWidth2);\n                nextPointL.copy(currentPoint).sub(tempV2_3);\n                nextPointR.copy(currentPoint).add(tempV2_3);\n\n                joinIsOnLeftSide = true;\n                tempV2_3.subVectors(nextPoint, previousPoint);\n                if (normal1.dot(tempV2_3) < 0) {\n\n                    joinIsOnLeftSide = false;\n\n                }\n                if (iPoint === 1) initialJoinIsOnLeftSide = joinIsOnLeftSide;\n\n                tempV2_3.subVectors(nextPoint, currentPoint);\n                tempV2_3.normalize();\n                var dot = Math.abs(normal1.dot(tempV2_3));\n\n                // If path is straight, don't create join\n                if (dot !== 0) {\n\n                    // Compute inner and outer segment intersections\n                    var miterSide = strokeWidth2 / dot;\n                    tempV2_3.multiplyScalar(- miterSide);\n                    tempV2_4.subVectors(currentPoint, previousPoint);\n                    tempV2_5.copy(tempV2_4).setLength(miterSide).add(tempV2_3);\n                    innerPoint.copy(tempV2_5).negate();\n                    var miterLength2 = tempV2_5.length();\n                    var segmentLengthPrev = tempV2_4.length();\n                    tempV2_4.divideScalar(segmentLengthPrev);\n                    tempV2_6.subVectors(nextPoint, currentPoint);\n                    var segmentLengthNext = tempV2_6.length();\n                    tempV2_6.divideScalar(segmentLengthNext);\n                    // Check that previous and next segments doesn't overlap with the innerPoint of intersection\n                    if (tempV2_4.dot(innerPoint) < segmentLengthPrev && tempV2_6.dot(innerPoint) < segmentLengthNext) {\n\n                        innerSideModified = true;\n\n                    }\n                    outerPoint.copy(tempV2_5).add(currentPoint);\n                    innerPoint.add(currentPoint);\n\n                    isMiter = false;\n\n                    if (innerSideModified) {\n\n                        if (joinIsOnLeftSide) {\n\n                            nextPointR.copy(innerPoint);\n                            currentPointR.copy(innerPoint);\n\n                        } else {\n\n                            nextPointL.copy(innerPoint);\n                            currentPointL.copy(innerPoint);\n\n                        }\n\n                    } else {\n\n                        // The segment triangles are generated here if there was overlapping\n\n                        makeSegmentTriangles();\n\n                    }\n\n                    switch (style.strokeLineJoin) {\n\n                        case 'bevel':\n\n                            makeSegmentWithBevelJoin(joinIsOnLeftSide, innerSideModified, u1);\n\n                            break;\n\n                        case 'round':\n\n                            // Segment triangles\n\n                            createSegmentTrianglesWithMiddleSection(joinIsOnLeftSide, innerSideModified);\n\n                            // Join triangles\n\n                            if (joinIsOnLeftSide) {\n\n                                makeCircularSector(currentPoint, currentPointL, nextPointL, u1, 0);\n\n                            } else {\n\n                                makeCircularSector(currentPoint, nextPointR, currentPointR, u1, 1);\n\n                            }\n\n                            break;\n\n                        case 'miter':\n                        case 'miter-clip':\n                        default:\n\n                            var miterFraction = (strokeWidth2 * style.strokeMiterLimit) / miterLength2;\n\n                            if (miterFraction < 1) {\n\n                                // The join miter length exceeds the miter limit\n\n                                if (style.strokeLineJoin !== 'miter-clip') {\n\n                                    makeSegmentWithBevelJoin(joinIsOnLeftSide, innerSideModified, u1);\n                                    break;\n\n                                } else {\n\n                                    // Segment triangles\n\n                                    createSegmentTrianglesWithMiddleSection(joinIsOnLeftSide, innerSideModified);\n\n                                    // Miter-clip join triangles\n\n                                    if (joinIsOnLeftSide) {\n\n                                        tempV2_6.subVectors(outerPoint, currentPointL).multiplyScalar(miterFraction).add(currentPointL);\n                                        tempV2_7.subVectors(outerPoint, nextPointL).multiplyScalar(miterFraction).add(nextPointL);\n\n                                        addVertex(currentPointL, u1, 0);\n                                        addVertex(tempV2_6, u1, 0);\n                                        addVertex(currentPoint, u1, 0.5);\n\n                                        addVertex(currentPoint, u1, 0.5);\n                                        addVertex(tempV2_6, u1, 0);\n                                        addVertex(tempV2_7, u1, 0);\n\n                                        addVertex(currentPoint, u1, 0.5);\n                                        addVertex(tempV2_7, u1, 0);\n                                        addVertex(nextPointL, u1, 0);\n\n                                    } else {\n\n                                        tempV2_6.subVectors(outerPoint, currentPointR).multiplyScalar(miterFraction).add(currentPointR);\n                                        tempV2_7.subVectors(outerPoint, nextPointR).multiplyScalar(miterFraction).add(nextPointR);\n\n                                        addVertex(currentPointR, u1, 1);\n                                        addVertex(tempV2_6, u1, 1);\n                                        addVertex(currentPoint, u1, 0.5);\n\n                                        addVertex(currentPoint, u1, 0.5);\n                                        addVertex(tempV2_6, u1, 1);\n                                        addVertex(tempV2_7, u1, 1);\n\n                                        addVertex(currentPoint, u1, 0.5);\n                                        addVertex(tempV2_7, u1, 1);\n                                        addVertex(nextPointR, u1, 1);\n\n                                    }\n\n                                }\n\n                            } else {\n\n                                // Miter join segment triangles\n\n                                if (innerSideModified) {\n\n                                    // Optimized segment + join triangles\n\n                                    if (joinIsOnLeftSide) {\n\n                                        addVertex(lastPointR, u0, 1);\n                                        addVertex(lastPointL, u0, 0);\n                                        addVertex(outerPoint, u1, 0);\n\n                                        addVertex(lastPointR, u0, 1);\n                                        addVertex(outerPoint, u1, 0);\n                                        addVertex(innerPoint, u1, 1);\n\n                                    } else {\n\n                                        addVertex(lastPointR, u0, 1);\n                                        addVertex(lastPointL, u0, 0);\n                                        addVertex(outerPoint, u1, 1);\n\n                                        addVertex(lastPointL, u0, 0);\n                                        addVertex(innerPoint, u1, 0);\n                                        addVertex(outerPoint, u1, 1);\n\n                                    }\n\n\n                                    if (joinIsOnLeftSide) {\n\n                                        nextPointL.copy(outerPoint);\n\n                                    } else {\n\n                                        nextPointR.copy(outerPoint);\n\n                                    }\n\n\n                                } else {\n\n                                    // Add extra miter join triangles\n\n                                    if (joinIsOnLeftSide) {\n\n                                        addVertex(currentPointL, u1, 0);\n                                        addVertex(outerPoint, u1, 0);\n                                        addVertex(currentPoint, u1, 0.5);\n\n                                        addVertex(currentPoint, u1, 0.5);\n                                        addVertex(outerPoint, u1, 0);\n                                        addVertex(nextPointL, u1, 0);\n\n                                    } else {\n\n                                        addVertex(currentPointR, u1, 1);\n                                        addVertex(outerPoint, u1, 1);\n                                        addVertex(currentPoint, u1, 0.5);\n\n                                        addVertex(currentPoint, u1, 0.5);\n                                        addVertex(outerPoint, u1, 1);\n                                        addVertex(nextPointR, u1, 1);\n\n                                    }\n\n                                }\n\n                                isMiter = true;\n\n                            }\n\n                            break;\n\n                    }\n\n                } else {\n\n                    // The segment triangles are generated here when two consecutive points are collinear\n\n                    makeSegmentTriangles();\n\n                }\n\n            } else {\n\n                // The segment triangles are generated here if it is the ending segment\n\n                makeSegmentTriangles();\n\n            }\n\n            if (!isClosed && iPoint === numPoints - 1) {\n\n                // Start line endcap\n                addCapGeometry(points[0], point0L, point0R, joinIsOnLeftSide, true, u0);\n\n            }\n\n            // Increment loop variables\n\n            u0 = u1;\n\n            previousPoint = currentPoint;\n\n            lastPointL.copy(nextPointL);\n            lastPointR.copy(nextPointR);\n\n        }\n\n        if (!isClosed) {\n\n            // Ending line endcap\n            addCapGeometry(currentPoint, currentPointL, currentPointR, joinIsOnLeftSide, false, u1);\n\n        } else if (innerSideModified && vertices) {\n\n            // Modify path first segment vertices to adjust to the segments inner and outer intersections\n\n            var lastOuter = outerPoint;\n            var lastInner = innerPoint;\n\n            if (initialJoinIsOnLeftSide !== joinIsOnLeftSide) {\n\n                lastOuter = innerPoint;\n                lastInner = outerPoint;\n\n            }\n\n            if (joinIsOnLeftSide) {\n\n                if (isMiter || initialJoinIsOnLeftSide) {\n\n                    lastInner.toArray(vertices, 0 * 3);\n                    lastInner.toArray(vertices, 3 * 3);\n\n                    if (isMiter) {\n\n                        lastOuter.toArray(vertices, 1 * 3);\n\n                    }\n\n                }\n\n            } else {\n\n                if (isMiter || !initialJoinIsOnLeftSide) {\n\n                    lastInner.toArray(vertices, 1 * 3);\n                    lastInner.toArray(vertices, 3 * 3);\n\n                    if (isMiter) {\n\n                        lastOuter.toArray(vertices, 0 * 3);\n\n                    }\n\n                }\n\n            }\n\n        }\n\n        return numVertices;\n\n        // -- End of algorithm\n\n        // -- Functions\n\n        function getNormal(p1, p2, result) {\n\n            result.subVectors(p2, p1);\n            return result.set(- result.y, result.x).normalize();\n\n        }\n\n        function addVertex(position, u, v) {\n\n            if (vertices) {\n\n                vertices[currentCoordinate] = position.x;\n                vertices[currentCoordinate + 1] = position.y;\n                vertices[currentCoordinate + 2] = 0;\n\n                if (normals) {\n\n                    normals[currentCoordinate] = 0;\n                    normals[currentCoordinate + 1] = 0;\n                    normals[currentCoordinate + 2] = 1;\n\n                }\n\n                currentCoordinate += 3;\n\n                if (uvs) {\n\n                    uvs[currentCoordinateUV] = u;\n                    uvs[currentCoordinateUV + 1] = v;\n\n                    currentCoordinateUV += 2;\n\n                }\n\n            }\n\n            numVertices += 3;\n\n        }\n\n        function makeCircularSector(center, p1, p2, u, v) {\n\n            // param p1, p2: Points in the circle arc.\n            // p1 and p2 are in clockwise direction.\n\n            tempV2_1.copy(p1).sub(center).normalize();\n            tempV2_2.copy(p2).sub(center).normalize();\n\n            var angle = Math.PI;\n            var dot = tempV2_1.dot(tempV2_2);\n            if (Math.abs(dot) < 1) angle = Math.abs(Math.acos(dot));\n\n            angle /= arcDivisions;\n\n            tempV2_3.copy(p1);\n\n            for (var i = 0, il = arcDivisions - 1; i < il; i++) {\n\n                tempV2_4.copy(tempV2_3).rotateAround(center, angle);\n\n                addVertex(tempV2_3, u, v);\n                addVertex(tempV2_4, u, v);\n                addVertex(center, u, 0.5);\n\n                tempV2_3.copy(tempV2_4);\n\n            }\n\n            addVertex(tempV2_4, u, v);\n            addVertex(p2, u, v);\n            addVertex(center, u, 0.5);\n\n        }\n\n        function makeSegmentTriangles() {\n\n            addVertex(lastPointR, u0, 1);\n            addVertex(lastPointL, u0, 0);\n            addVertex(currentPointL, u1, 0);\n\n            addVertex(lastPointR, u0, 1);\n            addVertex(currentPointL, u1, 1);\n            addVertex(currentPointR, u1, 0);\n\n        }\n\n        function makeSegmentWithBevelJoin(joinIsOnLeftSide, innerSideModified, u) {\n\n            if (innerSideModified) {\n\n                // Optimized segment + bevel triangles\n\n                if (joinIsOnLeftSide) {\n\n                    // Path segments triangles\n\n                    addVertex(lastPointR, u0, 1);\n                    addVertex(lastPointL, u0, 0);\n                    addVertex(currentPointL, u1, 0);\n\n                    addVertex(lastPointR, u0, 1);\n                    addVertex(currentPointL, u1, 0);\n                    addVertex(innerPoint, u1, 1);\n\n                    // Bevel join triangle\n\n                    addVertex(currentPointL, u, 0);\n                    addVertex(nextPointL, u, 0);\n                    addVertex(innerPoint, u, 0.5);\n\n                } else {\n\n                    // Path segments triangles\n\n                    addVertex(lastPointR, u0, 1);\n                    addVertex(lastPointL, u0, 0);\n                    addVertex(currentPointR, u1, 1);\n\n                    addVertex(lastPointL, u0, 0);\n                    addVertex(innerPoint, u1, 0);\n                    addVertex(currentPointR, u1, 1);\n\n                    // Bevel join triangle\n\n                    addVertex(currentPointR, u, 1);\n                    addVertex(nextPointR, u, 0);\n                    addVertex(innerPoint, u, 0.5);\n\n                }\n\n            } else {\n\n                // Bevel join triangle. The segment triangles are done in the main loop\n\n                if (joinIsOnLeftSide) {\n\n                    addVertex(currentPointL, u, 0);\n                    addVertex(nextPointL, u, 0);\n                    addVertex(currentPoint, u, 0.5);\n\n                } else {\n\n                    addVertex(currentPointR, u, 1);\n                    addVertex(nextPointR, u, 0);\n                    addVertex(currentPoint, u, 0.5);\n\n                }\n\n            }\n\n        }\n\n        function createSegmentTrianglesWithMiddleSection(joinIsOnLeftSide, innerSideModified) {\n\n            if (innerSideModified) {\n\n                if (joinIsOnLeftSide) {\n\n                    addVertex(lastPointR, u0, 1);\n                    addVertex(lastPointL, u0, 0);\n                    addVertex(currentPointL, u1, 0);\n\n                    addVertex(lastPointR, u0, 1);\n                    addVertex(currentPointL, u1, 0);\n                    addVertex(innerPoint, u1, 1);\n\n                    addVertex(currentPointL, u0, 0);\n                    addVertex(currentPoint, u1, 0.5);\n                    addVertex(innerPoint, u1, 1);\n\n                    addVertex(currentPoint, u1, 0.5);\n                    addVertex(nextPointL, u0, 0);\n                    addVertex(innerPoint, u1, 1);\n\n                } else {\n\n                    addVertex(lastPointR, u0, 1);\n                    addVertex(lastPointL, u0, 0);\n                    addVertex(currentPointR, u1, 1);\n\n                    addVertex(lastPointL, u0, 0);\n                    addVertex(innerPoint, u1, 0);\n                    addVertex(currentPointR, u1, 1);\n\n                    addVertex(currentPointR, u0, 1);\n                    addVertex(innerPoint, u1, 0);\n                    addVertex(currentPoint, u1, 0.5);\n\n                    addVertex(currentPoint, u1, 0.5);\n                    addVertex(innerPoint, u1, 0);\n                    addVertex(nextPointR, u0, 1);\n\n                }\n\n            }\n\n        }\n\n        function addCapGeometry(center, p1, p2, joinIsOnLeftSide, start, u) {\n\n            // param center: End point of the path\n            // param p1, p2: Left and right cap points\n\n            switch (style.strokeLineCap) {\n\n                case 'round':\n\n                    if (start) {\n\n                        makeCircularSector(center, p2, p1, u, 0.5);\n\n                    } else {\n\n                        makeCircularSector(center, p1, p2, u, 0.5);\n\n                    }\n\n                    break;\n\n                case 'square':\n\n                    if (start) {\n\n                        tempV2_1.subVectors(p1, center);\n                        tempV2_2.set(tempV2_1.y, - tempV2_1.x);\n\n                        tempV2_3.addVectors(tempV2_1, tempV2_2).add(center);\n                        tempV2_4.subVectors(tempV2_2, tempV2_1).add(center);\n\n                        // Modify already existing vertices\n                        if (joinIsOnLeftSide) {\n\n                            tempV2_3.toArray(vertices, 1 * 3);\n                            tempV2_4.toArray(vertices, 0 * 3);\n                            tempV2_4.toArray(vertices, 3 * 3);\n\n                        } else {\n\n                            tempV2_3.toArray(vertices, 1 * 3);\n                            tempV2_3.toArray(vertices, 3 * 3);\n                            tempV2_4.toArray(vertices, 0 * 3);\n\n                        }\n\n                    } else {\n\n                        tempV2_1.subVectors(p2, center);\n                        tempV2_2.set(tempV2_1.y, - tempV2_1.x);\n\n                        tempV2_3.addVectors(tempV2_1, tempV2_2).add(center);\n                        tempV2_4.subVectors(tempV2_2, tempV2_1).add(center);\n\n                        var vl = vertices.length;\n\n                        // Modify already existing vertices\n                        if (joinIsOnLeftSide) {\n\n                            tempV2_3.toArray(vertices, vl - 1 * 3);\n                            tempV2_4.toArray(vertices, vl - 2 * 3);\n                            tempV2_4.toArray(vertices, vl - 4 * 3);\n\n                        } else {\n\n                            tempV2_3.toArray(vertices, vl - 2 * 3);\n                            tempV2_4.toArray(vertices, vl - 1 * 3);\n                            tempV2_4.toArray(vertices, vl - 4 * 3);\n\n                        }\n\n                    }\n\n                    break;\n\n                case 'butt':\n                default:\n\n                    // Nothing to do here\n                    break;\n\n            }\n\n        }\n\n        function removeDuplicatedPoints(points) {\n\n            // Creates a new array if necessary with duplicated points removed.\n            // This does not remove duplicated initial and ending points of a closed path.\n\n            var dupPoints = false;\n            for (var i = 1, n = points.length - 1; i < n; i++) {\n\n                if (points[i].distanceTo(points[i + 1]) < minDistance) {\n\n                    dupPoints = true;\n                    break;\n\n                }\n\n            }\n\n            if (!dupPoints) return points;\n\n            var newPoints = [];\n            newPoints.push(points[0]);\n\n            for (var i = 1, n = points.length - 1; i < n; i++) {\n\n                if (points[i].distanceTo(points[i + 1]) >= minDistance) {\n\n                    newPoints.push(points[i]);\n\n                }\n\n            }\n\n            newPoints.push(points[points.length - 1]);\n\n            return newPoints;\n\n        }\n\n    };\n\n}();\n\nexport { SVGLoader };\n"]}]}