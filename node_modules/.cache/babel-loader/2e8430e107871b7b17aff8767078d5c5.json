{"remainingRequest":"E:\\自己的项目\\three_test\\node_modules\\babel-loader\\lib\\index.js!E:\\自己的项目\\three_test\\src\\assets\\examples\\jsm\\postprocessing\\UnrealBloomPass.js","dependencies":[{"path":"E:\\自己的项目\\three_test\\src\\assets\\examples\\jsm\\postprocessing\\UnrealBloomPass.js","mtime":1581123525000},{"path":"E:\\自己的项目\\three_test\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\自己的项目\\three_test\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CgovKioKICogQGF1dGhvciBzcGlkZXJzaGFybWEgLyBodHRwOi8vZWR1cGVyaW1lbnQuY29tLwogKi8KaW1wb3J0IHsgQWRkaXRpdmVCbGVuZGluZywgQ29sb3IsIExpbmVhckZpbHRlciwgTWVzaEJhc2ljTWF0ZXJpYWwsIFJHQkFGb3JtYXQsIFNoYWRlck1hdGVyaWFsLCBVbmlmb3Jtc1V0aWxzLCBWZWN0b3IyLCBWZWN0b3IzLCBXZWJHTFJlbmRlclRhcmdldCB9IGZyb20gIi4uLy4uLy4uL2J1aWxkL3RocmVlLm1vZHVsZS5qcyI7CmltcG9ydCB7IFBhc3MgfSBmcm9tICIuLi9wb3N0cHJvY2Vzc2luZy9QYXNzLmpzIjsKaW1wb3J0IHsgQ29weVNoYWRlciB9IGZyb20gIi4uL3NoYWRlcnMvQ29weVNoYWRlci5qcyI7CmltcG9ydCB7IEx1bWlub3NpdHlIaWdoUGFzc1NoYWRlciB9IGZyb20gIi4uL3NoYWRlcnMvTHVtaW5vc2l0eUhpZ2hQYXNzU2hhZGVyLmpzIjsKLyoqCiAqIFVucmVhbEJsb29tUGFzcyBpcyBpbnNwaXJlZCBieSB0aGUgYmxvb20gcGFzcyBvZiBVbnJlYWwgRW5naW5lLiBJdCBjcmVhdGVzIGEKICogbWlwIG1hcCBjaGFpbiBvZiBibG9vbSB0ZXh0dXJlcyBhbmQgYmx1cnMgdGhlbSB3aXRoIGRpZmZlcmVudCByYWRpaS4gQmVjYXVzZQogKiBvZiB0aGUgd2VpZ2h0ZWQgY29tYmluYXRpb24gb2YgbWlwcywgYW5kIGJlY2F1c2UgbGFyZ2VyIGJsdXJzIGFyZSBkb25lIG9uCiAqIGhpZ2hlciBtaXBzLCB0aGlzIGVmZmVjdCBwcm92aWRlcyBnb29kIHF1YWxpdHkgYW5kIHBlcmZvcm1hbmNlLgogKgogKiBSZWZlcmVuY2U6CiAqIC0gaHR0cHM6Ly9kb2NzLnVucmVhbGVuZ2luZS5jb20vbGF0ZXN0L0lOVC9FbmdpbmUvUmVuZGVyaW5nL1Bvc3RQcm9jZXNzRWZmZWN0cy9CbG9vbS8KICovCgp2YXIgVW5yZWFsQmxvb21QYXNzID0gZnVuY3Rpb24gVW5yZWFsQmxvb21QYXNzKHJlc29sdXRpb24sIHN0cmVuZ3RoLCByYWRpdXMsIHRocmVzaG9sZCkgewogIFBhc3MuY2FsbCh0aGlzKTsKICB0aGlzLnN0cmVuZ3RoID0gc3RyZW5ndGggIT09IHVuZGVmaW5lZCA/IHN0cmVuZ3RoIDogMTsKICB0aGlzLnJhZGl1cyA9IHJhZGl1czsKICB0aGlzLnRocmVzaG9sZCA9IHRocmVzaG9sZDsKICB0aGlzLnJlc29sdXRpb24gPSByZXNvbHV0aW9uICE9PSB1bmRlZmluZWQgPyBuZXcgVmVjdG9yMihyZXNvbHV0aW9uLngsIHJlc29sdXRpb24ueSkgOiBuZXcgVmVjdG9yMigyNTYsIDI1Nik7IC8vIGNyZWF0ZSBjb2xvciBvbmx5IG9uY2UgaGVyZSwgcmV1c2UgaXQgbGF0ZXIgaW5zaWRlIHRoZSByZW5kZXIgZnVuY3Rpb24KCiAgdGhpcy5jbGVhckNvbG9yID0gbmV3IENvbG9yKDAsIDAsIDApOyAvLyByZW5kZXIgdGFyZ2V0cwoKICB2YXIgcGFycyA9IHsKICAgIG1pbkZpbHRlcjogTGluZWFyRmlsdGVyLAogICAgbWFnRmlsdGVyOiBMaW5lYXJGaWx0ZXIsCiAgICBmb3JtYXQ6IFJHQkFGb3JtYXQKICB9OwogIHRoaXMucmVuZGVyVGFyZ2V0c0hvcml6b250YWwgPSBbXTsKICB0aGlzLnJlbmRlclRhcmdldHNWZXJ0aWNhbCA9IFtdOwogIHRoaXMubk1pcHMgPSA1OwogIHZhciByZXN4ID0gTWF0aC5yb3VuZCh0aGlzLnJlc29sdXRpb24ueCAvIDIpOwogIHZhciByZXN5ID0gTWF0aC5yb3VuZCh0aGlzLnJlc29sdXRpb24ueSAvIDIpOwogIHRoaXMucmVuZGVyVGFyZ2V0QnJpZ2h0ID0gbmV3IFdlYkdMUmVuZGVyVGFyZ2V0KHJlc3gsIHJlc3ksIHBhcnMpOwogIHRoaXMucmVuZGVyVGFyZ2V0QnJpZ2h0LnRleHR1cmUubmFtZSA9ICJVbnJlYWxCbG9vbVBhc3MuYnJpZ2h0IjsKICB0aGlzLnJlbmRlclRhcmdldEJyaWdodC50ZXh0dXJlLmdlbmVyYXRlTWlwbWFwcyA9IGZhbHNlOwoKICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubk1pcHM7IGkrKykgewogICAgdmFyIHJlbmRlclRhcmdldEhvcml6b25hbCA9IG5ldyBXZWJHTFJlbmRlclRhcmdldChyZXN4LCByZXN5LCBwYXJzKTsKICAgIHJlbmRlclRhcmdldEhvcml6b25hbC50ZXh0dXJlLm5hbWUgPSAiVW5yZWFsQmxvb21QYXNzLmgiICsgaTsKICAgIHJlbmRlclRhcmdldEhvcml6b25hbC50ZXh0dXJlLmdlbmVyYXRlTWlwbWFwcyA9IGZhbHNlOwogICAgdGhpcy5yZW5kZXJUYXJnZXRzSG9yaXpvbnRhbC5wdXNoKHJlbmRlclRhcmdldEhvcml6b25hbCk7CiAgICB2YXIgcmVuZGVyVGFyZ2V0VmVydGljYWwgPSBuZXcgV2ViR0xSZW5kZXJUYXJnZXQocmVzeCwgcmVzeSwgcGFycyk7CiAgICByZW5kZXJUYXJnZXRWZXJ0aWNhbC50ZXh0dXJlLm5hbWUgPSAiVW5yZWFsQmxvb21QYXNzLnYiICsgaTsKICAgIHJlbmRlclRhcmdldFZlcnRpY2FsLnRleHR1cmUuZ2VuZXJhdGVNaXBtYXBzID0gZmFsc2U7CiAgICB0aGlzLnJlbmRlclRhcmdldHNWZXJ0aWNhbC5wdXNoKHJlbmRlclRhcmdldFZlcnRpY2FsKTsKICAgIHJlc3ggPSBNYXRoLnJvdW5kKHJlc3ggLyAyKTsKICAgIHJlc3kgPSBNYXRoLnJvdW5kKHJlc3kgLyAyKTsKICB9IC8vIGx1bWlub3NpdHkgaGlnaCBwYXNzIG1hdGVyaWFsCgoKICBpZiAoTHVtaW5vc2l0eUhpZ2hQYXNzU2hhZGVyID09PSB1bmRlZmluZWQpIGNvbnNvbGUuZXJyb3IoIlVucmVhbEJsb29tUGFzcyByZWxpZXMgb24gTHVtaW5vc2l0eUhpZ2hQYXNzU2hhZGVyIik7CiAgdmFyIGhpZ2hQYXNzU2hhZGVyID0gTHVtaW5vc2l0eUhpZ2hQYXNzU2hhZGVyOwogIHRoaXMuaGlnaFBhc3NVbmlmb3JtcyA9IFVuaWZvcm1zVXRpbHMuY2xvbmUoaGlnaFBhc3NTaGFkZXIudW5pZm9ybXMpOwogIHRoaXMuaGlnaFBhc3NVbmlmb3Jtc1sibHVtaW5vc2l0eVRocmVzaG9sZCJdLnZhbHVlID0gdGhyZXNob2xkOwogIHRoaXMuaGlnaFBhc3NVbmlmb3Jtc1sic21vb3RoV2lkdGgiXS52YWx1ZSA9IDAuMDE7CiAgdGhpcy5tYXRlcmlhbEhpZ2hQYXNzRmlsdGVyID0gbmV3IFNoYWRlck1hdGVyaWFsKHsKICAgIHVuaWZvcm1zOiB0aGlzLmhpZ2hQYXNzVW5pZm9ybXMsCiAgICB2ZXJ0ZXhTaGFkZXI6IGhpZ2hQYXNzU2hhZGVyLnZlcnRleFNoYWRlciwKICAgIGZyYWdtZW50U2hhZGVyOiBoaWdoUGFzc1NoYWRlci5mcmFnbWVudFNoYWRlciwKICAgIGRlZmluZXM6IHt9CiAgfSk7IC8vIEdhdXNzaWFuIEJsdXIgTWF0ZXJpYWxzCgogIHRoaXMuc2VwYXJhYmxlQmx1ck1hdGVyaWFscyA9IFtdOwogIHZhciBrZXJuZWxTaXplQXJyYXkgPSBbMywgNSwgNywgOSwgMTFdOwogIHZhciByZXN4ID0gTWF0aC5yb3VuZCh0aGlzLnJlc29sdXRpb24ueCAvIDIpOwogIHZhciByZXN5ID0gTWF0aC5yb3VuZCh0aGlzLnJlc29sdXRpb24ueSAvIDIpOwoKICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubk1pcHM7IGkrKykgewogICAgdGhpcy5zZXBhcmFibGVCbHVyTWF0ZXJpYWxzLnB1c2godGhpcy5nZXRTZXBlcmFibGVCbHVyTWF0ZXJpYWwoa2VybmVsU2l6ZUFycmF5W2ldKSk7CiAgICB0aGlzLnNlcGFyYWJsZUJsdXJNYXRlcmlhbHNbaV0udW5pZm9ybXNbInRleFNpemUiXS52YWx1ZSA9IG5ldyBWZWN0b3IyKHJlc3gsIHJlc3kpOwogICAgcmVzeCA9IE1hdGgucm91bmQocmVzeCAvIDIpOwogICAgcmVzeSA9IE1hdGgucm91bmQocmVzeSAvIDIpOwogIH0gLy8gQ29tcG9zaXRlIG1hdGVyaWFsCgoKICB0aGlzLmNvbXBvc2l0ZU1hdGVyaWFsID0gdGhpcy5nZXRDb21wb3NpdGVNYXRlcmlhbCh0aGlzLm5NaXBzKTsKICB0aGlzLmNvbXBvc2l0ZU1hdGVyaWFsLnVuaWZvcm1zWyJibHVyVGV4dHVyZTEiXS52YWx1ZSA9IHRoaXMucmVuZGVyVGFyZ2V0c1ZlcnRpY2FsWzBdLnRleHR1cmU7CiAgdGhpcy5jb21wb3NpdGVNYXRlcmlhbC51bmlmb3Jtc1siYmx1clRleHR1cmUyIl0udmFsdWUgPSB0aGlzLnJlbmRlclRhcmdldHNWZXJ0aWNhbFsxXS50ZXh0dXJlOwogIHRoaXMuY29tcG9zaXRlTWF0ZXJpYWwudW5pZm9ybXNbImJsdXJUZXh0dXJlMyJdLnZhbHVlID0gdGhpcy5yZW5kZXJUYXJnZXRzVmVydGljYWxbMl0udGV4dHVyZTsKICB0aGlzLmNvbXBvc2l0ZU1hdGVyaWFsLnVuaWZvcm1zWyJibHVyVGV4dHVyZTQiXS52YWx1ZSA9IHRoaXMucmVuZGVyVGFyZ2V0c1ZlcnRpY2FsWzNdLnRleHR1cmU7CiAgdGhpcy5jb21wb3NpdGVNYXRlcmlhbC51bmlmb3Jtc1siYmx1clRleHR1cmU1Il0udmFsdWUgPSB0aGlzLnJlbmRlclRhcmdldHNWZXJ0aWNhbFs0XS50ZXh0dXJlOwogIHRoaXMuY29tcG9zaXRlTWF0ZXJpYWwudW5pZm9ybXNbImJsb29tU3RyZW5ndGgiXS52YWx1ZSA9IHN0cmVuZ3RoOwogIHRoaXMuY29tcG9zaXRlTWF0ZXJpYWwudW5pZm9ybXNbImJsb29tUmFkaXVzIl0udmFsdWUgPSAwLjE7CiAgdGhpcy5jb21wb3NpdGVNYXRlcmlhbC5uZWVkc1VwZGF0ZSA9IHRydWU7CiAgdmFyIGJsb29tRmFjdG9ycyA9IFsxLjAsIDAuOCwgMC42LCAwLjQsIDAuMl07CiAgdGhpcy5jb21wb3NpdGVNYXRlcmlhbC51bmlmb3Jtc1siYmxvb21GYWN0b3JzIl0udmFsdWUgPSBibG9vbUZhY3RvcnM7CiAgdGhpcy5ibG9vbVRpbnRDb2xvcnMgPSBbbmV3IFZlY3RvcjMoMSwgMSwgMSksIG5ldyBWZWN0b3IzKDEsIDEsIDEpLCBuZXcgVmVjdG9yMygxLCAxLCAxKSwgbmV3IFZlY3RvcjMoMSwgMSwgMSksIG5ldyBWZWN0b3IzKDEsIDEsIDEpXTsKICB0aGlzLmNvbXBvc2l0ZU1hdGVyaWFsLnVuaWZvcm1zWyJibG9vbVRpbnRDb2xvcnMiXS52YWx1ZSA9IHRoaXMuYmxvb21UaW50Q29sb3JzOyAvLyBjb3B5IG1hdGVyaWFsCgogIGlmIChDb3B5U2hhZGVyID09PSB1bmRlZmluZWQpIHsKICAgIGNvbnNvbGUuZXJyb3IoIlVucmVhbEJsb29tUGFzcyByZWxpZXMgb24gQ29weVNoYWRlciIpOwogIH0KCiAgdmFyIGNvcHlTaGFkZXIgPSBDb3B5U2hhZGVyOwogIHRoaXMuY29weVVuaWZvcm1zID0gVW5pZm9ybXNVdGlscy5jbG9uZShjb3B5U2hhZGVyLnVuaWZvcm1zKTsKICB0aGlzLmNvcHlVbmlmb3Jtc1sib3BhY2l0eSJdLnZhbHVlID0gMS4wOwogIHRoaXMubWF0ZXJpYWxDb3B5ID0gbmV3IFNoYWRlck1hdGVyaWFsKHsKICAgIHVuaWZvcm1zOiB0aGlzLmNvcHlVbmlmb3JtcywKICAgIHZlcnRleFNoYWRlcjogY29weVNoYWRlci52ZXJ0ZXhTaGFkZXIsCiAgICBmcmFnbWVudFNoYWRlcjogY29weVNoYWRlci5mcmFnbWVudFNoYWRlciwKICAgIGJsZW5kaW5nOiBBZGRpdGl2ZUJsZW5kaW5nLAogICAgZGVwdGhUZXN0OiBmYWxzZSwKICAgIGRlcHRoV3JpdGU6IGZhbHNlLAogICAgdHJhbnNwYXJlbnQ6IHRydWUKICB9KTsKICB0aGlzLmVuYWJsZWQgPSB0cnVlOwogIHRoaXMubmVlZHNTd2FwID0gZmFsc2U7CiAgdGhpcy5vbGRDbGVhckNvbG9yID0gbmV3IENvbG9yKCk7CiAgdGhpcy5vbGRDbGVhckFscGhhID0gMTsKICB0aGlzLmJhc2ljID0gbmV3IE1lc2hCYXNpY01hdGVyaWFsKCk7CiAgdGhpcy5mc1F1YWQgPSBuZXcgUGFzcy5GdWxsU2NyZWVuUXVhZChudWxsKTsKfTsKClVucmVhbEJsb29tUGFzcy5wcm90b3R5cGUgPSBPYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoUGFzcy5wcm90b3R5cGUpLCB7CiAgY29uc3RydWN0b3I6IFVucmVhbEJsb29tUGFzcywKICBkaXNwb3NlOiBmdW5jdGlvbiBkaXNwb3NlKCkgewogICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnJlbmRlclRhcmdldHNIb3Jpem9udGFsLmxlbmd0aDsgaSsrKSB7CiAgICAgIHRoaXMucmVuZGVyVGFyZ2V0c0hvcml6b250YWxbaV0uZGlzcG9zZSgpOwogICAgfQoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5yZW5kZXJUYXJnZXRzVmVydGljYWwubGVuZ3RoOyBpKyspIHsKICAgICAgdGhpcy5yZW5kZXJUYXJnZXRzVmVydGljYWxbaV0uZGlzcG9zZSgpOwogICAgfQoKICAgIHRoaXMucmVuZGVyVGFyZ2V0QnJpZ2h0LmRpc3Bvc2UoKTsKICB9LAogIHNldFNpemU6IGZ1bmN0aW9uIHNldFNpemUod2lkdGgsIGhlaWdodCkgewogICAgdmFyIHJlc3ggPSBNYXRoLnJvdW5kKHdpZHRoIC8gMik7CiAgICB2YXIgcmVzeSA9IE1hdGgucm91bmQoaGVpZ2h0IC8gMik7CiAgICB0aGlzLnJlbmRlclRhcmdldEJyaWdodC5zZXRTaXplKHJlc3gsIHJlc3kpOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5uTWlwczsgaSsrKSB7CiAgICAgIHRoaXMucmVuZGVyVGFyZ2V0c0hvcml6b250YWxbaV0uc2V0U2l6ZShyZXN4LCByZXN5KTsKICAgICAgdGhpcy5yZW5kZXJUYXJnZXRzVmVydGljYWxbaV0uc2V0U2l6ZShyZXN4LCByZXN5KTsKICAgICAgdGhpcy5zZXBhcmFibGVCbHVyTWF0ZXJpYWxzW2ldLnVuaWZvcm1zWyJ0ZXhTaXplIl0udmFsdWUgPSBuZXcgVmVjdG9yMihyZXN4LCByZXN5KTsKICAgICAgcmVzeCA9IE1hdGgucm91bmQocmVzeCAvIDIpOwogICAgICByZXN5ID0gTWF0aC5yb3VuZChyZXN5IC8gMik7CiAgICB9CiAgfSwKICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihyZW5kZXJlciwgd3JpdGVCdWZmZXIsIHJlYWRCdWZmZXIsIGRlbHRhVGltZSwgbWFza0FjdGl2ZSkgewogICAgdGhpcy5vbGRDbGVhckNvbG9yLmNvcHkocmVuZGVyZXIuZ2V0Q2xlYXJDb2xvcigpKTsKICAgIHRoaXMub2xkQ2xlYXJBbHBoYSA9IHJlbmRlcmVyLmdldENsZWFyQWxwaGEoKTsKICAgIHZhciBvbGRBdXRvQ2xlYXIgPSByZW5kZXJlci5hdXRvQ2xlYXI7CiAgICByZW5kZXJlci5hdXRvQ2xlYXIgPSBmYWxzZTsKICAgIHJlbmRlcmVyLnNldENsZWFyQ29sb3IodGhpcy5jbGVhckNvbG9yLCAwKTsKICAgIGlmIChtYXNrQWN0aXZlKSByZW5kZXJlci5zdGF0ZS5idWZmZXJzLnN0ZW5jaWwuc2V0VGVzdChmYWxzZSk7IC8vIFJlbmRlciBpbnB1dCB0byBzY3JlZW4KCiAgICBpZiAodGhpcy5yZW5kZXJUb1NjcmVlbikgewogICAgICB0aGlzLmZzUXVhZC5tYXRlcmlhbCA9IHRoaXMuYmFzaWM7CiAgICAgIHRoaXMuYmFzaWMubWFwID0gcmVhZEJ1ZmZlci50ZXh0dXJlOwogICAgICByZW5kZXJlci5zZXRSZW5kZXJUYXJnZXQobnVsbCk7CiAgICAgIHJlbmRlcmVyLmNsZWFyKCk7CiAgICAgIHRoaXMuZnNRdWFkLnJlbmRlcihyZW5kZXJlcik7CiAgICB9IC8vIDEuIEV4dHJhY3QgQnJpZ2h0IEFyZWFzCgoKICAgIHRoaXMuaGlnaFBhc3NVbmlmb3Jtc1sidERpZmZ1c2UiXS52YWx1ZSA9IHJlYWRCdWZmZXIudGV4dHVyZTsKICAgIHRoaXMuaGlnaFBhc3NVbmlmb3Jtc1sibHVtaW5vc2l0eVRocmVzaG9sZCJdLnZhbHVlID0gdGhpcy50aHJlc2hvbGQ7CiAgICB0aGlzLmZzUXVhZC5tYXRlcmlhbCA9IHRoaXMubWF0ZXJpYWxIaWdoUGFzc0ZpbHRlcjsKICAgIHJlbmRlcmVyLnNldFJlbmRlclRhcmdldCh0aGlzLnJlbmRlclRhcmdldEJyaWdodCk7CiAgICByZW5kZXJlci5jbGVhcigpOwogICAgdGhpcy5mc1F1YWQucmVuZGVyKHJlbmRlcmVyKTsgLy8gMi4gQmx1ciBBbGwgdGhlIG1pcHMgcHJvZ3Jlc3NpdmVseQoKICAgIHZhciBpbnB1dFJlbmRlclRhcmdldCA9IHRoaXMucmVuZGVyVGFyZ2V0QnJpZ2h0OwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5uTWlwczsgaSsrKSB7CiAgICAgIHRoaXMuZnNRdWFkLm1hdGVyaWFsID0gdGhpcy5zZXBhcmFibGVCbHVyTWF0ZXJpYWxzW2ldOwogICAgICB0aGlzLnNlcGFyYWJsZUJsdXJNYXRlcmlhbHNbaV0udW5pZm9ybXNbImNvbG9yVGV4dHVyZSJdLnZhbHVlID0gaW5wdXRSZW5kZXJUYXJnZXQudGV4dHVyZTsKICAgICAgdGhpcy5zZXBhcmFibGVCbHVyTWF0ZXJpYWxzW2ldLnVuaWZvcm1zWyJkaXJlY3Rpb24iXS52YWx1ZSA9IFVucmVhbEJsb29tUGFzcy5CbHVyRGlyZWN0aW9uWDsKICAgICAgcmVuZGVyZXIuc2V0UmVuZGVyVGFyZ2V0KHRoaXMucmVuZGVyVGFyZ2V0c0hvcml6b250YWxbaV0pOwogICAgICByZW5kZXJlci5jbGVhcigpOwogICAgICB0aGlzLmZzUXVhZC5yZW5kZXIocmVuZGVyZXIpOwogICAgICB0aGlzLnNlcGFyYWJsZUJsdXJNYXRlcmlhbHNbaV0udW5pZm9ybXNbImNvbG9yVGV4dHVyZSJdLnZhbHVlID0gdGhpcy5yZW5kZXJUYXJnZXRzSG9yaXpvbnRhbFtpXS50ZXh0dXJlOwogICAgICB0aGlzLnNlcGFyYWJsZUJsdXJNYXRlcmlhbHNbaV0udW5pZm9ybXNbImRpcmVjdGlvbiJdLnZhbHVlID0gVW5yZWFsQmxvb21QYXNzLkJsdXJEaXJlY3Rpb25ZOwogICAgICByZW5kZXJlci5zZXRSZW5kZXJUYXJnZXQodGhpcy5yZW5kZXJUYXJnZXRzVmVydGljYWxbaV0pOwogICAgICByZW5kZXJlci5jbGVhcigpOwogICAgICB0aGlzLmZzUXVhZC5yZW5kZXIocmVuZGVyZXIpOwogICAgICBpbnB1dFJlbmRlclRhcmdldCA9IHRoaXMucmVuZGVyVGFyZ2V0c1ZlcnRpY2FsW2ldOwogICAgfSAvLyBDb21wb3NpdGUgQWxsIHRoZSBtaXBzCgoKICAgIHRoaXMuZnNRdWFkLm1hdGVyaWFsID0gdGhpcy5jb21wb3NpdGVNYXRlcmlhbDsKICAgIHRoaXMuY29tcG9zaXRlTWF0ZXJpYWwudW5pZm9ybXNbImJsb29tU3RyZW5ndGgiXS52YWx1ZSA9IHRoaXMuc3RyZW5ndGg7CiAgICB0aGlzLmNvbXBvc2l0ZU1hdGVyaWFsLnVuaWZvcm1zWyJibG9vbVJhZGl1cyJdLnZhbHVlID0gdGhpcy5yYWRpdXM7CiAgICB0aGlzLmNvbXBvc2l0ZU1hdGVyaWFsLnVuaWZvcm1zWyJibG9vbVRpbnRDb2xvcnMiXS52YWx1ZSA9IHRoaXMuYmxvb21UaW50Q29sb3JzOwogICAgcmVuZGVyZXIuc2V0UmVuZGVyVGFyZ2V0KHRoaXMucmVuZGVyVGFyZ2V0c0hvcml6b250YWxbMF0pOwogICAgcmVuZGVyZXIuY2xlYXIoKTsKICAgIHRoaXMuZnNRdWFkLnJlbmRlcihyZW5kZXJlcik7IC8vIEJsZW5kIGl0IGFkZGl0aXZlbHkgb3ZlciB0aGUgaW5wdXQgdGV4dHVyZQoKICAgIHRoaXMuZnNRdWFkLm1hdGVyaWFsID0gdGhpcy5tYXRlcmlhbENvcHk7CiAgICB0aGlzLmNvcHlVbmlmb3Jtc1sidERpZmZ1c2UiXS52YWx1ZSA9IHRoaXMucmVuZGVyVGFyZ2V0c0hvcml6b250YWxbMF0udGV4dHVyZTsKICAgIGlmIChtYXNrQWN0aXZlKSByZW5kZXJlci5zdGF0ZS5idWZmZXJzLnN0ZW5jaWwuc2V0VGVzdCh0cnVlKTsKCiAgICBpZiAodGhpcy5yZW5kZXJUb1NjcmVlbikgewogICAgICByZW5kZXJlci5zZXRSZW5kZXJUYXJnZXQobnVsbCk7CiAgICAgIHRoaXMuZnNRdWFkLnJlbmRlcihyZW5kZXJlcik7CiAgICB9IGVsc2UgewogICAgICByZW5kZXJlci5zZXRSZW5kZXJUYXJnZXQocmVhZEJ1ZmZlcik7CiAgICAgIHRoaXMuZnNRdWFkLnJlbmRlcihyZW5kZXJlcik7CiAgICB9IC8vIFJlc3RvcmUgcmVuZGVyZXIgc2V0dGluZ3MKCgogICAgcmVuZGVyZXIuc2V0Q2xlYXJDb2xvcih0aGlzLm9sZENsZWFyQ29sb3IsIHRoaXMub2xkQ2xlYXJBbHBoYSk7CiAgICByZW5kZXJlci5hdXRvQ2xlYXIgPSBvbGRBdXRvQ2xlYXI7CiAgfSwKICBnZXRTZXBlcmFibGVCbHVyTWF0ZXJpYWw6IGZ1bmN0aW9uIGdldFNlcGVyYWJsZUJsdXJNYXRlcmlhbChrZXJuZWxSYWRpdXMpIHsKICAgIHJldHVybiBuZXcgU2hhZGVyTWF0ZXJpYWwoewogICAgICBkZWZpbmVzOiB7CiAgICAgICAgIktFUk5FTF9SQURJVVMiOiBrZXJuZWxSYWRpdXMsCiAgICAgICAgIlNJR01BIjoga2VybmVsUmFkaXVzCiAgICAgIH0sCiAgICAgIHVuaWZvcm1zOiB7CiAgICAgICAgImNvbG9yVGV4dHVyZSI6IHsKICAgICAgICAgIHZhbHVlOiBudWxsCiAgICAgICAgfSwKICAgICAgICAidGV4U2l6ZSI6IHsKICAgICAgICAgIHZhbHVlOiBuZXcgVmVjdG9yMigwLjUsIDAuNSkKICAgICAgICB9LAogICAgICAgICJkaXJlY3Rpb24iOiB7CiAgICAgICAgICB2YWx1ZTogbmV3IFZlY3RvcjIoMC41LCAwLjUpCiAgICAgICAgfQogICAgICB9LAogICAgICB2ZXJ0ZXhTaGFkZXI6ICJ2YXJ5aW5nIHZlYzIgdlV2O1xuXAoJCQkJdm9pZCBtYWluKCkge1xuXAoJCQkJCXZVdiA9IHV2O1xuXAoJCQkJCWdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIG1vZGVsVmlld01hdHJpeCAqIHZlYzQoIHBvc2l0aW9uLCAxLjAgKTtcblwKCQkJCX0iLAogICAgICBmcmFnbWVudFNoYWRlcjogIiNpbmNsdWRlIDxjb21tb24+XAoJCQkJdmFyeWluZyB2ZWMyIHZVdjtcblwKCQkJCXVuaWZvcm0gc2FtcGxlcjJEIGNvbG9yVGV4dHVyZTtcblwKCQkJCXVuaWZvcm0gdmVjMiB0ZXhTaXplO1wKCQkJCXVuaWZvcm0gdmVjMiBkaXJlY3Rpb247XAoJCQkJXAoJCQkJZmxvYXQgZ2F1c3NpYW5QZGYoaW4gZmxvYXQgeCwgaW4gZmxvYXQgc2lnbWEpIHtcCgkJCQkJcmV0dXJuIDAuMzk4OTQgKiBleHAoIC0wLjUgKiB4ICogeC8oIHNpZ21hICogc2lnbWEpKS9zaWdtYTtcCgkJCQl9XAoJCQkJdm9pZCBtYWluKCkge1xuXAoJCQkJCXZlYzIgaW52U2l6ZSA9IDEuMCAvIHRleFNpemU7XAoJCQkJCWZsb2F0IGZTaWdtYSA9IGZsb2F0KFNJR01BKTtcCgkJCQkJZmxvYXQgd2VpZ2h0U3VtID0gZ2F1c3NpYW5QZGYoMC4wLCBmU2lnbWEpO1wKCQkJCQl2ZWMzIGRpZmZ1c2VTdW0gPSB0ZXh0dXJlMkQoIGNvbG9yVGV4dHVyZSwgdlV2KS5yZ2IgKiB3ZWlnaHRTdW07XAoJCQkJCWZvciggaW50IGkgPSAxOyBpIDwgS0VSTkVMX1JBRElVUzsgaSArKyApIHtcCgkJCQkJCWZsb2F0IHggPSBmbG9hdChpKTtcCgkJCQkJCWZsb2F0IHcgPSBnYXVzc2lhblBkZih4LCBmU2lnbWEpO1wKCQkJCQkJdmVjMiB1dk9mZnNldCA9IGRpcmVjdGlvbiAqIGludlNpemUgKiB4O1wKCQkJCQkJdmVjMyBzYW1wbGUxID0gdGV4dHVyZTJEKCBjb2xvclRleHR1cmUsIHZVdiArIHV2T2Zmc2V0KS5yZ2I7XAoJCQkJCQl2ZWMzIHNhbXBsZTIgPSB0ZXh0dXJlMkQoIGNvbG9yVGV4dHVyZSwgdlV2IC0gdXZPZmZzZXQpLnJnYjtcCgkJCQkJCWRpZmZ1c2VTdW0gKz0gKHNhbXBsZTEgKyBzYW1wbGUyKSAqIHc7XAoJCQkJCQl3ZWlnaHRTdW0gKz0gMi4wICogdztcCgkJCQkJfVwKCQkJCQlnbF9GcmFnQ29sb3IgPSB2ZWM0KGRpZmZ1c2VTdW0vd2VpZ2h0U3VtLCAxLjApO1xuXAoJCQkJfSIKICAgIH0pOwogIH0sCiAgZ2V0Q29tcG9zaXRlTWF0ZXJpYWw6IGZ1bmN0aW9uIGdldENvbXBvc2l0ZU1hdGVyaWFsKG5NaXBzKSB7CiAgICByZXR1cm4gbmV3IFNoYWRlck1hdGVyaWFsKHsKICAgICAgZGVmaW5lczogewogICAgICAgICJOVU1fTUlQUyI6IG5NaXBzCiAgICAgIH0sCiAgICAgIHVuaWZvcm1zOiB7CiAgICAgICAgImJsdXJUZXh0dXJlMSI6IHsKICAgICAgICAgIHZhbHVlOiBudWxsCiAgICAgICAgfSwKICAgICAgICAiYmx1clRleHR1cmUyIjogewogICAgICAgICAgdmFsdWU6IG51bGwKICAgICAgICB9LAogICAgICAgICJibHVyVGV4dHVyZTMiOiB7CiAgICAgICAgICB2YWx1ZTogbnVsbAogICAgICAgIH0sCiAgICAgICAgImJsdXJUZXh0dXJlNCI6IHsKICAgICAgICAgIHZhbHVlOiBudWxsCiAgICAgICAgfSwKICAgICAgICAiYmx1clRleHR1cmU1IjogewogICAgICAgICAgdmFsdWU6IG51bGwKICAgICAgICB9LAogICAgICAgICJkaXJ0VGV4dHVyZSI6IHsKICAgICAgICAgIHZhbHVlOiBudWxsCiAgICAgICAgfSwKICAgICAgICAiYmxvb21TdHJlbmd0aCI6IHsKICAgICAgICAgIHZhbHVlOiAxLjAKICAgICAgICB9LAogICAgICAgICJibG9vbUZhY3RvcnMiOiB7CiAgICAgICAgICB2YWx1ZTogbnVsbAogICAgICAgIH0sCiAgICAgICAgImJsb29tVGludENvbG9ycyI6IHsKICAgICAgICAgIHZhbHVlOiBudWxsCiAgICAgICAgfSwKICAgICAgICAiYmxvb21SYWRpdXMiOiB7CiAgICAgICAgICB2YWx1ZTogMC4wCiAgICAgICAgfQogICAgICB9LAogICAgICB2ZXJ0ZXhTaGFkZXI6ICJ2YXJ5aW5nIHZlYzIgdlV2O1xuXAoJCQkJdm9pZCBtYWluKCkge1xuXAoJCQkJCXZVdiA9IHV2O1xuXAoJCQkJCWdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIG1vZGVsVmlld01hdHJpeCAqIHZlYzQoIHBvc2l0aW9uLCAxLjAgKTtcblwKCQkJCX0iLAogICAgICBmcmFnbWVudFNoYWRlcjogInZhcnlpbmcgdmVjMiB2VXY7XAoJCQkJdW5pZm9ybSBzYW1wbGVyMkQgYmx1clRleHR1cmUxO1wKCQkJCXVuaWZvcm0gc2FtcGxlcjJEIGJsdXJUZXh0dXJlMjtcCgkJCQl1bmlmb3JtIHNhbXBsZXIyRCBibHVyVGV4dHVyZTM7XAoJCQkJdW5pZm9ybSBzYW1wbGVyMkQgYmx1clRleHR1cmU0O1wKCQkJCXVuaWZvcm0gc2FtcGxlcjJEIGJsdXJUZXh0dXJlNTtcCgkJCQl1bmlmb3JtIHNhbXBsZXIyRCBkaXJ0VGV4dHVyZTtcCgkJCQl1bmlmb3JtIGZsb2F0IGJsb29tU3RyZW5ndGg7XAoJCQkJdW5pZm9ybSBmbG9hdCBibG9vbVJhZGl1cztcCgkJCQl1bmlmb3JtIGZsb2F0IGJsb29tRmFjdG9yc1tOVU1fTUlQU107XAoJCQkJdW5pZm9ybSB2ZWMzIGJsb29tVGludENvbG9yc1tOVU1fTUlQU107XAoJCQkJXAoJCQkJZmxvYXQgbGVycEJsb29tRmFjdG9yKGNvbnN0IGluIGZsb2F0IGZhY3RvcikgeyBcCgkJCQkJZmxvYXQgbWlycm9yRmFjdG9yID0gMS4yIC0gZmFjdG9yO1wKCQkJCQlyZXR1cm4gbWl4KGZhY3RvciwgbWlycm9yRmFjdG9yLCBibG9vbVJhZGl1cyk7XAoJCQkJfVwKCQkJCVwKCQkJCXZvaWQgbWFpbigpIHtcCgkJCQkJZ2xfRnJhZ0NvbG9yID0gYmxvb21TdHJlbmd0aCAqICggbGVycEJsb29tRmFjdG9yKGJsb29tRmFjdG9yc1swXSkgKiB2ZWM0KGJsb29tVGludENvbG9yc1swXSwgMS4wKSAqIHRleHR1cmUyRChibHVyVGV4dHVyZTEsIHZVdikgKyBcCgkJCQkJCQkJCQkJCQkgbGVycEJsb29tRmFjdG9yKGJsb29tRmFjdG9yc1sxXSkgKiB2ZWM0KGJsb29tVGludENvbG9yc1sxXSwgMS4wKSAqIHRleHR1cmUyRChibHVyVGV4dHVyZTIsIHZVdikgKyBcCgkJCQkJCQkJCQkJCQkgbGVycEJsb29tRmFjdG9yKGJsb29tRmFjdG9yc1syXSkgKiB2ZWM0KGJsb29tVGludENvbG9yc1syXSwgMS4wKSAqIHRleHR1cmUyRChibHVyVGV4dHVyZTMsIHZVdikgKyBcCgkJCQkJCQkJCQkJCQkgbGVycEJsb29tRmFjdG9yKGJsb29tRmFjdG9yc1szXSkgKiB2ZWM0KGJsb29tVGludENvbG9yc1szXSwgMS4wKSAqIHRleHR1cmUyRChibHVyVGV4dHVyZTQsIHZVdikgKyBcCgkJCQkJCQkJCQkJCQkgbGVycEJsb29tRmFjdG9yKGJsb29tRmFjdG9yc1s0XSkgKiB2ZWM0KGJsb29tVGludENvbG9yc1s0XSwgMS4wKSAqIHRleHR1cmUyRChibHVyVGV4dHVyZTUsIHZVdikgKTtcCgkJCQl9IgogICAgfSk7CiAgfQp9KTsKVW5yZWFsQmxvb21QYXNzLkJsdXJEaXJlY3Rpb25YID0gbmV3IFZlY3RvcjIoMS4wLCAwLjApOwpVbnJlYWxCbG9vbVBhc3MuQmx1ckRpcmVjdGlvblkgPSBuZXcgVmVjdG9yMigwLjAsIDEuMCk7CmV4cG9ydCB7IFVucmVhbEJsb29tUGFzcyB9Ow=="},{"version":3,"sources":["E:/自己的项目/three_test/src/assets/examples/jsm/postprocessing/UnrealBloomPass.js"],"names":["AdditiveBlending","Color","LinearFilter","MeshBasicMaterial","RGBAFormat","ShaderMaterial","UniformsUtils","Vector2","Vector3","WebGLRenderTarget","Pass","CopyShader","LuminosityHighPassShader","UnrealBloomPass","resolution","strength","radius","threshold","call","undefined","x","y","clearColor","pars","minFilter","magFilter","format","renderTargetsHorizontal","renderTargetsVertical","nMips","resx","Math","round","resy","renderTargetBright","texture","name","generateMipmaps","i","renderTargetHorizonal","push","renderTargetVertical","console","error","highPassShader","highPassUniforms","clone","uniforms","value","materialHighPassFilter","vertexShader","fragmentShader","defines","separableBlurMaterials","kernelSizeArray","getSeperableBlurMaterial","compositeMaterial","getCompositeMaterial","needsUpdate","bloomFactors","bloomTintColors","copyShader","copyUniforms","materialCopy","blending","depthTest","depthWrite","transparent","enabled","needsSwap","oldClearColor","oldClearAlpha","basic","fsQuad","FullScreenQuad","prototype","Object","assign","create","constructor","dispose","length","setSize","width","height","render","renderer","writeBuffer","readBuffer","deltaTime","maskActive","copy","getClearColor","getClearAlpha","oldAutoClear","autoClear","setClearColor","state","buffers","stencil","setTest","renderToScreen","material","map","setRenderTarget","clear","inputRenderTarget","BlurDirectionX","BlurDirectionY","kernelRadius"],"mappings":"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","sourcesContent":["/**\n * @author spidersharma / http://eduperiment.com/\n */\n\nimport {\n\tAdditiveBlending,\n\tColor,\n\tLinearFilter,\n\tMeshBasicMaterial,\n\tRGBAFormat,\n\tShaderMaterial,\n\tUniformsUtils,\n\tVector2,\n\tVector3,\n\tWebGLRenderTarget\n} from \"../../../build/three.module.js\";\nimport { Pass } from \"../postprocessing/Pass.js\";\nimport { CopyShader } from \"../shaders/CopyShader.js\";\nimport { LuminosityHighPassShader } from \"../shaders/LuminosityHighPassShader.js\";\n\n/**\n * UnrealBloomPass is inspired by the bloom pass of Unreal Engine. It creates a\n * mip map chain of bloom textures and blurs them with different radii. Because\n * of the weighted combination of mips, and because larger blurs are done on\n * higher mips, this effect provides good quality and performance.\n *\n * Reference:\n * - https://docs.unrealengine.com/latest/INT/Engine/Rendering/PostProcessEffects/Bloom/\n */\nvar UnrealBloomPass = function ( resolution, strength, radius, threshold ) {\n\n\tPass.call( this );\n\n\tthis.strength = ( strength !== undefined ) ? strength : 1;\n\tthis.radius = radius;\n\tthis.threshold = threshold;\n\tthis.resolution = ( resolution !== undefined ) ? new Vector2( resolution.x, resolution.y ) : new Vector2( 256, 256 );\n\n\t// create color only once here, reuse it later inside the render function\n\tthis.clearColor = new Color( 0, 0, 0 );\n\n\t// render targets\n\tvar pars = { minFilter: LinearFilter, magFilter: LinearFilter, format: RGBAFormat };\n\tthis.renderTargetsHorizontal = [];\n\tthis.renderTargetsVertical = [];\n\tthis.nMips = 5;\n\tvar resx = Math.round( this.resolution.x / 2 );\n\tvar resy = Math.round( this.resolution.y / 2 );\n\n\tthis.renderTargetBright = new WebGLRenderTarget( resx, resy, pars );\n\tthis.renderTargetBright.texture.name = \"UnrealBloomPass.bright\";\n\tthis.renderTargetBright.texture.generateMipmaps = false;\n\n\tfor ( var i = 0; i < this.nMips; i ++ ) {\n\n\t\tvar renderTargetHorizonal = new WebGLRenderTarget( resx, resy, pars );\n\n\t\trenderTargetHorizonal.texture.name = \"UnrealBloomPass.h\" + i;\n\t\trenderTargetHorizonal.texture.generateMipmaps = false;\n\n\t\tthis.renderTargetsHorizontal.push( renderTargetHorizonal );\n\n\t\tvar renderTargetVertical = new WebGLRenderTarget( resx, resy, pars );\n\n\t\trenderTargetVertical.texture.name = \"UnrealBloomPass.v\" + i;\n\t\trenderTargetVertical.texture.generateMipmaps = false;\n\n\t\tthis.renderTargetsVertical.push( renderTargetVertical );\n\n\t\tresx = Math.round( resx / 2 );\n\n\t\tresy = Math.round( resy / 2 );\n\n\t}\n\n\t// luminosity high pass material\n\n\tif ( LuminosityHighPassShader === undefined )\n\t\tconsole.error( \"UnrealBloomPass relies on LuminosityHighPassShader\" );\n\n\tvar highPassShader = LuminosityHighPassShader;\n\tthis.highPassUniforms = UniformsUtils.clone( highPassShader.uniforms );\n\n\tthis.highPassUniforms[ \"luminosityThreshold\" ].value = threshold;\n\tthis.highPassUniforms[ \"smoothWidth\" ].value = 0.01;\n\n\tthis.materialHighPassFilter = new ShaderMaterial( {\n\t\tuniforms: this.highPassUniforms,\n\t\tvertexShader: highPassShader.vertexShader,\n\t\tfragmentShader: highPassShader.fragmentShader,\n\t\tdefines: {}\n\t} );\n\n\t// Gaussian Blur Materials\n\tthis.separableBlurMaterials = [];\n\tvar kernelSizeArray = [ 3, 5, 7, 9, 11 ];\n\tvar resx = Math.round( this.resolution.x / 2 );\n\tvar resy = Math.round( this.resolution.y / 2 );\n\n\tfor ( var i = 0; i < this.nMips; i ++ ) {\n\n\t\tthis.separableBlurMaterials.push( this.getSeperableBlurMaterial( kernelSizeArray[ i ] ) );\n\n\t\tthis.separableBlurMaterials[ i ].uniforms[ \"texSize\" ].value = new Vector2( resx, resy );\n\n\t\tresx = Math.round( resx / 2 );\n\n\t\tresy = Math.round( resy / 2 );\n\n\t}\n\n\t// Composite material\n\tthis.compositeMaterial = this.getCompositeMaterial( this.nMips );\n\tthis.compositeMaterial.uniforms[ \"blurTexture1\" ].value = this.renderTargetsVertical[ 0 ].texture;\n\tthis.compositeMaterial.uniforms[ \"blurTexture2\" ].value = this.renderTargetsVertical[ 1 ].texture;\n\tthis.compositeMaterial.uniforms[ \"blurTexture3\" ].value = this.renderTargetsVertical[ 2 ].texture;\n\tthis.compositeMaterial.uniforms[ \"blurTexture4\" ].value = this.renderTargetsVertical[ 3 ].texture;\n\tthis.compositeMaterial.uniforms[ \"blurTexture5\" ].value = this.renderTargetsVertical[ 4 ].texture;\n\tthis.compositeMaterial.uniforms[ \"bloomStrength\" ].value = strength;\n\tthis.compositeMaterial.uniforms[ \"bloomRadius\" ].value = 0.1;\n\tthis.compositeMaterial.needsUpdate = true;\n\n\tvar bloomFactors = [ 1.0, 0.8, 0.6, 0.4, 0.2 ];\n\tthis.compositeMaterial.uniforms[ \"bloomFactors\" ].value = bloomFactors;\n\tthis.bloomTintColors = [ new Vector3( 1, 1, 1 ), new Vector3( 1, 1, 1 ), new Vector3( 1, 1, 1 ),\n\t\t\t\t\t\t\t new Vector3( 1, 1, 1 ), new Vector3( 1, 1, 1 ) ];\n\tthis.compositeMaterial.uniforms[ \"bloomTintColors\" ].value = this.bloomTintColors;\n\n\t// copy material\n\tif ( CopyShader === undefined ) {\n\n\t\tconsole.error( \"UnrealBloomPass relies on CopyShader\" );\n\n\t}\n\n\tvar copyShader = CopyShader;\n\n\tthis.copyUniforms = UniformsUtils.clone( copyShader.uniforms );\n\tthis.copyUniforms[ \"opacity\" ].value = 1.0;\n\n\tthis.materialCopy = new ShaderMaterial( {\n\t\tuniforms: this.copyUniforms,\n\t\tvertexShader: copyShader.vertexShader,\n\t\tfragmentShader: copyShader.fragmentShader,\n\t\tblending: AdditiveBlending,\n\t\tdepthTest: false,\n\t\tdepthWrite: false,\n\t\ttransparent: true\n\t} );\n\n\tthis.enabled = true;\n\tthis.needsSwap = false;\n\n\tthis.oldClearColor = new Color();\n\tthis.oldClearAlpha = 1;\n\n\tthis.basic = new MeshBasicMaterial();\n\n\tthis.fsQuad = new Pass.FullScreenQuad( null );\n\n};\n\nUnrealBloomPass.prototype = Object.assign( Object.create( Pass.prototype ), {\n\n\tconstructor: UnrealBloomPass,\n\n\tdispose: function () {\n\n\t\tfor ( var i = 0; i < this.renderTargetsHorizontal.length; i ++ ) {\n\n\t\t\tthis.renderTargetsHorizontal[ i ].dispose();\n\n\t\t}\n\n\t\tfor ( var i = 0; i < this.renderTargetsVertical.length; i ++ ) {\n\n\t\t\tthis.renderTargetsVertical[ i ].dispose();\n\n\t\t}\n\n\t\tthis.renderTargetBright.dispose();\n\n\t},\n\n\tsetSize: function ( width, height ) {\n\n\t\tvar resx = Math.round( width / 2 );\n\t\tvar resy = Math.round( height / 2 );\n\n\t\tthis.renderTargetBright.setSize( resx, resy );\n\n\t\tfor ( var i = 0; i < this.nMips; i ++ ) {\n\n\t\t\tthis.renderTargetsHorizontal[ i ].setSize( resx, resy );\n\t\t\tthis.renderTargetsVertical[ i ].setSize( resx, resy );\n\n\t\t\tthis.separableBlurMaterials[ i ].uniforms[ \"texSize\" ].value = new Vector2( resx, resy );\n\n\t\t\tresx = Math.round( resx / 2 );\n\t\t\tresy = Math.round( resy / 2 );\n\n\t\t}\n\n\t},\n\n\trender: function ( renderer, writeBuffer, readBuffer, deltaTime, maskActive ) {\n\n\t\tthis.oldClearColor.copy( renderer.getClearColor() );\n\t\tthis.oldClearAlpha = renderer.getClearAlpha();\n\t\tvar oldAutoClear = renderer.autoClear;\n\t\trenderer.autoClear = false;\n\n\t\trenderer.setClearColor( this.clearColor, 0 );\n\n\t\tif ( maskActive ) renderer.state.buffers.stencil.setTest( false );\n\n\t\t// Render input to screen\n\n\t\tif ( this.renderToScreen ) {\n\n\t\t\tthis.fsQuad.material = this.basic;\n\t\t\tthis.basic.map = readBuffer.texture;\n\n\t\t\trenderer.setRenderTarget( null );\n\t\t\trenderer.clear();\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t}\n\n\t\t// 1. Extract Bright Areas\n\n\t\tthis.highPassUniforms[ \"tDiffuse\" ].value = readBuffer.texture;\n\t\tthis.highPassUniforms[ \"luminosityThreshold\" ].value = this.threshold;\n\t\tthis.fsQuad.material = this.materialHighPassFilter;\n\n\t\trenderer.setRenderTarget( this.renderTargetBright );\n\t\trenderer.clear();\n\t\tthis.fsQuad.render( renderer );\n\n\t\t// 2. Blur All the mips progressively\n\n\t\tvar inputRenderTarget = this.renderTargetBright;\n\n\t\tfor ( var i = 0; i < this.nMips; i ++ ) {\n\n\t\t\tthis.fsQuad.material = this.separableBlurMaterials[ i ];\n\n\t\t\tthis.separableBlurMaterials[ i ].uniforms[ \"colorTexture\" ].value = inputRenderTarget.texture;\n\t\t\tthis.separableBlurMaterials[ i ].uniforms[ \"direction\" ].value = UnrealBloomPass.BlurDirectionX;\n\t\t\trenderer.setRenderTarget( this.renderTargetsHorizontal[ i ] );\n\t\t\trenderer.clear();\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t\tthis.separableBlurMaterials[ i ].uniforms[ \"colorTexture\" ].value = this.renderTargetsHorizontal[ i ].texture;\n\t\t\tthis.separableBlurMaterials[ i ].uniforms[ \"direction\" ].value = UnrealBloomPass.BlurDirectionY;\n\t\t\trenderer.setRenderTarget( this.renderTargetsVertical[ i ] );\n\t\t\trenderer.clear();\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t\tinputRenderTarget = this.renderTargetsVertical[ i ];\n\n\t\t}\n\n\t\t// Composite All the mips\n\n\t\tthis.fsQuad.material = this.compositeMaterial;\n\t\tthis.compositeMaterial.uniforms[ \"bloomStrength\" ].value = this.strength;\n\t\tthis.compositeMaterial.uniforms[ \"bloomRadius\" ].value = this.radius;\n\t\tthis.compositeMaterial.uniforms[ \"bloomTintColors\" ].value = this.bloomTintColors;\n\n\t\trenderer.setRenderTarget( this.renderTargetsHorizontal[ 0 ] );\n\t\trenderer.clear();\n\t\tthis.fsQuad.render( renderer );\n\n\t\t// Blend it additively over the input texture\n\n\t\tthis.fsQuad.material = this.materialCopy;\n\t\tthis.copyUniforms[ \"tDiffuse\" ].value = this.renderTargetsHorizontal[ 0 ].texture;\n\n\t\tif ( maskActive ) renderer.state.buffers.stencil.setTest( true );\n\n\t\tif ( this.renderToScreen ) {\n\n\t\t\trenderer.setRenderTarget( null );\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t} else {\n\n\t\t\trenderer.setRenderTarget( readBuffer );\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t}\n\n\t\t// Restore renderer settings\n\n\t\trenderer.setClearColor( this.oldClearColor, this.oldClearAlpha );\n\t\trenderer.autoClear = oldAutoClear;\n\n\t},\n\n\tgetSeperableBlurMaterial: function ( kernelRadius ) {\n\n\t\treturn new ShaderMaterial( {\n\n\t\t\tdefines: {\n\t\t\t\t\"KERNEL_RADIUS\": kernelRadius,\n\t\t\t\t\"SIGMA\": kernelRadius\n\t\t\t},\n\n\t\t\tuniforms: {\n\t\t\t\t\"colorTexture\": { value: null },\n\t\t\t\t\"texSize\": { value: new Vector2( 0.5, 0.5 ) },\n\t\t\t\t\"direction\": { value: new Vector2( 0.5, 0.5 ) }\n\t\t\t},\n\n\t\t\tvertexShader:\n\t\t\t\t\"varying vec2 vUv;\\n\\\n\t\t\t\tvoid main() {\\n\\\n\t\t\t\t\tvUv = uv;\\n\\\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n\\\n\t\t\t\t}\",\n\n\t\t\tfragmentShader:\n\t\t\t\t\"#include <common>\\\n\t\t\t\tvarying vec2 vUv;\\n\\\n\t\t\t\tuniform sampler2D colorTexture;\\n\\\n\t\t\t\tuniform vec2 texSize;\\\n\t\t\t\tuniform vec2 direction;\\\n\t\t\t\t\\\n\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\\\n\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\\\n\t\t\t\t}\\\n\t\t\t\tvoid main() {\\n\\\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\\\n\t\t\t\t\tfloat fSigma = float(SIGMA);\\\n\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, fSigma);\\\n\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\\\n\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\\\n\t\t\t\t\t\tfloat x = float(i);\\\n\t\t\t\t\t\tfloat w = gaussianPdf(x, fSigma);\\\n\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\\\n\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\\\n\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\\\n\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\\\n\t\t\t\t\t\tweightSum += 2.0 * w;\\\n\t\t\t\t\t}\\\n\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\\n\\\n\t\t\t\t}\"\n\t\t} );\n\n\t},\n\n\tgetCompositeMaterial: function ( nMips ) {\n\n\t\treturn new ShaderMaterial( {\n\n\t\t\tdefines: {\n\t\t\t\t\"NUM_MIPS\": nMips\n\t\t\t},\n\n\t\t\tuniforms: {\n\t\t\t\t\"blurTexture1\": { value: null },\n\t\t\t\t\"blurTexture2\": { value: null },\n\t\t\t\t\"blurTexture3\": { value: null },\n\t\t\t\t\"blurTexture4\": { value: null },\n\t\t\t\t\"blurTexture5\": { value: null },\n\t\t\t\t\"dirtTexture\": { value: null },\n\t\t\t\t\"bloomStrength\": { value: 1.0 },\n\t\t\t\t\"bloomFactors\": { value: null },\n\t\t\t\t\"bloomTintColors\": { value: null },\n\t\t\t\t\"bloomRadius\": { value: 0.0 }\n\t\t\t},\n\n\t\t\tvertexShader:\n\t\t\t\t\"varying vec2 vUv;\\n\\\n\t\t\t\tvoid main() {\\n\\\n\t\t\t\t\tvUv = uv;\\n\\\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n\\\n\t\t\t\t}\",\n\n\t\t\tfragmentShader:\n\t\t\t\t\"varying vec2 vUv;\\\n\t\t\t\tuniform sampler2D blurTexture1;\\\n\t\t\t\tuniform sampler2D blurTexture2;\\\n\t\t\t\tuniform sampler2D blurTexture3;\\\n\t\t\t\tuniform sampler2D blurTexture4;\\\n\t\t\t\tuniform sampler2D blurTexture5;\\\n\t\t\t\tuniform sampler2D dirtTexture;\\\n\t\t\t\tuniform float bloomStrength;\\\n\t\t\t\tuniform float bloomRadius;\\\n\t\t\t\tuniform float bloomFactors[NUM_MIPS];\\\n\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\\\n\t\t\t\t\\\n\t\t\t\tfloat lerpBloomFactor(const in float factor) { \\\n\t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\\\n\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\\\n\t\t\t\t}\\\n\t\t\t\t\\\n\t\t\t\tvoid main() {\\\n\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) + \\\n\t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) + \\\n\t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) + \\\n\t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) + \\\n\t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\\\n\t\t\t\t}\"\n\t\t} );\n\n\t}\n\n} );\n\nUnrealBloomPass.BlurDirectionX = new Vector2( 1.0, 0.0 );\nUnrealBloomPass.BlurDirectionY = new Vector2( 0.0, 1.0 );\n\nexport { UnrealBloomPass };\n"]}]}