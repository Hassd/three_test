{"remainingRequest":"E:\\自己的项目\\three_test\\node_modules\\babel-loader\\lib\\index.js!E:\\自己的项目\\three_test\\src\\assets\\jsm\\curves\\NURBSCurve.js","dependencies":[{"path":"E:\\自己的项目\\three_test\\src\\assets\\jsm\\curves\\NURBSCurve.js","mtime":1579613445658},{"path":"E:\\自己的项目\\three_test\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\自己的项目\\three_test\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoqCiAqIEBhdXRob3IgcmVuZWoKICogTlVSQlMgY3VydmUgb2JqZWN0CiAqCiAqIERlcml2ZXMgZnJvbSBDdXJ2ZSwgb3ZlcnJpZGluZyBnZXRQb2ludCBhbmQgZ2V0VGFuZ2VudC4KICoKICogSW1wbGVtZW50YXRpb24gaXMgYmFzZWQgb24gKHgsIHkgWywgej0wIFssIHc9MV1dKSBjb250cm9sIHBvaW50cyB3aXRoIHc9d2VpZ2h0LgogKgogKiovCmltcG9ydCB7IEN1cnZlLCBWZWN0b3IzLCBWZWN0b3I0IH0gZnJvbSAiLi4vLi4vanMvdGhyZWUubW9kdWxlLmpzIjsKaW1wb3J0IHsgTlVSQlNVdGlscyB9IGZyb20gIi4uL2N1cnZlcy9OVVJCU1V0aWxzLmpzIjsKLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAqCU5VUkJTIGN1cnZlCiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCnZhciBOVVJCU0N1cnZlID0gZnVuY3Rpb24gTlVSQlNDdXJ2ZShkZWdyZWUsIGtub3RzCi8qIGFycmF5IG9mIHJlYWxzICovCiwgY29udHJvbFBvaW50cwovKiBhcnJheSBvZiBWZWN0b3IoMnwzfDQpICovCiwgc3RhcnRLbm90Ci8qIGluZGV4IGluIGtub3RzICovCiwgZW5kS25vdAovKiBpbmRleCBpbiBrbm90cyAqLwopIHsKICBDdXJ2ZS5jYWxsKHRoaXMpOwogIHRoaXMuZGVncmVlID0gZGVncmVlOwogIHRoaXMua25vdHMgPSBrbm90czsKICB0aGlzLmNvbnRyb2xQb2ludHMgPSBbXTsgLy8gVXNlZCBieSBwZXJpb2RpYyBOVVJCUyB0byByZW1vdmUgaGlkZGVuIHNwYW5zCgogIHRoaXMuc3RhcnRLbm90ID0gc3RhcnRLbm90IHx8IDA7CiAgdGhpcy5lbmRLbm90ID0gZW5kS25vdCB8fCB0aGlzLmtub3RzLmxlbmd0aCAtIDE7CgogIGZvciAodmFyIGkgPSAwOyBpIDwgY29udHJvbFBvaW50cy5sZW5ndGg7ICsraSkgewogICAgLy8gZW5zdXJlIFZlY3RvcjQgZm9yIGNvbnRyb2wgcG9pbnRzCiAgICB2YXIgcG9pbnQgPSBjb250cm9sUG9pbnRzW2ldOwogICAgdGhpcy5jb250cm9sUG9pbnRzW2ldID0gbmV3IFZlY3RvcjQocG9pbnQueCwgcG9pbnQueSwgcG9pbnQueiwgcG9pbnQudyk7CiAgfQp9OwoKTlVSQlNDdXJ2ZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEN1cnZlLnByb3RvdHlwZSk7Ck5VUkJTQ3VydmUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTlVSQlNDdXJ2ZTsKCk5VUkJTQ3VydmUucHJvdG90eXBlLmdldFBvaW50ID0gZnVuY3Rpb24gKHQpIHsKICB2YXIgdSA9IHRoaXMua25vdHNbdGhpcy5zdGFydEtub3RdICsgdCAqICh0aGlzLmtub3RzW3RoaXMuZW5kS25vdF0gLSB0aGlzLmtub3RzW3RoaXMuc3RhcnRLbm90XSk7IC8vIGxpbmVhciBtYXBwaW5nIHQtPnUKICAvLyBmb2xsb3dpbmcgcmVzdWx0cyBpbiAod3gsIHd5LCB3eiwgdykgaG9tb2dlbmVvdXMgcG9pbnQKCiAgdmFyIGhwb2ludCA9IE5VUkJTVXRpbHMuY2FsY0JTcGxpbmVQb2ludCh0aGlzLmRlZ3JlZSwgdGhpcy5rbm90cywgdGhpcy5jb250cm9sUG9pbnRzLCB1KTsKCiAgaWYgKGhwb2ludC53ICE9IDEuMCkgewogICAgLy8gcHJvamVjdCB0byAzRCBzcGFjZTogKHd4LCB3eSwgd3osIHcpIC0+ICh4LCB5LCB6LCAxKQogICAgaHBvaW50LmRpdmlkZVNjYWxhcihocG9pbnQudyk7CiAgfQoKICByZXR1cm4gbmV3IFZlY3RvcjMoaHBvaW50LngsIGhwb2ludC55LCBocG9pbnQueik7Cn07CgpOVVJCU0N1cnZlLnByb3RvdHlwZS5nZXRUYW5nZW50ID0gZnVuY3Rpb24gKHQpIHsKICB2YXIgdSA9IHRoaXMua25vdHNbMF0gKyB0ICogKHRoaXMua25vdHNbdGhpcy5rbm90cy5sZW5ndGggLSAxXSAtIHRoaXMua25vdHNbMF0pOwogIHZhciBkZXJzID0gTlVSQlNVdGlscy5jYWxjTlVSQlNEZXJpdmF0aXZlcyh0aGlzLmRlZ3JlZSwgdGhpcy5rbm90cywgdGhpcy5jb250cm9sUG9pbnRzLCB1LCAxKTsKICB2YXIgdGFuZ2VudCA9IGRlcnNbMV0uY2xvbmUoKTsKICB0YW5nZW50Lm5vcm1hbGl6ZSgpOwogIHJldHVybiB0YW5nZW50Owp9OwoKZXhwb3J0IHsgTlVSQlNDdXJ2ZSB9Ow=="},{"version":3,"sources":["E:/自己的项目/three_test/src/assets/jsm/curves/NURBSCurve.js"],"names":["Curve","Vector3","Vector4","NURBSUtils","NURBSCurve","degree","knots","controlPoints","startKnot","endKnot","call","length","i","point","x","y","z","w","prototype","Object","create","constructor","getPoint","t","u","hpoint","calcBSplinePoint","divideScalar","getTangent","ders","calcNURBSDerivatives","tangent","clone","normalize"],"mappings":"AAAA;;;;;;;;;AAUA,SACCA,KADD,EAECC,OAFD,EAGCC,OAHD,QAIO,0BAJP;AAKA,SAASC,UAAT,QAA2B,yBAA3B;AAGA;;;;AAIA,IAAIC,UAAU,GAAG,SAAbA,UAAa,CAAUC,MAAV,EAAkBC;AAAM;AAAxB,EAA8CC;AAAc;AAA5D,EAA0FC;AAAU;AAApG,EAA0HC;AAAQ;AAAlI,EAAwJ;AAExKT,EAAAA,KAAK,CAACU,IAAN,CAAW,IAAX;AAEA,OAAKL,MAAL,GAAcA,MAAd;AACA,OAAKC,KAAL,GAAaA,KAAb;AACA,OAAKC,aAAL,GAAqB,EAArB,CANwK,CAOxK;;AACA,OAAKC,SAAL,GAAiBA,SAAS,IAAI,CAA9B;AACA,OAAKC,OAAL,GAAeA,OAAO,IAAK,KAAKH,KAAL,CAAWK,MAAX,GAAoB,CAA/C;;AACA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,aAAa,CAACI,MAAlC,EAA0C,EAAEC,CAA5C,EAA+C;AAE9C;AACA,QAAIC,KAAK,GAAGN,aAAa,CAACK,CAAD,CAAzB;AACA,SAAKL,aAAL,CAAmBK,CAAnB,IAAwB,IAAIV,OAAJ,CAAYW,KAAK,CAACC,CAAlB,EAAqBD,KAAK,CAACE,CAA3B,EAA8BF,KAAK,CAACG,CAApC,EAAuCH,KAAK,CAACI,CAA7C,CAAxB;AAEA;AAED,CAlBD;;AAqBAb,UAAU,CAACc,SAAX,GAAuBC,MAAM,CAACC,MAAP,CAAcpB,KAAK,CAACkB,SAApB,CAAvB;AACAd,UAAU,CAACc,SAAX,CAAqBG,WAArB,GAAmCjB,UAAnC;;AAGAA,UAAU,CAACc,SAAX,CAAqBI,QAArB,GAAgC,UAAUC,CAAV,EAAa;AAE5C,MAAIC,CAAC,GAAG,KAAKlB,KAAL,CAAW,KAAKE,SAAhB,IAA6Be,CAAC,IAAI,KAAKjB,KAAL,CAAW,KAAKG,OAAhB,IAA2B,KAAKH,KAAL,CAAW,KAAKE,SAAhB,CAA/B,CAAtC,CAF4C,CAEsD;AAElG;;AACA,MAAIiB,MAAM,GAAGtB,UAAU,CAACuB,gBAAX,CAA4B,KAAKrB,MAAjC,EAAyC,KAAKC,KAA9C,EAAqD,KAAKC,aAA1D,EAAyEiB,CAAzE,CAAb;;AAEA,MAAIC,MAAM,CAACR,CAAP,IAAY,GAAhB,EAAqB;AAEpB;AACAQ,IAAAA,MAAM,CAACE,YAAP,CAAoBF,MAAM,CAACR,CAA3B;AAEA;;AAED,SAAO,IAAIhB,OAAJ,CAAYwB,MAAM,CAACX,CAAnB,EAAsBW,MAAM,CAACV,CAA7B,EAAgCU,MAAM,CAACT,CAAvC,CAAP;AAEA,CAhBD;;AAmBAZ,UAAU,CAACc,SAAX,CAAqBU,UAArB,GAAkC,UAAUL,CAAV,EAAa;AAE9C,MAAIC,CAAC,GAAG,KAAKlB,KAAL,CAAW,CAAX,IAAgBiB,CAAC,IAAI,KAAKjB,KAAL,CAAW,KAAKA,KAAL,CAAWK,MAAX,GAAoB,CAA/B,IAAoC,KAAKL,KAAL,CAAW,CAAX,CAAxC,CAAzB;AACA,MAAIuB,IAAI,GAAG1B,UAAU,CAAC2B,oBAAX,CAAgC,KAAKzB,MAArC,EAA6C,KAAKC,KAAlD,EAAyD,KAAKC,aAA9D,EAA6EiB,CAA7E,EAAgF,CAAhF,CAAX;AACA,MAAIO,OAAO,GAAGF,IAAI,CAAC,CAAD,CAAJ,CAAQG,KAAR,EAAd;AACAD,EAAAA,OAAO,CAACE,SAAR;AAEA,SAAOF,OAAP;AAEA,CATD;;AAWA,SAAS3B,UAAT","sourcesContent":["/**\n * @author renej\n * NURBS curve object\n *\n * Derives from Curve, overriding getPoint and getTangent.\n *\n * Implementation is based on (x, y [, z=0 [, w=1]]) control points with w=weight.\n *\n **/\n\nimport {\n\tCurve,\n\tVector3,\n\tVector4\n} from \"../../js/three.module.js\";\nimport { NURBSUtils } from \"../curves/NURBSUtils.js\";\n\n\n/**************************************************************\n *\tNURBS curve\n **************************************************************/\n\nvar NURBSCurve = function (degree, knots /* array of reals */, controlPoints /* array of Vector(2|3|4) */, startKnot /* index in knots */, endKnot /* index in knots */) {\n\n\tCurve.call(this);\n\n\tthis.degree = degree;\n\tthis.knots = knots;\n\tthis.controlPoints = [];\n\t// Used by periodic NURBS to remove hidden spans\n\tthis.startKnot = startKnot || 0;\n\tthis.endKnot = endKnot || (this.knots.length - 1);\n\tfor (var i = 0; i < controlPoints.length; ++i) {\n\n\t\t// ensure Vector4 for control points\n\t\tvar point = controlPoints[i];\n\t\tthis.controlPoints[i] = new Vector4(point.x, point.y, point.z, point.w);\n\n\t}\n\n};\n\n\nNURBSCurve.prototype = Object.create(Curve.prototype);\nNURBSCurve.prototype.constructor = NURBSCurve;\n\n\nNURBSCurve.prototype.getPoint = function (t) {\n\n\tvar u = this.knots[this.startKnot] + t * (this.knots[this.endKnot] - this.knots[this.startKnot]); // linear mapping t->u\n\n\t// following results in (wx, wy, wz, w) homogeneous point\n\tvar hpoint = NURBSUtils.calcBSplinePoint(this.degree, this.knots, this.controlPoints, u);\n\n\tif (hpoint.w != 1.0) {\n\n\t\t// project to 3D space: (wx, wy, wz, w) -> (x, y, z, 1)\n\t\thpoint.divideScalar(hpoint.w);\n\n\t}\n\n\treturn new Vector3(hpoint.x, hpoint.y, hpoint.z);\n\n};\n\n\nNURBSCurve.prototype.getTangent = function (t) {\n\n\tvar u = this.knots[0] + t * (this.knots[this.knots.length - 1] - this.knots[0]);\n\tvar ders = NURBSUtils.calcNURBSDerivatives(this.degree, this.knots, this.controlPoints, u, 1);\n\tvar tangent = ders[1].clone();\n\ttangent.normalize();\n\n\treturn tangent;\n\n};\n\nexport { NURBSCurve };\n"]}]}