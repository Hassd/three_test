{"remainingRequest":"E:\\自己的项目\\three_test\\node_modules\\babel-loader\\lib\\index.js!E:\\自己的项目\\three_test\\src\\assets\\examples\\jsm\\postprocessing\\EffectComposer.js","dependencies":[{"path":"E:\\自己的项目\\three_test\\src\\assets\\examples\\jsm\\postprocessing\\EffectComposer.js","mtime":1581123525000},{"path":"E:\\自己的项目\\three_test\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\自己的项目\\three_test\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CgovKioKICogQGF1dGhvciBhbHRlcmVkcSAvIGh0dHA6Ly9hbHRlcmVkcXVhbGlhLmNvbS8KICovCmltcG9ydCB7IENsb2NrLCBMaW5lYXJGaWx0ZXIsIE1lc2gsIE9ydGhvZ3JhcGhpY0NhbWVyYSwgUGxhbmVCdWZmZXJHZW9tZXRyeSwgUkdCQUZvcm1hdCwgVmVjdG9yMiwgV2ViR0xSZW5kZXJUYXJnZXQgfSBmcm9tICIuLi8uLi8uLi9idWlsZC90aHJlZS5tb2R1bGUuanMiOwppbXBvcnQgeyBDb3B5U2hhZGVyIH0gZnJvbSAiLi4vc2hhZGVycy9Db3B5U2hhZGVyLmpzIjsKaW1wb3J0IHsgU2hhZGVyUGFzcyB9IGZyb20gIi4uL3Bvc3Rwcm9jZXNzaW5nL1NoYWRlclBhc3MuanMiOwppbXBvcnQgeyBNYXNrUGFzcyB9IGZyb20gIi4uL3Bvc3Rwcm9jZXNzaW5nL01hc2tQYXNzLmpzIjsKaW1wb3J0IHsgQ2xlYXJNYXNrUGFzcyB9IGZyb20gIi4uL3Bvc3Rwcm9jZXNzaW5nL01hc2tQYXNzLmpzIjsKCnZhciBFZmZlY3RDb21wb3NlciA9IGZ1bmN0aW9uIEVmZmVjdENvbXBvc2VyKHJlbmRlcmVyLCByZW5kZXJUYXJnZXQpIHsKICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7CgogIGlmIChyZW5kZXJUYXJnZXQgPT09IHVuZGVmaW5lZCkgewogICAgdmFyIHBhcmFtZXRlcnMgPSB7CiAgICAgIG1pbkZpbHRlcjogTGluZWFyRmlsdGVyLAogICAgICBtYWdGaWx0ZXI6IExpbmVhckZpbHRlciwKICAgICAgZm9ybWF0OiBSR0JBRm9ybWF0LAogICAgICBzdGVuY2lsQnVmZmVyOiBmYWxzZQogICAgfTsKICAgIHZhciBzaXplID0gcmVuZGVyZXIuZ2V0U2l6ZShuZXcgVmVjdG9yMigpKTsKICAgIHRoaXMuX3BpeGVsUmF0aW8gPSByZW5kZXJlci5nZXRQaXhlbFJhdGlvKCk7CiAgICB0aGlzLl93aWR0aCA9IHNpemUud2lkdGg7CiAgICB0aGlzLl9oZWlnaHQgPSBzaXplLmhlaWdodDsKICAgIHJlbmRlclRhcmdldCA9IG5ldyBXZWJHTFJlbmRlclRhcmdldCh0aGlzLl93aWR0aCAqIHRoaXMuX3BpeGVsUmF0aW8sIHRoaXMuX2hlaWdodCAqIHRoaXMuX3BpeGVsUmF0aW8sIHBhcmFtZXRlcnMpOwogICAgcmVuZGVyVGFyZ2V0LnRleHR1cmUubmFtZSA9ICdFZmZlY3RDb21wb3Nlci5ydDEnOwogIH0gZWxzZSB7CiAgICB0aGlzLl9waXhlbFJhdGlvID0gMTsKICAgIHRoaXMuX3dpZHRoID0gcmVuZGVyVGFyZ2V0LndpZHRoOwogICAgdGhpcy5faGVpZ2h0ID0gcmVuZGVyVGFyZ2V0LmhlaWdodDsKICB9CgogIHRoaXMucmVuZGVyVGFyZ2V0MSA9IHJlbmRlclRhcmdldDsKICB0aGlzLnJlbmRlclRhcmdldDIgPSByZW5kZXJUYXJnZXQuY2xvbmUoKTsKICB0aGlzLnJlbmRlclRhcmdldDIudGV4dHVyZS5uYW1lID0gJ0VmZmVjdENvbXBvc2VyLnJ0Mic7CiAgdGhpcy53cml0ZUJ1ZmZlciA9IHRoaXMucmVuZGVyVGFyZ2V0MTsKICB0aGlzLnJlYWRCdWZmZXIgPSB0aGlzLnJlbmRlclRhcmdldDI7CiAgdGhpcy5yZW5kZXJUb1NjcmVlbiA9IHRydWU7CiAgdGhpcy5wYXNzZXMgPSBbXTsgLy8gZGVwZW5kZW5jaWVzCgogIGlmIChDb3B5U2hhZGVyID09PSB1bmRlZmluZWQpIHsKICAgIGNvbnNvbGUuZXJyb3IoJ1RIUkVFLkVmZmVjdENvbXBvc2VyIHJlbGllcyBvbiBDb3B5U2hhZGVyJyk7CiAgfQoKICBpZiAoU2hhZGVyUGFzcyA9PT0gdW5kZWZpbmVkKSB7CiAgICBjb25zb2xlLmVycm9yKCdUSFJFRS5FZmZlY3RDb21wb3NlciByZWxpZXMgb24gU2hhZGVyUGFzcycpOwogIH0KCiAgdGhpcy5jb3B5UGFzcyA9IG5ldyBTaGFkZXJQYXNzKENvcHlTaGFkZXIpOwogIHRoaXMuY2xvY2sgPSBuZXcgQ2xvY2soKTsKfTsKCk9iamVjdC5hc3NpZ24oRWZmZWN0Q29tcG9zZXIucHJvdG90eXBlLCB7CiAgc3dhcEJ1ZmZlcnM6IGZ1bmN0aW9uIHN3YXBCdWZmZXJzKCkgewogICAgdmFyIHRtcCA9IHRoaXMucmVhZEJ1ZmZlcjsKICAgIHRoaXMucmVhZEJ1ZmZlciA9IHRoaXMud3JpdGVCdWZmZXI7CiAgICB0aGlzLndyaXRlQnVmZmVyID0gdG1wOwogIH0sCiAgYWRkUGFzczogZnVuY3Rpb24gYWRkUGFzcyhwYXNzKSB7CiAgICB0aGlzLnBhc3Nlcy5wdXNoKHBhc3MpOwogICAgcGFzcy5zZXRTaXplKHRoaXMuX3dpZHRoICogdGhpcy5fcGl4ZWxSYXRpbywgdGhpcy5faGVpZ2h0ICogdGhpcy5fcGl4ZWxSYXRpbyk7CiAgfSwKICBpbnNlcnRQYXNzOiBmdW5jdGlvbiBpbnNlcnRQYXNzKHBhc3MsIGluZGV4KSB7CiAgICB0aGlzLnBhc3Nlcy5zcGxpY2UoaW5kZXgsIDAsIHBhc3MpOwogIH0sCiAgaXNMYXN0RW5hYmxlZFBhc3M6IGZ1bmN0aW9uIGlzTGFzdEVuYWJsZWRQYXNzKHBhc3NJbmRleCkgewogICAgZm9yICh2YXIgaSA9IHBhc3NJbmRleCArIDE7IGkgPCB0aGlzLnBhc3Nlcy5sZW5ndGg7IGkrKykgewogICAgICBpZiAodGhpcy5wYXNzZXNbaV0uZW5hYmxlZCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiB0cnVlOwogIH0sCiAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoZGVsdGFUaW1lKSB7CiAgICAvLyBkZWx0YVRpbWUgdmFsdWUgaXMgaW4gc2Vjb25kcwogICAgaWYgKGRlbHRhVGltZSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIGRlbHRhVGltZSA9IHRoaXMuY2xvY2suZ2V0RGVsdGEoKTsKICAgIH0KCiAgICB2YXIgY3VycmVudFJlbmRlclRhcmdldCA9IHRoaXMucmVuZGVyZXIuZ2V0UmVuZGVyVGFyZ2V0KCk7CiAgICB2YXIgbWFza0FjdGl2ZSA9IGZhbHNlOwogICAgdmFyIHBhc3MsCiAgICAgICAgaSwKICAgICAgICBpbCA9IHRoaXMucGFzc2VzLmxlbmd0aDsKCiAgICBmb3IgKGkgPSAwOyBpIDwgaWw7IGkrKykgewogICAgICBwYXNzID0gdGhpcy5wYXNzZXNbaV07CiAgICAgIGlmIChwYXNzLmVuYWJsZWQgPT09IGZhbHNlKSBjb250aW51ZTsKICAgICAgcGFzcy5yZW5kZXJUb1NjcmVlbiA9IHRoaXMucmVuZGVyVG9TY3JlZW4gJiYgdGhpcy5pc0xhc3RFbmFibGVkUGFzcyhpKTsKICAgICAgcGFzcy5yZW5kZXIodGhpcy5yZW5kZXJlciwgdGhpcy53cml0ZUJ1ZmZlciwgdGhpcy5yZWFkQnVmZmVyLCBkZWx0YVRpbWUsIG1hc2tBY3RpdmUpOwoKICAgICAgaWYgKHBhc3MubmVlZHNTd2FwKSB7CiAgICAgICAgaWYgKG1hc2tBY3RpdmUpIHsKICAgICAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5yZW5kZXJlci5nZXRDb250ZXh0KCk7CiAgICAgICAgICB2YXIgc3RlbmNpbCA9IHRoaXMucmVuZGVyZXIuc3RhdGUuYnVmZmVycy5zdGVuY2lsOyAvL2NvbnRleHQuc3RlbmNpbEZ1bmMoIGNvbnRleHQuTk9URVFVQUwsIDEsIDB4ZmZmZmZmZmYgKTsKCiAgICAgICAgICBzdGVuY2lsLnNldEZ1bmMoY29udGV4dC5OT1RFUVVBTCwgMSwgMHhmZmZmZmZmZik7CiAgICAgICAgICB0aGlzLmNvcHlQYXNzLnJlbmRlcih0aGlzLnJlbmRlcmVyLCB0aGlzLndyaXRlQnVmZmVyLCB0aGlzLnJlYWRCdWZmZXIsIGRlbHRhVGltZSk7IC8vY29udGV4dC5zdGVuY2lsRnVuYyggY29udGV4dC5FUVVBTCwgMSwgMHhmZmZmZmZmZiApOwoKICAgICAgICAgIHN0ZW5jaWwuc2V0RnVuYyhjb250ZXh0LkVRVUFMLCAxLCAweGZmZmZmZmZmKTsKICAgICAgICB9CgogICAgICAgIHRoaXMuc3dhcEJ1ZmZlcnMoKTsKICAgICAgfQoKICAgICAgaWYgKE1hc2tQYXNzICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBpZiAocGFzcyBpbnN0YW5jZW9mIE1hc2tQYXNzKSB7CiAgICAgICAgICBtYXNrQWN0aXZlID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgaWYgKHBhc3MgaW5zdGFuY2VvZiBDbGVhck1hc2tQYXNzKSB7CiAgICAgICAgICBtYXNrQWN0aXZlID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgdGhpcy5yZW5kZXJlci5zZXRSZW5kZXJUYXJnZXQoY3VycmVudFJlbmRlclRhcmdldCk7CiAgfSwKICByZXNldDogZnVuY3Rpb24gcmVzZXQocmVuZGVyVGFyZ2V0KSB7CiAgICBpZiAocmVuZGVyVGFyZ2V0ID09PSB1bmRlZmluZWQpIHsKICAgICAgdmFyIHNpemUgPSB0aGlzLnJlbmRlcmVyLmdldFNpemUobmV3IFZlY3RvcjIoKSk7CiAgICAgIHRoaXMuX3BpeGVsUmF0aW8gPSB0aGlzLnJlbmRlcmVyLmdldFBpeGVsUmF0aW8oKTsKICAgICAgdGhpcy5fd2lkdGggPSBzaXplLndpZHRoOwogICAgICB0aGlzLl9oZWlnaHQgPSBzaXplLmhlaWdodDsKICAgICAgcmVuZGVyVGFyZ2V0ID0gdGhpcy5yZW5kZXJUYXJnZXQxLmNsb25lKCk7CiAgICAgIHJlbmRlclRhcmdldC5zZXRTaXplKHRoaXMuX3dpZHRoICogdGhpcy5fcGl4ZWxSYXRpbywgdGhpcy5faGVpZ2h0ICogdGhpcy5fcGl4ZWxSYXRpbyk7CiAgICB9CgogICAgdGhpcy5yZW5kZXJUYXJnZXQxLmRpc3Bvc2UoKTsKICAgIHRoaXMucmVuZGVyVGFyZ2V0Mi5kaXNwb3NlKCk7CiAgICB0aGlzLnJlbmRlclRhcmdldDEgPSByZW5kZXJUYXJnZXQ7CiAgICB0aGlzLnJlbmRlclRhcmdldDIgPSByZW5kZXJUYXJnZXQuY2xvbmUoKTsKICAgIHRoaXMud3JpdGVCdWZmZXIgPSB0aGlzLnJlbmRlclRhcmdldDE7CiAgICB0aGlzLnJlYWRCdWZmZXIgPSB0aGlzLnJlbmRlclRhcmdldDI7CiAgfSwKICBzZXRTaXplOiBmdW5jdGlvbiBzZXRTaXplKHdpZHRoLCBoZWlnaHQpIHsKICAgIHRoaXMuX3dpZHRoID0gd2lkdGg7CiAgICB0aGlzLl9oZWlnaHQgPSBoZWlnaHQ7CiAgICB2YXIgZWZmZWN0aXZlV2lkdGggPSB0aGlzLl93aWR0aCAqIHRoaXMuX3BpeGVsUmF0aW87CiAgICB2YXIgZWZmZWN0aXZlSGVpZ2h0ID0gdGhpcy5faGVpZ2h0ICogdGhpcy5fcGl4ZWxSYXRpbzsKICAgIHRoaXMucmVuZGVyVGFyZ2V0MS5zZXRTaXplKGVmZmVjdGl2ZVdpZHRoLCBlZmZlY3RpdmVIZWlnaHQpOwogICAgdGhpcy5yZW5kZXJUYXJnZXQyLnNldFNpemUoZWZmZWN0aXZlV2lkdGgsIGVmZmVjdGl2ZUhlaWdodCk7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnBhc3Nlcy5sZW5ndGg7IGkrKykgewogICAgICB0aGlzLnBhc3Nlc1tpXS5zZXRTaXplKGVmZmVjdGl2ZVdpZHRoLCBlZmZlY3RpdmVIZWlnaHQpOwogICAgfQogIH0sCiAgc2V0UGl4ZWxSYXRpbzogZnVuY3Rpb24gc2V0UGl4ZWxSYXRpbyhwaXhlbFJhdGlvKSB7CiAgICB0aGlzLl9waXhlbFJhdGlvID0gcGl4ZWxSYXRpbzsKICAgIHRoaXMuc2V0U2l6ZSh0aGlzLl93aWR0aCwgdGhpcy5faGVpZ2h0KTsKICB9Cn0pOwoKdmFyIFBhc3MgPSBmdW5jdGlvbiBQYXNzKCkgewogIC8vIGlmIHNldCB0byB0cnVlLCB0aGUgcGFzcyBpcyBwcm9jZXNzZWQgYnkgdGhlIGNvbXBvc2VyCiAgdGhpcy5lbmFibGVkID0gdHJ1ZTsgLy8gaWYgc2V0IHRvIHRydWUsIHRoZSBwYXNzIGluZGljYXRlcyB0byBzd2FwIHJlYWQgYW5kIHdyaXRlIGJ1ZmZlciBhZnRlciByZW5kZXJpbmcKCiAgdGhpcy5uZWVkc1N3YXAgPSB0cnVlOyAvLyBpZiBzZXQgdG8gdHJ1ZSwgdGhlIHBhc3MgY2xlYXJzIGl0cyBidWZmZXIgYmVmb3JlIHJlbmRlcmluZwoKICB0aGlzLmNsZWFyID0gZmFsc2U7IC8vIGlmIHNldCB0byB0cnVlLCB0aGUgcmVzdWx0IG9mIHRoZSBwYXNzIGlzIHJlbmRlcmVkIHRvIHNjcmVlbi4gVGhpcyBpcyBzZXQgYXV0b21hdGljYWxseSBieSBFZmZlY3RDb21wb3Nlci4KCiAgdGhpcy5yZW5kZXJUb1NjcmVlbiA9IGZhbHNlOwp9OwoKT2JqZWN0LmFzc2lnbihQYXNzLnByb3RvdHlwZSwgewogIHNldFNpemU6IGZ1bmN0aW9uIHNldFNpemUoKQogIC8qIHdpZHRoLCBoZWlnaHQgKi8KICB7fSwKICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpCiAgLyogcmVuZGVyZXIsIHdyaXRlQnVmZmVyLCByZWFkQnVmZmVyLCBkZWx0YVRpbWUsIG1hc2tBY3RpdmUgKi8KICB7CiAgICBjb25zb2xlLmVycm9yKCdUSFJFRS5QYXNzOiAucmVuZGVyKCkgbXVzdCBiZSBpbXBsZW1lbnRlZCBpbiBkZXJpdmVkIHBhc3MuJyk7CiAgfQp9KTsgLy8gSGVscGVyIGZvciBwYXNzZXMgdGhhdCBuZWVkIHRvIGZpbGwgdGhlIHZpZXdwb3J0IHdpdGggYSBzaW5nbGUgcXVhZC4KClBhc3MuRnVsbFNjcmVlblF1YWQgPSBmdW5jdGlvbiAoKSB7CiAgdmFyIGNhbWVyYSA9IG5ldyBPcnRob2dyYXBoaWNDYW1lcmEoLTEsIDEsIDEsIC0xLCAwLCAxKTsKICB2YXIgZ2VvbWV0cnkgPSBuZXcgUGxhbmVCdWZmZXJHZW9tZXRyeSgyLCAyKTsKCiAgdmFyIEZ1bGxTY3JlZW5RdWFkID0gZnVuY3Rpb24gRnVsbFNjcmVlblF1YWQobWF0ZXJpYWwpIHsKICAgIHRoaXMuX21lc2ggPSBuZXcgTWVzaChnZW9tZXRyeSwgbWF0ZXJpYWwpOwogIH07CgogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGdWxsU2NyZWVuUXVhZC5wcm90b3R5cGUsICdtYXRlcmlhbCcsIHsKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fbWVzaC5tYXRlcmlhbDsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkgewogICAgICB0aGlzLl9tZXNoLm1hdGVyaWFsID0gdmFsdWU7CiAgICB9CiAgfSk7CiAgT2JqZWN0LmFzc2lnbihGdWxsU2NyZWVuUXVhZC5wcm90b3R5cGUsIHsKICAgIGRpc3Bvc2U6IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7CiAgICAgIHRoaXMuX21lc2guZ2VvbWV0cnkuZGlzcG9zZSgpOwogICAgfSwKICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKHJlbmRlcmVyKSB7CiAgICAgIHJlbmRlcmVyLnJlbmRlcih0aGlzLl9tZXNoLCBjYW1lcmEpOwogICAgfQogIH0pOwogIHJldHVybiBGdWxsU2NyZWVuUXVhZDsKfSgpOwoKZXhwb3J0IHsgRWZmZWN0Q29tcG9zZXIsIFBhc3MgfTs="},{"version":3,"sources":["E:/自己的项目/three_test/src/assets/examples/jsm/postprocessing/EffectComposer.js"],"names":["Clock","LinearFilter","Mesh","OrthographicCamera","PlaneBufferGeometry","RGBAFormat","Vector2","WebGLRenderTarget","CopyShader","ShaderPass","MaskPass","ClearMaskPass","EffectComposer","renderer","renderTarget","undefined","parameters","minFilter","magFilter","format","stencilBuffer","size","getSize","_pixelRatio","getPixelRatio","_width","width","_height","height","texture","name","renderTarget1","renderTarget2","clone","writeBuffer","readBuffer","renderToScreen","passes","console","error","copyPass","clock","Object","assign","prototype","swapBuffers","tmp","addPass","pass","push","setSize","insertPass","index","splice","isLastEnabledPass","passIndex","i","length","enabled","render","deltaTime","getDelta","currentRenderTarget","getRenderTarget","maskActive","il","needsSwap","context","getContext","stencil","state","buffers","setFunc","NOTEQUAL","EQUAL","setRenderTarget","reset","dispose","effectiveWidth","effectiveHeight","setPixelRatio","pixelRatio","Pass","clear","FullScreenQuad","camera","geometry","material","_mesh","defineProperty","get","set","value"],"mappings":"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","sourcesContent":["/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nimport {\n\tClock,\n\tLinearFilter,\n\tMesh,\n\tOrthographicCamera,\n\tPlaneBufferGeometry,\n\tRGBAFormat,\n\tVector2,\n\tWebGLRenderTarget\n} from \"../../../build/three.module.js\";\nimport { CopyShader } from \"../shaders/CopyShader.js\";\nimport { ShaderPass } from \"../postprocessing/ShaderPass.js\";\nimport { MaskPass } from \"../postprocessing/MaskPass.js\";\nimport { ClearMaskPass } from \"../postprocessing/MaskPass.js\";\n\nvar EffectComposer = function ( renderer, renderTarget ) {\n\n\tthis.renderer = renderer;\n\n\tif ( renderTarget === undefined ) {\n\n\t\tvar parameters = {\n\t\t\tminFilter: LinearFilter,\n\t\t\tmagFilter: LinearFilter,\n\t\t\tformat: RGBAFormat,\n\t\t\tstencilBuffer: false\n\t\t};\n\n\t\tvar size = renderer.getSize( new Vector2() );\n\t\tthis._pixelRatio = renderer.getPixelRatio();\n\t\tthis._width = size.width;\n\t\tthis._height = size.height;\n\n\t\trenderTarget = new WebGLRenderTarget( this._width * this._pixelRatio, this._height * this._pixelRatio, parameters );\n\t\trenderTarget.texture.name = 'EffectComposer.rt1';\n\n\t} else {\n\n\t\tthis._pixelRatio = 1;\n\t\tthis._width = renderTarget.width;\n\t\tthis._height = renderTarget.height;\n\n\t}\n\n\tthis.renderTarget1 = renderTarget;\n\tthis.renderTarget2 = renderTarget.clone();\n\tthis.renderTarget2.texture.name = 'EffectComposer.rt2';\n\n\tthis.writeBuffer = this.renderTarget1;\n\tthis.readBuffer = this.renderTarget2;\n\n\tthis.renderToScreen = true;\n\n\tthis.passes = [];\n\n\t// dependencies\n\n\tif ( CopyShader === undefined ) {\n\n\t\tconsole.error( 'THREE.EffectComposer relies on CopyShader' );\n\n\t}\n\n\tif ( ShaderPass === undefined ) {\n\n\t\tconsole.error( 'THREE.EffectComposer relies on ShaderPass' );\n\n\t}\n\n\tthis.copyPass = new ShaderPass( CopyShader );\n\n\tthis.clock = new Clock();\n\n};\n\nObject.assign( EffectComposer.prototype, {\n\n\tswapBuffers: function () {\n\n\t\tvar tmp = this.readBuffer;\n\t\tthis.readBuffer = this.writeBuffer;\n\t\tthis.writeBuffer = tmp;\n\n\t},\n\n\taddPass: function ( pass ) {\n\n\t\tthis.passes.push( pass );\n\t\tpass.setSize( this._width * this._pixelRatio, this._height * this._pixelRatio );\n\n\t},\n\n\tinsertPass: function ( pass, index ) {\n\n\t\tthis.passes.splice( index, 0, pass );\n\n\t},\n\n\tisLastEnabledPass: function ( passIndex ) {\n\n\t\tfor ( var i = passIndex + 1; i < this.passes.length; i ++ ) {\n\n\t\t\tif ( this.passes[ i ].enabled ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\trender: function ( deltaTime ) {\n\n\t\t// deltaTime value is in seconds\n\n\t\tif ( deltaTime === undefined ) {\n\n\t\t\tdeltaTime = this.clock.getDelta();\n\n\t\t}\n\n\t\tvar currentRenderTarget = this.renderer.getRenderTarget();\n\n\t\tvar maskActive = false;\n\n\t\tvar pass, i, il = this.passes.length;\n\n\t\tfor ( i = 0; i < il; i ++ ) {\n\n\t\t\tpass = this.passes[ i ];\n\n\t\t\tif ( pass.enabled === false ) continue;\n\n\t\t\tpass.renderToScreen = ( this.renderToScreen && this.isLastEnabledPass( i ) );\n\t\t\tpass.render( this.renderer, this.writeBuffer, this.readBuffer, deltaTime, maskActive );\n\n\t\t\tif ( pass.needsSwap ) {\n\n\t\t\t\tif ( maskActive ) {\n\n\t\t\t\t\tvar context = this.renderer.getContext();\n\t\t\t\t\tvar stencil = this.renderer.state.buffers.stencil;\n\n\t\t\t\t\t//context.stencilFunc( context.NOTEQUAL, 1, 0xffffffff );\n\t\t\t\t\tstencil.setFunc( context.NOTEQUAL, 1, 0xffffffff );\n\n\t\t\t\t\tthis.copyPass.render( this.renderer, this.writeBuffer, this.readBuffer, deltaTime );\n\n\t\t\t\t\t//context.stencilFunc( context.EQUAL, 1, 0xffffffff );\n\t\t\t\t\tstencil.setFunc( context.EQUAL, 1, 0xffffffff );\n\n\t\t\t\t}\n\n\t\t\t\tthis.swapBuffers();\n\n\t\t\t}\n\n\t\t\tif ( MaskPass !== undefined ) {\n\n\t\t\t\tif ( pass instanceof MaskPass ) {\n\n\t\t\t\t\tmaskActive = true;\n\n\t\t\t\t} else if ( pass instanceof ClearMaskPass ) {\n\n\t\t\t\t\tmaskActive = false;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.renderer.setRenderTarget( currentRenderTarget );\n\n\t},\n\n\treset: function ( renderTarget ) {\n\n\t\tif ( renderTarget === undefined ) {\n\n\t\t\tvar size = this.renderer.getSize( new Vector2() );\n\t\t\tthis._pixelRatio = this.renderer.getPixelRatio();\n\t\t\tthis._width = size.width;\n\t\t\tthis._height = size.height;\n\n\t\t\trenderTarget = this.renderTarget1.clone();\n\t\t\trenderTarget.setSize( this._width * this._pixelRatio, this._height * this._pixelRatio );\n\n\t\t}\n\n\t\tthis.renderTarget1.dispose();\n\t\tthis.renderTarget2.dispose();\n\t\tthis.renderTarget1 = renderTarget;\n\t\tthis.renderTarget2 = renderTarget.clone();\n\n\t\tthis.writeBuffer = this.renderTarget1;\n\t\tthis.readBuffer = this.renderTarget2;\n\n\t},\n\n\tsetSize: function ( width, height ) {\n\n\t\tthis._width = width;\n\t\tthis._height = height;\n\n\t\tvar effectiveWidth = this._width * this._pixelRatio;\n\t\tvar effectiveHeight = this._height * this._pixelRatio;\n\n\t\tthis.renderTarget1.setSize( effectiveWidth, effectiveHeight );\n\t\tthis.renderTarget2.setSize( effectiveWidth, effectiveHeight );\n\n\t\tfor ( var i = 0; i < this.passes.length; i ++ ) {\n\n\t\t\tthis.passes[ i ].setSize( effectiveWidth, effectiveHeight );\n\n\t\t}\n\n\t},\n\n\tsetPixelRatio: function ( pixelRatio ) {\n\n\t\tthis._pixelRatio = pixelRatio;\n\n\t\tthis.setSize( this._width, this._height );\n\n\t}\n\n} );\n\n\nvar Pass = function () {\n\n\t// if set to true, the pass is processed by the composer\n\tthis.enabled = true;\n\n\t// if set to true, the pass indicates to swap read and write buffer after rendering\n\tthis.needsSwap = true;\n\n\t// if set to true, the pass clears its buffer before rendering\n\tthis.clear = false;\n\n\t// if set to true, the result of the pass is rendered to screen. This is set automatically by EffectComposer.\n\tthis.renderToScreen = false;\n\n};\n\nObject.assign( Pass.prototype, {\n\n\tsetSize: function ( /* width, height */ ) {},\n\n\trender: function ( /* renderer, writeBuffer, readBuffer, deltaTime, maskActive */ ) {\n\n\t\tconsole.error( 'THREE.Pass: .render() must be implemented in derived pass.' );\n\n\t}\n\n} );\n\n// Helper for passes that need to fill the viewport with a single quad.\nPass.FullScreenQuad = ( function () {\n\n\tvar camera = new OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\n\tvar geometry = new PlaneBufferGeometry( 2, 2 );\n\n\tvar FullScreenQuad = function ( material ) {\n\n\t\tthis._mesh = new Mesh( geometry, material );\n\n\t};\n\n\tObject.defineProperty( FullScreenQuad.prototype, 'material', {\n\n\t\tget: function () {\n\n\t\t\treturn this._mesh.material;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._mesh.material = value;\n\n\t\t}\n\n\t} );\n\n\tObject.assign( FullScreenQuad.prototype, {\n\n\t\tdispose: function () {\n\n\t\t\tthis._mesh.geometry.dispose();\n\n\t\t},\n\n\t\trender: function ( renderer ) {\n\n\t\t\trenderer.render( this._mesh, camera );\n\n\t\t}\n\n\t} );\n\n\treturn FullScreenQuad;\n\n} )();\n\nexport { EffectComposer, Pass };\n"]}]}