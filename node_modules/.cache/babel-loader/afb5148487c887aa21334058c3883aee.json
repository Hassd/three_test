{"remainingRequest":"E:\\自己的项目\\three_test\\node_modules\\babel-loader\\lib\\index.js!E:\\自己的项目\\three_test\\src\\assets\\jsm\\loaders\\obj2\\shared\\MaterialHandler.js","dependencies":[{"path":"E:\\自己的项目\\three_test\\src\\assets\\jsm\\loaders\\obj2\\shared\\MaterialHandler.js","mtime":1581177669422},{"path":"E:\\自己的项目\\three_test\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\自己的项目\\three_test\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS50by1qc29uIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC50by1qc29uIjsKCi8qKgogKiBAYXV0aG9yIEthaSBTYWxtZW4gLyBodHRwczovL2thaXNhbG1lbi5kZQogKiBEZXZlbG9wbWVudCByZXBvc2l0b3J5OiBodHRwczovL2dpdGh1Yi5jb20va2Fpc2FsbWVuL1dXT0JKTG9hZGVyCiAqLwppbXBvcnQgeyBMaW5lQmFzaWNNYXRlcmlhbCwgTWF0ZXJpYWxMb2FkZXIsIE1lc2hTdGFuZGFyZE1hdGVyaWFsLCBQb2ludHNNYXRlcmlhbCwgVmVydGV4Q29sb3JzIH0gZnJvbSAiLi4vLi4vLi4vLi4vanMvdGhyZWUubW9kdWxlLmpzIjsKCnZhciBNYXRlcmlhbEhhbmRsZXIgPSBmdW5jdGlvbiBNYXRlcmlhbEhhbmRsZXIoKSB7CiAgdGhpcy5sb2dnaW5nID0gewogICAgZW5hYmxlZDogZmFsc2UsCiAgICBkZWJ1ZzogZmFsc2UKICB9OwogIHRoaXMuY2FsbGJhY2tzID0gewogICAgb25Mb2FkTWF0ZXJpYWxzOiBudWxsCiAgfTsKICB0aGlzLm1hdGVyaWFscyA9IHt9Owp9OwoKTWF0ZXJpYWxIYW5kbGVyLnByb3RvdHlwZSA9IHsKICBjb25zdHJ1Y3RvcjogTWF0ZXJpYWxIYW5kbGVyLAoKICAvKioKICAgKiBFbmFibGUgb3IgZGlzYWJsZSBsb2dnaW5nIGluIGdlbmVyYWwgKGV4Y2VwdCB3YXJuIGFuZCBlcnJvciksIHBsdXMgZW5hYmxlIG9yIGRpc2FibGUgZGVidWcgbG9nZ2luZy4KICAgKgogICAqIEBwYXJhbSB7Ym9vbGVhbn0gZW5hYmxlZCBUcnVlIG9yIGZhbHNlLgogICAqIEBwYXJhbSB7Ym9vbGVhbn0gZGVidWcgVHJ1ZSBvciBmYWxzZS4KICAgKi8KICBzZXRMb2dnaW5nOiBmdW5jdGlvbiBzZXRMb2dnaW5nKGVuYWJsZWQsIGRlYnVnKSB7CiAgICB0aGlzLmxvZ2dpbmcuZW5hYmxlZCA9IGVuYWJsZWQgPT09IHRydWU7CiAgICB0aGlzLmxvZ2dpbmcuZGVidWcgPSBkZWJ1ZyA9PT0gdHJ1ZTsKICB9LAogIF9zZXRDYWxsYmFja3M6IGZ1bmN0aW9uIF9zZXRDYWxsYmFja3Mob25Mb2FkTWF0ZXJpYWxzKSB7CiAgICBpZiAob25Mb2FkTWF0ZXJpYWxzICE9PSB1bmRlZmluZWQgJiYgb25Mb2FkTWF0ZXJpYWxzICE9PSBudWxsICYmIG9uTG9hZE1hdGVyaWFscyBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7CiAgICAgIHRoaXMuY2FsbGJhY2tzLm9uTG9hZE1hdGVyaWFscyA9IG9uTG9hZE1hdGVyaWFsczsKICAgIH0KICB9LAoKICAvKioKICAgKiBDcmVhdGVzIGRlZmF1bHQgbWF0ZXJpYWxzIGFuZCBhZGRzIHRoZW0gdG8gdGhlIG1hdGVyaWFscyBvYmplY3QuCiAgICoKICAgKiBAcGFyYW0gb3ZlcnJpZGVFeGlzdGluZyBib29sZWFuIE92ZXJyaWRlIGV4aXN0aW5nIG1hdGVyaWFsCiAgICovCiAgY3JlYXRlRGVmYXVsdE1hdGVyaWFsczogZnVuY3Rpb24gY3JlYXRlRGVmYXVsdE1hdGVyaWFscyhvdmVycmlkZUV4aXN0aW5nKSB7CiAgICB2YXIgZGVmYXVsdE1hdGVyaWFsID0gbmV3IE1lc2hTdGFuZGFyZE1hdGVyaWFsKHsKICAgICAgY29sb3I6IDB4RENGMUZGCiAgICB9KTsKICAgIGRlZmF1bHRNYXRlcmlhbC5uYW1lID0gJ2RlZmF1bHRNYXRlcmlhbCc7CiAgICB2YXIgZGVmYXVsdFZlcnRleENvbG9yTWF0ZXJpYWwgPSBuZXcgTWVzaFN0YW5kYXJkTWF0ZXJpYWwoewogICAgICBjb2xvcjogMHhEQ0YxRkYKICAgIH0pOwogICAgZGVmYXVsdFZlcnRleENvbG9yTWF0ZXJpYWwubmFtZSA9ICdkZWZhdWx0VmVydGV4Q29sb3JNYXRlcmlhbCc7CiAgICBkZWZhdWx0VmVydGV4Q29sb3JNYXRlcmlhbC52ZXJ0ZXhDb2xvcnMgPSBWZXJ0ZXhDb2xvcnM7CiAgICB2YXIgZGVmYXVsdExpbmVNYXRlcmlhbCA9IG5ldyBMaW5lQmFzaWNNYXRlcmlhbCgpOwogICAgZGVmYXVsdExpbmVNYXRlcmlhbC5uYW1lID0gJ2RlZmF1bHRMaW5lTWF0ZXJpYWwnOwogICAgdmFyIGRlZmF1bHRQb2ludE1hdGVyaWFsID0gbmV3IFBvaW50c01hdGVyaWFsKHsKICAgICAgc2l6ZTogMC4xCiAgICB9KTsKICAgIGRlZmF1bHRQb2ludE1hdGVyaWFsLm5hbWUgPSAnZGVmYXVsdFBvaW50TWF0ZXJpYWwnOwogICAgdmFyIHJ1bnRpbWVNYXRlcmlhbHMgPSB7fTsKICAgIHJ1bnRpbWVNYXRlcmlhbHNbZGVmYXVsdE1hdGVyaWFsLm5hbWVdID0gZGVmYXVsdE1hdGVyaWFsOwogICAgcnVudGltZU1hdGVyaWFsc1tkZWZhdWx0VmVydGV4Q29sb3JNYXRlcmlhbC5uYW1lXSA9IGRlZmF1bHRWZXJ0ZXhDb2xvck1hdGVyaWFsOwogICAgcnVudGltZU1hdGVyaWFsc1tkZWZhdWx0TGluZU1hdGVyaWFsLm5hbWVdID0gZGVmYXVsdExpbmVNYXRlcmlhbDsKICAgIHJ1bnRpbWVNYXRlcmlhbHNbZGVmYXVsdFBvaW50TWF0ZXJpYWwubmFtZV0gPSBkZWZhdWx0UG9pbnRNYXRlcmlhbDsKICAgIHRoaXMuYWRkTWF0ZXJpYWxzKHJ1bnRpbWVNYXRlcmlhbHMsIG92ZXJyaWRlRXhpc3RpbmcpOwogIH0sCgogIC8qKgogICAqIFVwZGF0ZXMgdGhlIG1hdGVyaWFscyB3aXRoIGNvbnRhaW5lZCBtYXRlcmlhbCBvYmplY3RzIChzeW5jKSBvciBmcm9tIGFsdGVyYXRpb24gaW5zdHJ1Y3Rpb25zIChhc3luYykuCiAgICoKICAgKiBAcGFyYW0ge09iamVjdH0gbWF0ZXJpYWxQYXlsb2FkIE1hdGVyaWFsIHVwZGF0ZSBpbnN0cnVjdGlvbnMKICAgKiBAcmV0dXJucyB7T2JqZWN0fSBNYXAgb2Yge0BsaW5rIE1hdGVyaWFsfQogICAqLwogIGFkZFBheWxvYWRNYXRlcmlhbHM6IGZ1bmN0aW9uIGFkZFBheWxvYWRNYXRlcmlhbHMobWF0ZXJpYWxQYXlsb2FkKSB7CiAgICB2YXIgbWF0ZXJpYWwsIG1hdGVyaWFsTmFtZTsKICAgIHZhciBtYXRlcmlhbENsb25lSW5zdHJ1Y3Rpb25zID0gbWF0ZXJpYWxQYXlsb2FkLm1hdGVyaWFscy5tYXRlcmlhbENsb25lSW5zdHJ1Y3Rpb25zOwogICAgdmFyIG5ld01hdGVyaWFscyA9IHt9OwoKICAgIGlmIChtYXRlcmlhbENsb25lSW5zdHJ1Y3Rpb25zICE9PSB1bmRlZmluZWQgJiYgbWF0ZXJpYWxDbG9uZUluc3RydWN0aW9ucyAhPT0gbnVsbCkgewogICAgICB2YXIgbWF0ZXJpYWxOYW1lT3JnID0gbWF0ZXJpYWxDbG9uZUluc3RydWN0aW9ucy5tYXRlcmlhbE5hbWVPcmc7CiAgICAgIG1hdGVyaWFsTmFtZU9yZyA9IG1hdGVyaWFsTmFtZU9yZyAhPT0gdW5kZWZpbmVkICYmIG1hdGVyaWFsTmFtZU9yZyAhPT0gbnVsbCA/IG1hdGVyaWFsTmFtZU9yZyA6ICIiOwogICAgICB2YXIgbWF0ZXJpYWxPcmcgPSB0aGlzLm1hdGVyaWFsc1ttYXRlcmlhbE5hbWVPcmddOwoKICAgICAgaWYgKG1hdGVyaWFsT3JnKSB7CiAgICAgICAgbWF0ZXJpYWwgPSBtYXRlcmlhbE9yZy5jbG9uZSgpOwogICAgICAgIG1hdGVyaWFsTmFtZSA9IG1hdGVyaWFsQ2xvbmVJbnN0cnVjdGlvbnMubWF0ZXJpYWxOYW1lOwogICAgICAgIG1hdGVyaWFsLm5hbWUgPSBtYXRlcmlhbE5hbWU7CiAgICAgICAgT2JqZWN0LmFzc2lnbihtYXRlcmlhbCwgbWF0ZXJpYWxDbG9uZUluc3RydWN0aW9ucy5tYXRlcmlhbFByb3BlcnRpZXMpOwogICAgICAgIHRoaXMubWF0ZXJpYWxzW21hdGVyaWFsTmFtZV0gPSBtYXRlcmlhbDsKICAgICAgICBuZXdNYXRlcmlhbHNbbWF0ZXJpYWxOYW1lXSA9IG1hdGVyaWFsOwogICAgICB9IGVsc2UgewogICAgICAgIGlmICh0aGlzLmxvZ2dpbmcuZW5hYmxlZCkgewogICAgICAgICAgY29uc29sZS5pbmZvKCdSZXF1ZXN0ZWQgbWF0ZXJpYWwgIicgKyBtYXRlcmlhbE5hbWVPcmcgKyAnIiBpcyBub3QgYXZhaWxhYmxlIScpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHZhciBtYXRlcmlhbHMgPSBtYXRlcmlhbFBheWxvYWQubWF0ZXJpYWxzLnNlcmlhbGl6ZWRNYXRlcmlhbHM7CgogICAgaWYgKG1hdGVyaWFscyAhPT0gdW5kZWZpbmVkICYmIG1hdGVyaWFscyAhPT0gbnVsbCAmJiBPYmplY3Qua2V5cyhtYXRlcmlhbHMpLmxlbmd0aCA+IDApIHsKICAgICAgdmFyIGxvYWRlciA9IG5ldyBNYXRlcmlhbExvYWRlcigpOwogICAgICB2YXIgbWF0ZXJpYWxKc29uOwoKICAgICAgZm9yIChtYXRlcmlhbE5hbWUgaW4gbWF0ZXJpYWxzKSB7CiAgICAgICAgbWF0ZXJpYWxKc29uID0gbWF0ZXJpYWxzW21hdGVyaWFsTmFtZV07CgogICAgICAgIGlmIChtYXRlcmlhbEpzb24gIT09IHVuZGVmaW5lZCAmJiBtYXRlcmlhbEpzb24gIT09IG51bGwpIHsKICAgICAgICAgIG1hdGVyaWFsID0gbG9hZGVyLnBhcnNlKG1hdGVyaWFsSnNvbik7CgogICAgICAgICAgaWYgKHRoaXMubG9nZ2luZy5lbmFibGVkKSB7CiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnRGUtc2VyaWFsaXplZCBtYXRlcmlhbCB3aXRoIG5hbWUgIicgKyBtYXRlcmlhbE5hbWUgKyAnIiB3aWxsIGJlIGFkZGVkLicpOwogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMubWF0ZXJpYWxzW21hdGVyaWFsTmFtZV0gPSBtYXRlcmlhbDsKICAgICAgICAgIG5ld01hdGVyaWFsc1ttYXRlcmlhbE5hbWVdID0gbWF0ZXJpYWw7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgbWF0ZXJpYWxzID0gbWF0ZXJpYWxQYXlsb2FkLm1hdGVyaWFscy5ydW50aW1lTWF0ZXJpYWxzOwogICAgbmV3TWF0ZXJpYWxzID0gdGhpcy5hZGRNYXRlcmlhbHMobWF0ZXJpYWxzLCB0cnVlLCBuZXdNYXRlcmlhbHMpOwogICAgcmV0dXJuIG5ld01hdGVyaWFsczsKICB9LAoKICAvKioKICAgKiBTZXQgbWF0ZXJpYWxzIGxvYWRlZCBieSBhbnkgc3VwcGxpZXIgb2YgYW4gQXJyYXkgb2Yge0BsaW5rIE1hdGVyaWFsfS4KICAgKgogICAqIEBwYXJhbSBtYXRlcmlhbHMgT2JqZWN0IHdpdGggbmFtZWQge0BsaW5rIE1hdGVyaWFsfQogICAqIEBwYXJhbSBvdmVycmlkZUV4aXN0aW5nIGJvb2xlYW4gT3ZlcnJpZGUgZXhpc3RpbmcgbWF0ZXJpYWwKICAgKiBAcGFyYW0gbmV3TWF0ZXJpYWxzIFtPYmplY3RdIHdpdGggbmFtZWQge0BsaW5rIE1hdGVyaWFsfQogICAqLwogIGFkZE1hdGVyaWFsczogZnVuY3Rpb24gYWRkTWF0ZXJpYWxzKG1hdGVyaWFscywgb3ZlcnJpZGVFeGlzdGluZywgbmV3TWF0ZXJpYWxzKSB7CiAgICBpZiAobmV3TWF0ZXJpYWxzID09PSB1bmRlZmluZWQgfHwgbmV3TWF0ZXJpYWxzID09PSBudWxsKSB7CiAgICAgIG5ld01hdGVyaWFscyA9IHt9OwogICAgfQoKICAgIGlmIChtYXRlcmlhbHMgIT09IHVuZGVmaW5lZCAmJiBtYXRlcmlhbHMgIT09IG51bGwgJiYgT2JqZWN0LmtleXMobWF0ZXJpYWxzKS5sZW5ndGggPiAwKSB7CiAgICAgIHZhciBtYXRlcmlhbDsKICAgICAgdmFyIGV4aXN0aW5nTWF0ZXJpYWw7CiAgICAgIHZhciBhZGQ7CgogICAgICBmb3IgKHZhciBtYXRlcmlhbE5hbWUgaW4gbWF0ZXJpYWxzKSB7CiAgICAgICAgbWF0ZXJpYWwgPSBtYXRlcmlhbHNbbWF0ZXJpYWxOYW1lXTsKICAgICAgICBhZGQgPSBvdmVycmlkZUV4aXN0aW5nID09PSB0cnVlOwoKICAgICAgICBpZiAoIWFkZCkgewogICAgICAgICAgZXhpc3RpbmdNYXRlcmlhbCA9IHRoaXMubWF0ZXJpYWxzW21hdGVyaWFsTmFtZV07CiAgICAgICAgICBhZGQgPSBleGlzdGluZ01hdGVyaWFsID09PSBudWxsIHx8IGV4aXN0aW5nTWF0ZXJpYWwgPT09IHVuZGVmaW5lZDsKICAgICAgICB9CgogICAgICAgIGlmIChhZGQpIHsKICAgICAgICAgIHRoaXMubWF0ZXJpYWxzW21hdGVyaWFsTmFtZV0gPSBtYXRlcmlhbDsKICAgICAgICAgIG5ld01hdGVyaWFsc1ttYXRlcmlhbE5hbWVdID0gbWF0ZXJpYWw7CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5sb2dnaW5nLmVuYWJsZWQgJiYgdGhpcy5sb2dnaW5nLmRlYnVnKSB7CiAgICAgICAgICBjb25zb2xlLmluZm8oJ01hdGVyaWFsIHdpdGggbmFtZSAiJyArIG1hdGVyaWFsTmFtZSArICciIHdhcyBhZGRlZC4nKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBpZiAodGhpcy5jYWxsYmFja3Mub25Mb2FkTWF0ZXJpYWxzKSB7CiAgICAgIHRoaXMuY2FsbGJhY2tzLm9uTG9hZE1hdGVyaWFscyhuZXdNYXRlcmlhbHMpOwogICAgfQoKICAgIHJldHVybiBuZXdNYXRlcmlhbHM7CiAgfSwKCiAgLyoqCiAgICogUmV0dXJucyB0aGUgbWFwcGluZyBvYmplY3Qgb2YgbWF0ZXJpYWwgbmFtZSBhbmQgY29ycmVzcG9uZGluZyBtYXRlcmlhbC4KICAgKgogICAqIEByZXR1cm5zIHtPYmplY3R9IE1hcCBvZiB7QGxpbmsgTWF0ZXJpYWx9CiAgICovCiAgZ2V0TWF0ZXJpYWxzOiBmdW5jdGlvbiBnZXRNYXRlcmlhbHMoKSB7CiAgICByZXR1cm4gdGhpcy5tYXRlcmlhbHM7CiAgfSwKCiAgLyoqCiAgICoKICAgKiBAcGFyYW0ge1N0cmluZ30gbWF0ZXJpYWxOYW1lCiAgICogQHJldHVybnMge01hdGVyaWFsfQogICAqLwogIGdldE1hdGVyaWFsOiBmdW5jdGlvbiBnZXRNYXRlcmlhbChtYXRlcmlhbE5hbWUpIHsKICAgIHJldHVybiB0aGlzLm1hdGVyaWFsc1ttYXRlcmlhbE5hbWVdOwogIH0sCgogIC8qKgogICAqIFJldHVybnMgdGhlIG1hcHBpbmcgb2JqZWN0IG9mIG1hdGVyaWFsIG5hbWUgYW5kIGNvcnJlc3BvbmRpbmcganNvbmlmaWVkIG1hdGVyaWFsLgogICAqCiAgICogQHJldHVybnMge09iamVjdH0gTWFwIG9mIE1hdGVyaWFscyBpbiBKU09OIHJlcHJlc2VudGF0aW9uCiAgICovCiAgZ2V0TWF0ZXJpYWxzSlNPTjogZnVuY3Rpb24gZ2V0TWF0ZXJpYWxzSlNPTigpIHsKICAgIHZhciBtYXRlcmlhbHNKU09OID0ge307CiAgICB2YXIgbWF0ZXJpYWw7CgogICAgZm9yICh2YXIgbWF0ZXJpYWxOYW1lIGluIHRoaXMubWF0ZXJpYWxzKSB7CiAgICAgIG1hdGVyaWFsID0gdGhpcy5tYXRlcmlhbHNbbWF0ZXJpYWxOYW1lXTsKICAgICAgbWF0ZXJpYWxzSlNPTlttYXRlcmlhbE5hbWVdID0gbWF0ZXJpYWwudG9KU09OKCk7CiAgICB9CgogICAgcmV0dXJuIG1hdGVyaWFsc0pTT047CiAgfSwKCiAgLyoqCiAgICogUmVtb3ZlcyBhbGwgbWF0ZXJpYWxzCiAgICovCiAgY2xlYXJNYXRlcmlhbHM6IGZ1bmN0aW9uIGNsZWFyTWF0ZXJpYWxzKCkgewogICAgdGhpcy5tYXRlcmlhbHMgPSB7fTsKICB9Cn07CmV4cG9ydCB7IE1hdGVyaWFsSGFuZGxlciB9Ow=="},{"version":3,"sources":["E:/自己的项目/three_test/src/assets/jsm/loaders/obj2/shared/MaterialHandler.js"],"names":["LineBasicMaterial","MaterialLoader","MeshStandardMaterial","PointsMaterial","VertexColors","MaterialHandler","logging","enabled","debug","callbacks","onLoadMaterials","materials","prototype","constructor","setLogging","_setCallbacks","undefined","Function","createDefaultMaterials","overrideExisting","defaultMaterial","color","name","defaultVertexColorMaterial","vertexColors","defaultLineMaterial","defaultPointMaterial","size","runtimeMaterials","addMaterials","addPayloadMaterials","materialPayload","material","materialName","materialCloneInstructions","newMaterials","materialNameOrg","materialOrg","clone","Object","assign","materialProperties","console","info","serializedMaterials","keys","length","loader","materialJson","parse","existingMaterial","add","getMaterials","getMaterial","getMaterialsJSON","materialsJSON","toJSON","clearMaterials"],"mappings":"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","sourcesContent":["/**\n * @author Kai Salmen / https://kaisalmen.de\n * Development repository: https://github.com/kaisalmen/WWOBJLoader\n */\n\nimport {\n    LineBasicMaterial,\n    MaterialLoader,\n    MeshStandardMaterial,\n    PointsMaterial,\n    VertexColors\n} from \"../../../../js/three.module.js\";\n\n\nconst MaterialHandler = function () {\n\n    this.logging = {\n        enabled: false,\n        debug: false\n    };\n\n    this.callbacks = {\n        onLoadMaterials: null\n    };\n    this.materials = {};\n\n};\n\nMaterialHandler.prototype = {\n\n    constructor: MaterialHandler,\n\n\t/**\n\t * Enable or disable logging in general (except warn and error), plus enable or disable debug logging.\n\t *\n\t * @param {boolean} enabled True or false.\n\t * @param {boolean} debug True or false.\n\t */\n    setLogging: function (enabled, debug) {\n\n        this.logging.enabled = enabled === true;\n        this.logging.debug = debug === true;\n\n    },\n\n    _setCallbacks: function (onLoadMaterials) {\n\n        if (onLoadMaterials !== undefined && onLoadMaterials !== null && onLoadMaterials instanceof Function) {\n\n            this.callbacks.onLoadMaterials = onLoadMaterials;\n\n        }\n\n    },\n\n\t/**\n\t * Creates default materials and adds them to the materials object.\n\t *\n\t * @param overrideExisting boolean Override existing material\n\t */\n    createDefaultMaterials: function (overrideExisting) {\n\n        let defaultMaterial = new MeshStandardMaterial({ color: 0xDCF1FF });\n        defaultMaterial.name = 'defaultMaterial';\n\n        let defaultVertexColorMaterial = new MeshStandardMaterial({ color: 0xDCF1FF });\n        defaultVertexColorMaterial.name = 'defaultVertexColorMaterial';\n        defaultVertexColorMaterial.vertexColors = VertexColors;\n\n        let defaultLineMaterial = new LineBasicMaterial();\n        defaultLineMaterial.name = 'defaultLineMaterial';\n\n        let defaultPointMaterial = new PointsMaterial({ size: 0.1 });\n        defaultPointMaterial.name = 'defaultPointMaterial';\n\n        let runtimeMaterials = {};\n        runtimeMaterials[defaultMaterial.name] = defaultMaterial;\n        runtimeMaterials[defaultVertexColorMaterial.name] = defaultVertexColorMaterial;\n        runtimeMaterials[defaultLineMaterial.name] = defaultLineMaterial;\n        runtimeMaterials[defaultPointMaterial.name] = defaultPointMaterial;\n\n        this.addMaterials(runtimeMaterials, overrideExisting);\n\n    },\n\n\t/**\n\t * Updates the materials with contained material objects (sync) or from alteration instructions (async).\n\t *\n\t * @param {Object} materialPayload Material update instructions\n\t * @returns {Object} Map of {@link Material}\n\t */\n    addPayloadMaterials: function (materialPayload) {\n\n        let material, materialName;\n        let materialCloneInstructions = materialPayload.materials.materialCloneInstructions;\n        let newMaterials = {};\n\n        if (materialCloneInstructions !== undefined && materialCloneInstructions !== null) {\n\n            let materialNameOrg = materialCloneInstructions.materialNameOrg;\n            materialNameOrg = (materialNameOrg !== undefined && materialNameOrg !== null) ? materialNameOrg : \"\";\n            let materialOrg = this.materials[materialNameOrg];\n            if (materialOrg) {\n\n                material = materialOrg.clone();\n\n                materialName = materialCloneInstructions.materialName;\n                material.name = materialName;\n\n                Object.assign(material, materialCloneInstructions.materialProperties);\n\n                this.materials[materialName] = material;\n                newMaterials[materialName] = material;\n\n            } else {\n\n                if (this.logging.enabled) {\n\n                    console.info('Requested material \"' + materialNameOrg + '\" is not available!');\n\n                }\n\n            }\n\n        }\n\n        let materials = materialPayload.materials.serializedMaterials;\n        if (materials !== undefined && materials !== null && Object.keys(materials).length > 0) {\n\n            let loader = new MaterialLoader();\n            let materialJson;\n            for (materialName in materials) {\n\n                materialJson = materials[materialName];\n                if (materialJson !== undefined && materialJson !== null) {\n\n                    material = loader.parse(materialJson);\n                    if (this.logging.enabled) {\n\n                        console.info('De-serialized material with name \"' + materialName + '\" will be added.');\n\n                    }\n                    this.materials[materialName] = material;\n                    newMaterials[materialName] = material;\n\n                }\n\n            }\n\n        }\n        materials = materialPayload.materials.runtimeMaterials;\n        newMaterials = this.addMaterials(materials, true, newMaterials);\n\n        return newMaterials;\n\n    },\n\n\t/**\n\t * Set materials loaded by any supplier of an Array of {@link Material}.\n\t *\n\t * @param materials Object with named {@link Material}\n\t * @param overrideExisting boolean Override existing material\n\t * @param newMaterials [Object] with named {@link Material}\n\t */\n    addMaterials: function (materials, overrideExisting, newMaterials) {\n\n        if (newMaterials === undefined || newMaterials === null) {\n\n            newMaterials = {};\n\n        }\n        if (materials !== undefined && materials !== null && Object.keys(materials).length > 0) {\n\n            let material;\n            let existingMaterial;\n            let add;\n            for (let materialName in materials) {\n\n                material = materials[materialName];\n                add = overrideExisting === true;\n                if (!add) {\n\n                    existingMaterial = this.materials[materialName];\n                    add = (existingMaterial === null || existingMaterial === undefined);\n\n                }\n                if (add) {\n\n                    this.materials[materialName] = material;\n                    newMaterials[materialName] = material;\n\n                }\n                if (this.logging.enabled && this.logging.debug) {\n\n                    console.info('Material with name \"' + materialName + '\" was added.');\n\n                }\n\n            }\n\n        }\n\n        if (this.callbacks.onLoadMaterials) {\n\n            this.callbacks.onLoadMaterials(newMaterials);\n\n        }\n        return newMaterials;\n\n    },\n\n\t/**\n\t * Returns the mapping object of material name and corresponding material.\n\t *\n\t * @returns {Object} Map of {@link Material}\n\t */\n    getMaterials: function () {\n\n        return this.materials;\n\n    },\n\n\t/**\n\t *\n\t * @param {String} materialName\n\t * @returns {Material}\n\t */\n    getMaterial: function (materialName) {\n\n        return this.materials[materialName];\n\n    },\n\n\t/**\n\t * Returns the mapping object of material name and corresponding jsonified material.\n\t *\n\t * @returns {Object} Map of Materials in JSON representation\n\t */\n    getMaterialsJSON: function () {\n\n        let materialsJSON = {};\n        let material;\n        for (let materialName in this.materials) {\n\n            material = this.materials[materialName];\n            materialsJSON[materialName] = material.toJSON();\n\n        }\n\n        return materialsJSON;\n\n    },\n\n\t/**\n\t * Removes all materials\n\t */\n    clearMaterials: function () {\n\n        this.materials = {};\n\n    }\n\n};\n\nexport { MaterialHandler };\n"]}]}