{"remainingRequest":"E:\\自己的项目\\three_test\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\自己的项目\\three_test\\src\\views\\Scene\\test2.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\自己的项目\\three_test\\src\\views\\Scene\\test2.vue","mtime":1581303423603},{"path":"E:\\自己的项目\\three_test\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\自己的项目\\three_test\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\自己的项目\\three_test\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\自己的项目\\three_test\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgKiBhcyBUSFJFRSBmcm9tICJAL2Fzc2V0cy9idWlsZC90aHJlZS5tb2R1bGUiOw0KaW1wb3J0IHsgVFdFRU4gfSBmcm9tICJAL2Fzc2V0cy9leGFtcGxlcy9qc20vbGlicy90d2Vlbi5tb2R1bGUubWluIjsNCg0KaW1wb3J0IHsgR1VJIH0gZnJvbSAiQC9hc3NldHMvZXhhbXBsZXMvanNtL2xpYnMvZGF0Lmd1aS5tb2R1bGUuanMiOw0KDQppbXBvcnQgeyBFZmZlY3RDb21wb3NlciB9IGZyb20gIkAvYXNzZXRzL2V4YW1wbGVzL2pzbS9wb3N0cHJvY2Vzc2luZy9FZmZlY3RDb21wb3Nlci5qcyI7DQppbXBvcnQgeyBSZW5kZXJQYXNzIH0gZnJvbSAiQC9hc3NldHMvZXhhbXBsZXMvanNtL3Bvc3Rwcm9jZXNzaW5nL1JlbmRlclBhc3MuanMiOw0KaW1wb3J0IHsgVW5yZWFsQmxvb21QYXNzIH0gZnJvbSAiQC9hc3NldHMvZXhhbXBsZXMvanNtL3Bvc3Rwcm9jZXNzaW5nL1VucmVhbEJsb29tUGFzcy5qcyI7DQoNCmltcG9ydCBteXRocmVlIGZyb20gIkAvc2VydmljZS90aHJlZSI7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgICBkYXRhKCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgY29udGFpbmVyOiBudWxsLA0KICAgICAgICAgICAgcmVuZGVyZXI6IG51bGwsDQogICAgICAgICAgICBjYW1lcmE6IG51bGwsDQogICAgICAgICAgICBzY2VuZTogbnVsbCwNCiAgICAgICAgICAgIGxpZ2h0OiBudWxsLA0KICAgICAgICAgICAgY29udHJvbHM6IG51bGwsDQogICAgICAgICAgICBjb21wb3NlcjogbnVsbCwNCiAgICAgICAgICAgIHJheWNhc3RlcjogbnVsbCwNCiAgICAgICAgICAgIG1vdXNlOiBudWxsLA0KICAgICAgICAgICAgcHJvY2VzczogcHJvY2Vzcy5lbnYuQkFTRV9VUkwNCiAgICAgICAgfTsNCiAgICB9LA0KICAgIGJlZm9yZURlc3Ryb3koKSB7DQogICAgICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNvbnRhaW5lciIpKSB7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgdGhpcy5zY2VuZS5jaGlsZHJlbi5mb3JFYWNoKChkYXRhLCBpbmRleCkgPT4gew0KICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YSk7DQogICAgICAgICAgICBpZiAoZGF0YS50eXBlID09ICJHcm91cCIpIHsNCiAgICAgICAgICAgICAgICBkYXRhLnRyYXZlcnNlKGZ1bmN0aW9uKG9iaikgew0KICAgICAgICAgICAgICAgICAgICBpZiAob2JqLnR5cGUgPT09ICJNZXNoIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgb2JqLmdlb21ldHJ5LmRpc3Bvc2UoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmoubWF0ZXJpYWwubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLm1hdGVyaWFsLmZvckVhY2gob2JqMiA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iajIuZGlzcG9zZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmoubWF0ZXJpYWwuZGlzcG9zZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5yZW1vdmUoZGF0YSk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUucmVtb3ZlKGRhdGEpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICAgICAgdGhpcy5pbml0VGhyZWUgPSBudWxsOw0KICAgICAgICB0aGlzLmluaXRDYW1lcmEgPSBudWxsOw0KICAgICAgICB0aGlzLmluaXRTY2VuZSA9IG51bGw7DQogICAgICAgIHRoaXMuaW5pdExpZ2h0ID0gbnVsbDsNCiAgICAgICAgdGhpcy5pbml0R2VvbWV0cnkgPSBudWxsOw0KICAgICAgICB0aGlzLmFuaW1hdGUgPSBudWxsOw0KICAgICAgICB0aGlzLmluaXRDb250cm9scyA9IG51bGw7DQogICAgICAgIHRoaXMuaW5pdFJheWNhc3RlciA9IG51bGw7DQogICAgICAgIHRoaXMuaW5pdE91dGxpbmUgPSBudWxsOw0KICAgICAgICB0aGlzLmFkZExpbmUgPSBudWxsOw0KICAgICAgICB0aGlzLnNldFNwcml0ZSA9IG51bGw7DQogICAgICAgIHRoaXMuc2V0TGFiZWwgPSBudWxsOw0KDQogICAgICAgIC8v5Y+Y6YePDQogICAgICAgIHRoaXMuY29udGFpbmVyID0gbnVsbDsNCiAgICAgICAgdGhpcy5jYW1lcmEgPSBudWxsOw0KICAgICAgICB0aGlzLnNjZW5lID0gbnVsbDsNCiAgICAgICAgdGhpcy5yZW5kZXJlciA9IG51bGw7DQogICAgICAgIHRoaXMubWVzaCA9IG51bGw7DQogICAgICAgIHRoaXMubGlnaHQgPSBudWxsOw0KICAgICAgICB0aGlzLmNsb2NrID0gbnVsbDsNCiAgICAgICAgdGhpcy5jb250cm9scyA9IG51bGw7DQogICAgICAgIHRoaXMubWVzaDEgPSBudWxsOw0KICAgICAgICB0aGlzLm1peGVyMSA9IG51bGw7DQogICAgICAgIHRoaXMucmF5Y2FzdGVyID0gbnVsbDsNCiAgICAgICAgdGhpcy5tb3VzZSA9IG51bGw7DQoNCiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoImNsaWNrIiwgdGhpcy5vbmNsaWtjKTsNCiAgICB9LA0KICAgIG1vdW50ZWQoKSB7DQogICAgICAgIGxldCB0aHJlZSA9IG5ldyBteXRocmVlKHsNCiAgICAgICAgICAgIGlkOiAiY29udGFpbmVyIiwNCiAgICAgICAgICAgIHNob3dIZWxwZXI6IHRydWUsDQogICAgICAgICAgICBzaG93U3RhdHM6IHRydWUNCiAgICAgICAgfSk7DQoNCiAgICAgICAgbGV0IG9iaiA9IHRocmVlLmluaXQoKTsNCg0KICAgICAgICB0aGlzLmNvbnRhaW5lciA9IG9iai5jb250YWluZXI7DQogICAgICAgIHRoaXMucmVuZGVyZXIgPSBvYmoucmVuZGVyZXI7IC8v5riy5p+T5ZmoDQogICAgICAgIHRoaXMuY2FtZXJhID0gb2JqLmNhbWVyYTsgLy/nm7jmnLoNCiAgICAgICAgdGhpcy5zY2VuZSA9IG9iai5zY2VuZTsgLy/lnLrmma8NCiAgICAgICAgdGhpcy5saWdodCA9IG9iai5saWdodDsgLy/lhYnmupANCiAgICAgICAgdGhpcy5jb250cm9scyA9IG9iai5jb250cm9sczsgLy/nm7jmnLrml4vovazmj5Lku7YNCiAgICAgICAgdGhpcy5jb21wb3NlciA9IG9iai5jb21wb3NlcjsgLy/lkI7mnJ/lpITnkIYNCg0KICAgICAgICB0aGlzLmluaXRSYXljYXN0ZXIoKTsNCiAgICAgICAgdGhpcy5pbml0R2VvbWV0cnkoKTsNCiAgICAgICAgdGhyZWUuYW5pbWF0ZSgpOw0KDQogICAgICAgIHRoaXMuaW5pdEJhY2tncm91bmQoKTsNCiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgdGhpcy5vbmNsaWtjLCBmYWxzZSk7DQogICAgfSwNCiAgICBtZXRob2RzOiB7DQogICAgICAgIGluaXRSYXljYXN0ZXIoKSB7DQogICAgICAgICAgICAvL+WwhOe6v++8jOeUqOS7peWIpOaWreeCueWHu+mCo+S4quaooeWeiyjmi77lj5YpDQogICAgICAgICAgICB0aGlzLnJheWNhc3RlciA9IG5ldyBUSFJFRS5SYXljYXN0ZXIoKTsNCiAgICAgICAgICAgIHRoaXMubW91c2UgPSBuZXcgVEhSRUUuVmVjdG9yMigpOw0KICAgICAgICB9LA0KICAgICAgICBvbmNsaWtjKCkgew0KICAgICAgICAgICAgLy/pgJrov4fpvKDmoIfngrnlh7vnmoTkvY3nva7orqHnrpflh7pyYXljYXN0ZXLmiYDpnIDopoHnmoTngrnnmoTkvY3nva7vvIzku6XlsY/luZXkuK3lv4PkuLrljp/ngrnvvIzlgLznmoTojIPlm7TkuLotMeWIsDEuDQogICAgICAgICAgICBsZXQgZXZlbnQgPSB3aW5kb3cuZXZlbnQ7DQogICAgICAgICAgICB0aGlzLm1vdXNlLnggPSAoZXZlbnQuY2xpZW50WCAvIHdpbmRvdy5pbm5lcldpZHRoKSAqIDIgLSAxOw0KICAgICAgICAgICAgdGhpcy5tb3VzZS55ID0gLShldmVudC5jbGllbnRZIC8gd2luZG93LmlubmVySGVpZ2h0KSAqIDIgKyAxOw0KICAgICAgICAgICAgLy8g6YCa6L+H6byg5qCH54K555qE5L2N572u5ZKM5b2T5YmN55u45py655qE55+p6Zi16K6h566X5Ye6cmF5Y2FzdGVyDQogICAgICAgICAgICB0aGlzLnJheWNhc3Rlci5zZXRGcm9tQ2FtZXJhKHRoaXMubW91c2UsIHRoaXMuY2FtZXJhKTsNCiAgICAgICAgICAgIHZhciBpbnRlcnNlY3RzID0gdGhpcy5yYXljYXN0ZXIuaW50ZXJzZWN0T2JqZWN0cygNCiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLmNoaWxkcmVuLA0KICAgICAgICAgICAgICAgIHRydWUNCiAgICAgICAgICAgICk7DQogICAgICAgICAgICBpZiAoaW50ZXJzZWN0cy5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhpbnRlcnNlY3RzKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgaW5pdEJhY2tncm91bmQoKSB7DQogICAgICAgICAgICAvL+WkqeepuuebkuWtkA0KICAgICAgICAgICAgLy/lha3lvKDlm77niYfliIbliKvmmK/mnJ3liY3nmoTvvIhwb3N677yJ44CB5pyd5ZCO55qE77yIbmVneu+8ieOAgeacneS4iueahO+8iHBvc3nvvInjgIHmnJ3kuIvnmoTvvIhuZWd577yJ44CB5pyd5Y+z55qE77yIcG9zeO+8ieWSjOacneW3pueahO+8iG5lZ3jvvInjgIINCiAgICAgICAgICAgIHZhciBDdWJlVGV4dHVyZUxvYWRlciA9IG5ldyBUSFJFRS5DdWJlVGV4dHVyZUxvYWRlcigpOw0KICAgICAgICAgICAgQ3ViZVRleHR1cmVMb2FkZXIuc2V0UGF0aCh0aGlzLnByb2Nlc3MgKyAiaW1hZ2VzL01pbGt5V2F5LyIpOw0KICAgICAgICAgICAgbGV0IHRleHR1cmVDdWJlID0gQ3ViZVRleHR1cmVMb2FkZXIubG9hZChbDQogICAgICAgICAgICAgICAgImRhcmstc19weC5qcGciLA0KICAgICAgICAgICAgICAgICJkYXJrLXNfbnguanBnIiwNCiAgICAgICAgICAgICAgICAiZGFyay1zX3B5LmpwZyIsDQogICAgICAgICAgICAgICAgImRhcmstc19ueS5qcGciLA0KICAgICAgICAgICAgICAgICJkYXJrLXNfcHouanBnIiwNCiAgICAgICAgICAgICAgICAiZGFyay1zX256LmpwZyINCiAgICAgICAgICAgIF0pOw0KICAgICAgICAgICAgdGhpcy5zY2VuZS5iYWNrZ3JvdW5kID0gdGV4dHVyZUN1YmU7DQogICAgICAgIH0sDQogICAgICAgIGluaXRHZW9tZXRyeSgpIHt9DQogICAgfQ0KfTsNCg=="},{"version":3,"sources":["test2.vue"],"names":[],"mappings":";;;;;;;;;;AAUA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"test2.vue","sourceRoot":"src/views/Scene","sourcesContent":["<template>\r\n    <div class=\"test\">\r\n        <div class=\"container\" id=\"container\"></div>\r\n        <div class=\"fixed_center\">\r\n            <button>星空</button>\r\n            <button>晴天</button>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport * as THREE from \"@/assets/build/three.module\";\r\nimport { TWEEN } from \"@/assets/examples/jsm/libs/tween.module.min\";\r\n\r\nimport { GUI } from \"@/assets/examples/jsm/libs/dat.gui.module.js\";\r\n\r\nimport { EffectComposer } from \"@/assets/examples/jsm/postprocessing/EffectComposer.js\";\r\nimport { RenderPass } from \"@/assets/examples/jsm/postprocessing/RenderPass.js\";\r\nimport { UnrealBloomPass } from \"@/assets/examples/jsm/postprocessing/UnrealBloomPass.js\";\r\n\r\nimport mythree from \"@/service/three\";\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            container: null,\r\n            renderer: null,\r\n            camera: null,\r\n            scene: null,\r\n            light: null,\r\n            controls: null,\r\n            composer: null,\r\n            raycaster: null,\r\n            mouse: null,\r\n            process: process.env.BASE_URL\r\n        };\r\n    },\r\n    beforeDestroy() {\r\n        if (!document.getElementById(\"container\")) {\r\n            return;\r\n        }\r\n        this.scene.children.forEach((data, index) => {\r\n            // console.log(data);\r\n            if (data.type == \"Group\") {\r\n                data.traverse(function(obj) {\r\n                    if (obj.type === \"Mesh\") {\r\n                        obj.geometry.dispose();\r\n                        if (obj.material.length) {\r\n                            obj.material.forEach(obj2 => {\r\n                                obj2.dispose();\r\n                            });\r\n                        } else {\r\n                            obj.material.dispose();\r\n                        }\r\n                    }\r\n                });\r\n                this.scene.remove(data);\r\n            } else {\r\n                this.scene.remove(data);\r\n            }\r\n        });\r\n        this.initThree = null;\r\n        this.initCamera = null;\r\n        this.initScene = null;\r\n        this.initLight = null;\r\n        this.initGeometry = null;\r\n        this.animate = null;\r\n        this.initControls = null;\r\n        this.initRaycaster = null;\r\n        this.initOutline = null;\r\n        this.addLine = null;\r\n        this.setSprite = null;\r\n        this.setLabel = null;\r\n\r\n        //变量\r\n        this.container = null;\r\n        this.camera = null;\r\n        this.scene = null;\r\n        this.renderer = null;\r\n        this.mesh = null;\r\n        this.light = null;\r\n        this.clock = null;\r\n        this.controls = null;\r\n        this.mesh1 = null;\r\n        this.mixer1 = null;\r\n        this.raycaster = null;\r\n        this.mouse = null;\r\n\r\n        window.removeEventListener(\"click\", this.onclikc);\r\n    },\r\n    mounted() {\r\n        let three = new mythree({\r\n            id: \"container\",\r\n            showHelper: true,\r\n            showStats: true\r\n        });\r\n\r\n        let obj = three.init();\r\n\r\n        this.container = obj.container;\r\n        this.renderer = obj.renderer; //渲染器\r\n        this.camera = obj.camera; //相机\r\n        this.scene = obj.scene; //场景\r\n        this.light = obj.light; //光源\r\n        this.controls = obj.controls; //相机旋转插件\r\n        this.composer = obj.composer; //后期处理\r\n\r\n        this.initRaycaster();\r\n        this.initGeometry();\r\n        three.animate();\r\n\r\n        this.initBackground();\r\n        window.addEventListener(\"click\", this.onclikc, false);\r\n    },\r\n    methods: {\r\n        initRaycaster() {\r\n            //射线，用以判断点击那个模型(拾取)\r\n            this.raycaster = new THREE.Raycaster();\r\n            this.mouse = new THREE.Vector2();\r\n        },\r\n        onclikc() {\r\n            //通过鼠标点击的位置计算出raycaster所需要的点的位置，以屏幕中心为原点，值的范围为-1到1.\r\n            let event = window.event;\r\n            this.mouse.x = (event.clientX / window.innerWidth) * 2 - 1;\r\n            this.mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;\r\n            // 通过鼠标点的位置和当前相机的矩阵计算出raycaster\r\n            this.raycaster.setFromCamera(this.mouse, this.camera);\r\n            var intersects = this.raycaster.intersectObjects(\r\n                this.scene.children,\r\n                true\r\n            );\r\n            if (intersects.length) {\r\n                console.log(intersects);\r\n            }\r\n        },\r\n        initBackground() {\r\n            //天空盒子\r\n            //六张图片分别是朝前的（posz）、朝后的（negz）、朝上的（posy）、朝下的（negy）、朝右的（posx）和朝左的（negx）。\r\n            var CubeTextureLoader = new THREE.CubeTextureLoader();\r\n            CubeTextureLoader.setPath(this.process + \"images/MilkyWay/\");\r\n            let textureCube = CubeTextureLoader.load([\r\n                \"dark-s_px.jpg\",\r\n                \"dark-s_nx.jpg\",\r\n                \"dark-s_py.jpg\",\r\n                \"dark-s_ny.jpg\",\r\n                \"dark-s_pz.jpg\",\r\n                \"dark-s_nz.jpg\"\r\n            ]);\r\n            this.scene.background = textureCube;\r\n        },\r\n        initGeometry() {}\r\n    }\r\n};\r\n</script>\r\n<style lang=\"less\">\r\n.test {\r\n    width: 100%;\r\n    height: 100%;\r\n    overflow: hidden;\r\n    .container {\r\n        width: 100%;\r\n        height: 100%;\r\n    }\r\n}\r\n.fixed_center {\r\n    position: fixed;\r\n    z-index: 100;\r\n    top: 0;\r\n    left: 50%;\r\n    transform: translate(-50%, 0);\r\n}\r\n</style>\r\n"]}]}